<!DOCTYPE html><html lang="en" data-reactroot=""><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Uploading Data to a Website | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="463568"/><link href="../../../documentation/assets/application-e5bb1544.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="../../../documentation/assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="../../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../documentation/assets/favicon.ico"/><script src="../../../documentation/assets/shared-b7676010.js"></script></head><body><div id="_omniture_top">
      <script>
        var s_account="awdappledeveloper"
      </script><!-- script src="https://developer.apple.com/assets/metrics/scripts/analytics.js" -->
      </script>
      <script>
        s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
        s.channel="www.documentation.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr"></aside><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
      <div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
              <span class="ac-gn-menuanchor-label">Global Nav Open Menu</span>
            </a>
            <a href="#" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
              <span class="ac-gn-menuanchor-label">Global Nav Close Menu</span>
            </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
              <span class="ac-gn-link-text">Apple Developer</span>
            </a>
          </li>
        </ul>
        <div class="ac-gn-search-placeholder-container" role="search">
          <div class="ac-gn-search ac-gn-search-small">
            <a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
              </a><div class="ac-gn-search-placeholder-bar">
                <div class="ac-gn-search-placeholder-input">
                  <div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
                    <div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
                    <span class="ac-gn-search-placeholder">Search Developer</span>
                  </div>
                </div>
                <div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
                  <span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
              <span class="ac-gn-link-text">Apple Developer</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
              <span class="ac-gn-link-text">Discover</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
              <span class="ac-gn-link-text">Design</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
              <span class="ac-gn-link-text">Develop</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
              <span class="ac-gn-link-text">Distribute</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
            <a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
              <span class="ac-gn-link-text">Support</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
              <span class="ac-gn-link-text">Account</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <div class="ac-gn-searchview-bar">
              <div class="ac-gn-searchview-bar-wrapper">
                <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
                  <div class="ac-gn-searchform-wrapper">
                    <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="quicklinks suggestions" />
                    <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
                    <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
                        <span class="ac-gn-searchform-reset-background"></span>
                      </button>
                  </div>
                </form>
                <button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
                    <span class="ac-gn-searchview-close-cancel" aria-hidden="true">
                      Cancel
                    </span>
                  </button>
              </div>
            </div>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
              <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
                <span class="ac-gn-searchview-close-right"></span>
              </span>
            </button>
        </aside>
          </div>
    </nav><div class="ac-gn-blur"></div><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/foundation.html">Foundation</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/foundation/url_loading_system.html"><span class="enstr">URL Loading System</span><!--end_enstr-->
<span class="jpstr">
URLローディングシステム
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current"><span class="enstr">Uploading Data to a Website</span><!--end_enstr-->
<span class="jpstr">
データをウェブサイトにアップロードする
</span><!--end_jpstr-->
</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="3"><li class="localnav-menu-setting language-container"><div class="language-toggle-container"><label for="language-toggle" class="language-toggle-label">Language:</label><select id="language-toggle" class="language-dropdown localnav-menu-link" style="width:auto"><option selected="" value="swift">Swift</option><option value="occ">Objective-C</option></select></div><div class="language-list-container"><span class="localnav-menu-setting-label">Language:</span><ul class="language-list"><li class="language-list-item"><span data-language="swift" aria-current="page" class="current-language">Swift</span></li><li class="language-list-item"><a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website?language=objc.html" class="localnav-menu-setting-link">Objective-C</a></li></ul></div></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Article</span><h1 class="topic-heading"><span><span class="enstr">Uploading Data to a Website</span><!--end_enstr-->
<span class="jpstr">
データをウェブサイトにアップロードする
</span><!--end_jpstr-->
</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><span class="enstr">Post data from your app to servers.</span><!--end_enstr-->
<span class="jpstr">
データをあなたのアプリからサービスにポストします。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section frameworks" role="complementary" aria-label="Framework"><p class="topic-summary-section-label subsection-label"><span class="enstr">Framework</span><!--end_enstr-->
<span class="jpstr">
フレームワーク
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><span>Foundation</span></li></ul></div><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label"><span class="enstr">On This Page</span><!--end_enstr-->
<span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#overview" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#see-also" class="icon icon-after icon-chevrondowncircle"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="overview" class="section"><h2><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">Many apps work with servers that accept uploads of files like images or documents, or use web service API endpoints that accept structured data like JSON. To upload data from your app, you use a <a class="symbol-name" href="../../../documentation/foundation/urlsession.html"><code><span>URLSession</span></code></a> instance to create a <a class="symbol-name" href="../../../documentation/foundation/urlsessionuploadtask.html"><code><span>URLSession<wbr/>Upload<wbr/>Task</span></code></a> instance. The upload task uses a <a class="symbol-name" href="../../../documentation/foundation/urlrequest.html"><code><span>URLRequest</span></code></a> instance that details how the upload is to be performed.</span><!--end_enstr-->
<span class="jpstr">
多くのアプリは、画像や書類のようなファイルのアップロードを受け入れるサーバーと仕事します、またはJSONのような構造化データを受け入れるウェブサービスAPIエンドポイントを使います。あなたのアプリからデータをアップロードするには、あなたは<a class="symbol-name" href="../../../documentation/foundation/urlsession.html"><code><span>URLSession</span></code></a>インスタンスを使って、<a class="symbol-name" href="../../../documentation/foundation/urlsessionuploadtask.html"><code><span>URLSession<wbr/>Upload<wbr/>Task</span></code></a>インスタンスを作成します。アップロードタスクは、<a class="symbol-name" href="../../../documentation/foundation/urlrequest.html"><code><span>URLRequest</span></code></a>インスタンスを使います、それはどのようにアップロードが実行されるかについて詳述します。
</span><!--end_jpstr-->
</p></div><h3 id="2923847"><span class="enstr">Prepare Your Data for Upload</span><!--end_enstr-->
<span class="jpstr">
あなたのデータをアップロードのために準備する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">The data to upload can be the contents of a file, a stream, or data, as is the case in <a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923850">Listing 1</a>.</span><!--end_enstr-->
<span class="jpstr">
アップロードするデータは、ファイル、ストリーム、またはデータの内容であることができます、<a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923850">コード出力 1</a> での場合のように。
</span><!--end_jpstr-->
 </p><p><span class="enstr">Many web service endpoints take JSON-formatted data, which you create by using the  <a class="symbol-name" href="../../../documentation/foundation/jsonencoder.html"><code><span>JSONEncoder</span></code></a> class on <a class="symbol-name" href="../../../documentation/swift/encodable.html"><code><span>Encodable</span></code></a> types like arrays and dictionaries. As shown in <a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923850">Listing 1</a>, you can declare a structure that conforms to <a class="symbol-name" href="../../../documentation/swift/codable.html"><code><span>Codable</span></code></a>, create an instance of this type, and use <code class="code-voice"><span>JSONEncoder</span></code> to encode the instance to JSON data for upload.</span><!--end_enstr-->
<span class="jpstr">
多くのウェブサービスエンドポイントは、JSON形式のデータを取ります、それはあなたが<a class="symbol-name" href="../../../documentation/foundation/jsonencoder.html"><code><span>JSONEncoder</span></code></a>クラスを、配列および辞書のような<a class="symbol-name" href="../../../documentation/swift/encodable.html"><code><span>Encodable</span></code></a>型の上で使って作成します。<a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923850">コード出力 1</a> で示されるように、あなたは<a class="symbol-name" href="../../../documentation/swift/codable.html"><code><span>Codable</span></code></a>に準拠するある構造体を宣言して、この型のインスタンスを作成します、そして<code class="code-voice"><span>JSONEncoder</span></code>を使ってそのインスタンスをアップロード用のJSONデータにエンコードします。
</span><!--end_jpstr-->
</p><figure id="2923850"><figcaption><strong class="caption-title"><span class="enstr">Listing 1</span><!--end_enstr-->
<span class="jpstr">
コード出力 1
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Preparing JSON data for upload</span><!--end_enstr-->
<span class="jpstr">
JSONデータをアップロード用に準備する
</span><!--end_jpstr-->
</p></div></div></figcaption><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>struct Order: Codable {
    let customerId: String
    let items: [String]
}

// ...

let order = Order(customerId: "12345",
                  items: ["Cheese pizza", "Diet soda"])
guard let uploadData = try?JSONEncoder().encode(order) else {
    return
}
</code></pre></div></div></figure><p><span class="enstr">There are many other ways to create a data instance, such as encoding an image as JPEG or PNG data, or converting a string to data by using an encoding like UTF-8.</span><!--end_enstr-->
<span class="jpstr">
データインスタンスを作成する多くの他の方法があります、たとえば画像をJPEGまたはPNGデータとしてエンコードする、または文字列をデータへとUTF-8のようなエンコーディングを使うことで変換するなど。
</span><!--end_jpstr-->
</p></div><h3 id="2923848"><span class="enstr">Configure an Upload Request</span><!--end_enstr-->
<span class="jpstr">
アップロードリクエストを構成設定する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">An upload task requires a <code class="code-voice"><span>URLRequest</span></code> instance. As shown in <a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923851">Listing 2</a>, set the <a class="symbol-name" href="../../../documentation/foundation/urlrequest/2011415-httpmethod.html"><code><span>http<wbr/>Method</span></code></a> property of the request to <code class="code-voice"><span>"</span></code><code class="code-voice"><span>POST</span></code><code class="code-voice"><span>"</span></code> or <code class="code-voice"><span>"PUT"</span></code>, depending on what the server supports and expects. Use the <a class="symbol-name" href="../../../documentation/foundation/urlrequest/2011447-setvalue.html"><code><span>set<wbr/>Value(_:<wbr/>for<wbr/>HTTPHeader<wbr/>Field:)</span></code></a> method to set the values of any HTTP headers that you want to provide, except the <code class="code-voice"><span>Content-Length</span></code> header. The session figures out content length automatically from the size of your data.</span><!--end_enstr-->
<span class="jpstr">
アップロードタスクは、<code class="code-voice"><span>URLRequest</span></code>インスタンスを必要とします。<a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923851">コード出力 2</a> で示されるように、リクエストの<a class="symbol-name" href="../../../documentation/foundation/urlrequest/2011415-httpmethod.html"><code><span>http<wbr/>Method</span></code></a>プロパティを<code class="code-voice"><span>"</span></code><code class="code-voice"><span>POST</span></code><code class="code-voice"><span>"</span></code>または<code class="code-voice"><span>"PUT"</span></code>に設定してください、そのサーバーがサポートおよび期待するのは何かに依存して。<a class="symbol-name" href="../../../documentation/foundation/urlrequest/2011447-setvalue.html"><code><span>set<wbr/>Value(_:<wbr/>for<wbr/>HTTPHeader<wbr/>Field:)</span></code></a>メソッドを使って、あなたが提供することを望むあらゆるHTTPヘッダの値を設定してください、ただし<code class="code-voice"><span>Content-Length</span></code>ヘッダは除いて。セッションは、内容の長さをあなたのデータのサイズから自動的に計算します。
</span><!--end_jpstr-->
</p><figure id="2923851"><figcaption><strong class="caption-title"><span class="enstr">Listing 2</span><!--end_enstr-->
<span class="jpstr">
コード出力 2 
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Configuring a URL request</span><!--end_enstr-->
<span class="jpstr">
URLリクエストを構成設定する
</span><!--end_jpstr-->
</p></div></div></figcaption><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let url = URL(string: "https://example.com/post")!
var request = URLRequest(url: url)
request.httpMethod = "POST"
request.setValue("application/json", forHTTPHeaderField: "Content-Type")
</code></pre></div></div></figure><p></p></div><h3 id="2923849"><span class="enstr">Create and Start an Upload Task</span><!--end_enstr-->
<span class="jpstr">
アップロードタスクを作成して開始する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">To begin an upload, call <a class="symbol-name" href="../../../documentation/foundation/urlsession/1411518-uploadtask.html"><code><span>upload<wbr/>Task(with:<wbr/>from:<wbr/>completion<wbr/>Handler:)</span></code></a> on a <code class="code-voice"><span>URLSession</span></code> instance to create an uploading <a class="symbol-name" href="../../../documentation/foundation/urlsessiontask.html"><code><span>URLSession<wbr/>Task</span></code></a> instance, passing in the request and the data instances you’ve previously set up. Because tasks start in a suspended state, you begin the network loading process by calling <a class="symbol-name" href="../../../documentation/foundation/urlsessiontask/1411121-resume.html"><code><span>resume()</span></code></a> on the task. <a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923852">Listing 3</a> uses the shared <code class="code-voice"><span>URLSession</span></code> instance, and receives its results in a completion handler. The handler checks for transport and server errors before using any returned data.</span><!--end_enstr-->
<span class="jpstr">
アップロードを始めるには、<a class="symbol-name" href="../../../documentation/foundation/urlsession/1411518-uploadtask.html"><code><span>upload<wbr/>Task(with:<wbr/>from:<wbr/>completion<wbr/>Handler:)</span></code></a>を<code class="code-voice"><span>URLSession</span></code>インスタンス上で呼び出して、アップロードを行う<a class="symbol-name" href="../../../documentation/foundation/urlsessiontask.html"><code><span>URLSession<wbr/>Task</span></code></a>インスタンスを、あなたが以前に準備しておいたリクエストとデータインスタンスを渡して、作成してください。タスクは待機状態で開始することから、あなたはネットワークロード処理を、<a class="symbol-name" href="../../../documentation/foundation/urlsessiontask/1411121-resume.html"><code><span>resume()</span></code></a>をそのタスク上で呼び出すことによって開始します。<a href="../../../documentation/foundation/url_loading_system/uploading_data_to_a_website.html#2923852">コード出力 3</a> は、共有<code class="code-voice"><span>URLSession</span></code>インスタンスを使います、そしてそれの結果を完了ハンドラにおいて受け取ります。ハンドラは、転送およびサーバーエラーについて、何らかの返されたデータを使う前に、確認します。
</span><!--end_jpstr-->
</p><figure id="2923852"><figcaption><strong class="caption-title"><span class="enstr">Listing 3</span><!--end_enstr-->
<span class="jpstr">
コード出力 3 
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Starting an upload task</span><!--end_enstr-->
<span class="jpstr">
アップロードタスクを始める
</span><!--end_jpstr-->
</p></div></div></figcaption><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let task = URLSession.shared.uploadTask(with: request, from: uploadData) { data, response, error in
    if let error = error {
        print ("error: \(error)")
        return
    }
    guard let response = response as? HTTPURLResponse,
        (200...299).contains(response.statusCode) else {
        print ("server error")
        return
    }
    if let mimeType = response.mimeType,
        mimeType == "application/json",
        let data = data,
        let dataString = String(data: data, encoding: .utf8) {
        print ("got data: \(dataString)")
    }
}
task.resume()
</code></pre></div></div></figure><p></p></div><h3 id="2936057"><span class="enstr">Alternatively, Upload by Setting a Delegate</span><!--end_enstr-->
<span class="jpstr">
あるいは、委任先を設定することによってアップロードする
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">As an alternative to the completion handler approach, you can instead set a delegate on a session you configure, and then create the upload task with <a class="symbol-name" href="../../../documentation/foundation/urlsession/1409763-uploadtask.html"><code><span>upload<wbr/>Task(with:<wbr/>from:)</span></code></a>. In this scenario, you implement methods from the <a class="symbol-name" href="../../../documentation/foundation/urlsessiondelegate.html"><code><span>URLSession<wbr/>Delegate</span></code></a> and <a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate.html"><code><span>URLSession<wbr/>Task<wbr/>Delegate</span></code></a> protocols. These methods receive the server response and any data or transport errors.</span><!--end_enstr-->
<span class="jpstr">
完了ハンドラ手法の代替として、あなたは代わりにある委任先をあなたが構成設定するセッション上で設定できます、そしてそれからアップロードタスクを<a class="symbol-name" href="../../../documentation/foundation/urlsession/1409763-uploadtask.html"><code><span>upload<wbr/>Task(with:<wbr/>from:)</span></code></a>で作成します。このシナリオでは、あなたはメソッドを<a class="symbol-name" href="../../../documentation/foundation/urlsessiondelegate.html"><code><span>URLSession<wbr/>Delegate</span></code></a>および<a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate.html"><code><span>URLSession<wbr/>Task<wbr/>Delegate</span></code></a>プロトコルから実装します。これらメソッドは、サーバー応答と何らかのデータまたは転送エラーを受け取ります。
</span><!--end_jpstr-->
</p></div></div></section></div></div><section id="see-also" class="contenttable section alt-light-container row"><div class="alt-light"><div class="section-content"><h2 class="contenttable-title"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</h2><section id="3038363" class="contenttable-section"><div class="contenttable-container row"><div class="contenttable-section-title-container column large-3 medium-3 small-12"><h3 class="contenttable-section-title"><span class="enstr">Uploading</span><!--end_enstr-->
<span class="jpstr">
アップロード
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><div class="task-topics"><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name" href="../../../documentation/foundation/url_loading_system/uploading_streams_of_data.html"><svg xmlns="http://www.w3.org/2000/svg" height="15" viewBox="0 0 22 30" class="svg-icon symbol-name-icon" aria-hidden="true"><title>Article</title><g id="Article" class="svg-icon-small"><path d="M12.87,0H0V2H0V28H0v2H22V9.13ZM20,28H2V2h9V12h9Zm0-18H13V3l7,7Z"></path></g></svg><span><span class="enstr">Uploading Streams of Data</span><!--end_enstr-->
<span class="jpstr">
データのストリームをアップロードする
</span><!--end_jpstr-->
</span></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr">Send a stream of data to a server.</span><!--end_enstr-->
<span class="jpstr">
データのストリームをサーバーに送信します。
</span><!--end_jpstr-->
</p></div></div></div></div></div></div></div></section></div></div></section></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/business/">Business</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><span class="enstr">Resources</span><!--end_enstr-->
<span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><span class="enstr">Internationalization</span><!--end_enstr-->
<span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/business/distribute/">Apps for Business</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
              </ul>
              <h3><a href="/account/">Account</a></h3>
              <ul>
                <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2020 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":2919363,"abstract":"<div><p>Post data from your app to servers.<\/p><\/div>","title":{"content":"Uploading Data to a Website"},"discussion":"<div><p>Many apps work with servers that accept uploads of files like images or documents, or use web service API endpoints that accept structured data like JSON. To upload data from your app, you use a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\"><code><span>URLSession<\/span><\/code><\/a> instance to create a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessionuploadtask\"><code><span>URLSession<wbr\/>Upload<wbr\/>Task<\/span><\/code><\/a> instance. The upload task uses a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlrequest\"><code><span>URLRequest<\/span><\/code><\/a> instance that details how the upload is to be performed.<\/p><\/div><h3 id=\"2923847\">Prepare Your Data for Upload<\/h3><div><p>The data to upload can be the contents of a file, a stream, or data, as is the case in <a href=\"\/documentation\/foundation\/url_loading_system\/uploading_data_to_a_website#2923850\">Listing 1<\/a>. <\/p><p>Many web service endpoints take JSON-formatted data, which you create by using the  <a class=\"symbol-name\" href=\"\/documentation\/foundation\/jsonencoder\"><code><span>JSONEncoder<\/span><\/code><\/a> class on <a class=\"symbol-name\" href=\"\/documentation\/swift\/encodable\"><code><span>Encodable<\/span><\/code><\/a> types like arrays and dictionaries. As shown in <a href=\"\/documentation\/foundation\/url_loading_system\/uploading_data_to_a_website#2923850\">Listing 1<\/a>, you can declare a structure that conforms to <a class=\"symbol-name\" href=\"\/documentation\/swift\/codable\"><code><span>Codable<\/span><\/code><\/a>, create an instance of this type, and use <code class=\"code-voice\"><span>JSONEncoder<\/span><\/code> to encode the instance to JSON data for upload.<\/p><figure id=\"2923850\"><figcaption><strong class=\"caption-title\">Listing 1<\/strong> <div class=\"caption-content formatted-content\"><div><p>Preparing JSON data for upload<\/p><\/div><\/div><\/figcaption><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>struct Order: Codable {\n    let customerId: String\n    let items: [String]\n}\n\n\/\/ ...\n\nlet order = Order(customerId: &quot;12345&quot;,\n                  items: [&quot;Cheese pizza&quot;, &quot;Diet soda&quot;])\nguard let uploadData = try? JSONEncoder().encode(order) else {\n    return\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>There are many other ways to create a data instance, such as encoding an image as JPEG or PNG data, or converting a string to data by using an encoding like UTF-8.<\/p><\/div><h3 id=\"2923848\">Configure an Upload Request<\/h3><div><p>An upload task requires a <code class=\"code-voice\"><span>URLRequest<\/span><\/code> instance. As shown in <a href=\"\/documentation\/foundation\/url_loading_system\/uploading_data_to_a_website#2923851\">Listing 2<\/a>, set the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlrequest\/2011415-httpmethod\"><code><span>http<wbr\/>Method<\/span><\/code><\/a> property of the request to <code class=\"code-voice\"><span>&quot;<\/span><\/code><code class=\"code-voice\"><span>POST<\/span><\/code><code class=\"code-voice\"><span>&quot;<\/span><\/code> or <code class=\"code-voice\"><span>&quot;PUT&quot;<\/span><\/code>, depending on what the server supports and expects. Use the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlrequest\/2011447-setvalue\"><code><span>set<wbr\/>Value(_:<wbr\/>for<wbr\/>HTTPHeader<wbr\/>Field:)<\/span><\/code><\/a> method to set the values of any HTTP headers that you want to provide, except the <code class=\"code-voice\"><span>Content-Length<\/span><\/code> header. The session figures out content length automatically from the size of your data.<\/p><figure id=\"2923851\"><figcaption><strong class=\"caption-title\">Listing 2<\/strong> <div class=\"caption-content formatted-content\"><div><p>Configuring a URL request<\/p><\/div><\/div><\/figcaption><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let url = URL(string: &quot;https:\/\/example.com\/post&quot;)!\nvar request = URLRequest(url: url)\nrequest.httpMethod = &quot;POST&quot;\nrequest.setValue(&quot;application\/json&quot;, forHTTPHeaderField: &quot;Content-Type&quot;)\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div><h3 id=\"2923849\">Create and Start an Upload Task<\/h3><div><p>To begin an upload, call <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/1411518-uploadtask\"><code><span>upload<wbr\/>Task(with:<wbr\/>from:<wbr\/>completion<wbr\/>Handler:)<\/span><\/code><\/a> on a <code class=\"code-voice\"><span>URLSession<\/span><\/code> instance to create an uploading <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiontask\"><code><span>URLSession<wbr\/>Task<\/span><\/code><\/a> instance, passing in the request and the data instances you’ve previously set up. Because tasks start in a suspended state, you begin the network loading process by calling <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiontask\/1411121-resume\"><code><span>resume()<\/span><\/code><\/a> on the task. <a href=\"\/documentation\/foundation\/url_loading_system\/uploading_data_to_a_website#2923852\">Listing 3<\/a> uses the shared <code class=\"code-voice\"><span>URLSession<\/span><\/code> instance, and receives its results in a completion handler. The handler checks for transport and server errors before using any returned data.<\/p><figure id=\"2923852\"><figcaption><strong class=\"caption-title\">Listing 3<\/strong> <div class=\"caption-content formatted-content\"><div><p>Starting an upload task<\/p><\/div><\/div><\/figcaption><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let task = URLSession.shared.uploadTask(with: request, from: uploadData) { data, response, error in\n    if let error = error {\n        print (&quot;error: \\(error)&quot;)\n        return\n    }\n    guard let response = response as? HTTPURLResponse,\n        (200...299).contains(response.statusCode) else {\n        print (&quot;server error&quot;)\n        return\n    }\n    if let mimeType = response.mimeType,\n        mimeType == &quot;application\/json&quot;,\n        let data = data,\n        let dataString = String(data: data, encoding: .utf8) {\n        print (&quot;got data: \\(dataString)&quot;)\n    }\n}\ntask.resume()\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div><h3 id=\"2936057\">Alternatively, Upload by Setting a Delegate<\/h3><div><p>As an alternative to the completion handler approach, you can instead set a delegate on a session you configure, and then create the upload task with <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/1409763-uploadtask\"><code><span>upload<wbr\/>Task(with:<wbr\/>from:)<\/span><\/code><\/a>. In this scenario, you implement methods from the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiondelegate\"><code><span>URLSession<wbr\/>Delegate<\/span><\/code><\/a> and <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiontaskdelegate\"><code><span>URLSession<wbr\/>Task<wbr\/>Delegate<\/span><\/code><\/a> protocols. These methods receive the server response and any data or transport errors.<\/p><\/div>","containingGroup":[{"id":3038363,"role":"task","paths":[],"symbols":[{"id":2919363,"role":"article","paths":["documentation\/foundation\/url_loading_system\/uploading_data_to_a_website"],"abstract":"<div><p>Post data from your app to servers.<\/p><\/div>","title":{"content":"Uploading Data to a Website"}},{"id":3037350,"role":"article","paths":["documentation\/foundation\/url_loading_system\/uploading_streams_of_data"],"abstract":"<div><p>Send a stream of data to a server.<\/p><\/div>","title":{"content":"Uploading Streams of Data"}}],"title":{"content":"Uploading"}}],"modules":[{"title":{"content":"Foundation"},"paths":["documentation\/foundation"],"importStatement":"<import xml:space=\"preserve\"><keyWord>import<\/keyWord> Foundation<\/import>","availability":[{"platform":"watchOS","introduced":"2.0"},{"platform":"macOS","introduced":"10.0"},{"platform":"Mac Catalyst","introduced":"13.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"iOS","introduced":"2.0"}]}],"role":"article","language":"swift","roleHeading":"Article","languages":["occ","swift"],"variants":{"occ":{"paths":["documentation\/foundation\/url_loading_system\/uploading_data_to_a_website"]},"swift":{"paths":["documentation\/foundation\/url_loading_system\/uploading_data_to_a_website"]}},"pid":463568,"paths":["documentation\/foundation\/url_loading_system\/uploading_data_to_a_website"],"hierarchy":[[{"id":1613013,"role":"collection","title":{"content":"Foundation"},"paths":["documentation\/foundation"]},{"id":2877756,"role":"collectionGroup","title":{"content":"URL Loading System"},"paths":["documentation\/foundation\/url_loading_system"]}]],"legalNotices":{"copyright":"Copyright &copy; 2020 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script></body></html>