<!DOCTYPE html><html lang="en" data-reactroot=""><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Handling an Authentication Challenge | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="424974"/><link href="../../../documentation/assets/application-e5bb1544.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="../../../documentation/assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="../../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../documentation/assets/favicon.ico"/><script src="../../../documentation/assets/shared-b7676010.js"></script></head><body><div id="_omniture_top">
      <script>
        var s_account="awdappledeveloper"
      </script><!-- script src="https://developer.apple.com/assets/metrics/scripts/analytics.js" -->
      </script>
      <script>
        s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
        s.channel="www.documentation.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr"></aside><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
      <div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
              <span class="ac-gn-menuanchor-label">Global Nav Open Menu</span>
            </a>
            <a href="#" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
              <span class="ac-gn-menuanchor-label">Global Nav Close Menu</span>
            </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
              <span class="ac-gn-link-text">Apple Developer</span>
            </a>
          </li>
        </ul>
        <div class="ac-gn-search-placeholder-container" role="search">
          <div class="ac-gn-search ac-gn-search-small">
            <a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
              </a><div class="ac-gn-search-placeholder-bar">
                <div class="ac-gn-search-placeholder-input">
                  <div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
                    <div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
                    <span class="ac-gn-search-placeholder">Search Developer</span>
                  </div>
                </div>
                <div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
                  <span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
              <span class="ac-gn-link-text">Apple Developer</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
              <span class="ac-gn-link-text">Discover</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
              <span class="ac-gn-link-text">Design</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
              <span class="ac-gn-link-text">Develop</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
              <span class="ac-gn-link-text">Distribute</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
            <a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
              <span class="ac-gn-link-text">Support</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
              <span class="ac-gn-link-text">Account</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <div class="ac-gn-searchview-bar">
              <div class="ac-gn-searchview-bar-wrapper">
                <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
                  <div class="ac-gn-searchform-wrapper">
                    <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="quicklinks suggestions" />
                    <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
                    <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
                        <span class="ac-gn-searchform-reset-background"></span>
                      </button>
                  </div>
                </form>
                <button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
                    <span class="ac-gn-searchview-close-cancel" aria-hidden="true">
                      Cancel
                    </span>
                  </button>
              </div>
            </div>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
              <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
                <span class="ac-gn-searchview-close-right"></span>
              </span>
            </button>
        </aside>
          </div>
    </nav><div class="ac-gn-blur"></div><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/foundation.html">Foundation</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/foundation/url_loading_system.html"><span class="enstr">URL Loading System</span><!--end_enstr-->
<span class="jpstr">
URLローディングシステム
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current"><span class="enstr">Handling an Authentication Challenge</span><!--end_enstr-->
<span class="jpstr">
認証チャレンジを取り扱う
</span><!--end_jpstr-->
</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="3"><li class="localnav-menu-setting language-container"><div class="language-toggle-container"><label for="language-toggle" class="language-toggle-label">Language:</label><select id="language-toggle" class="language-dropdown localnav-menu-link" style="width:auto"><option selected="" value="swift">Swift</option><option value="occ">Objective-C</option></select></div><div class="language-list-container"><span class="localnav-menu-setting-label">Language:</span><ul class="language-list"><li class="language-list-item"><span data-language="swift" aria-current="page" class="current-language">Swift</span></li><li class="language-list-item"><a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge?language=objc.html" class="localnav-menu-setting-link">Objective-C</a></li></ul></div></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Article</span><h1 class="topic-heading"><span><span class="enstr">Handling an Authentication Challenge</span><!--end_enstr-->
<span class="jpstr">
認証チャレンジを取り扱う
</span><!--end_jpstr-->
</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><span class="enstr">Respond appropriately when a server demands authentication for a URL request.</span><!--end_enstr-->
<span class="jpstr">
サーバーがあるURLリクエストに対する認証を請求する時に適切に応答します。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section frameworks" role="complementary" aria-label="Framework"><p class="topic-summary-section-label subsection-label"><span class="enstr">Framework</span><!--end_enstr-->
<span class="jpstr">
フレームワーク
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><span>Foundation</span></li></ul></div><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label"><span class="enstr">On This Page</span><!--end_enstr-->
<span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#overview" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#topics" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Topics</span><!--end_enstr-->
<span class="jpstr">
話題
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#see-also" class="icon icon-after icon-chevrondowncircle"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="overview" class="section"><h2><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">When your app makes a request with a <a class="symbol-name" href="../../../documentation/foundation/urlsessiontask.html"><code><span>URLSession<wbr/>Task</span></code></a>, the server may respond with one or more demands for credentials before continuing. The session task attempts to handle this for you. If it can’t, it calls your session’s <a class="symbol-name" href="../../../documentation/foundation/urlsession/1411530-delegate.html"><code><span>delegate</span></code></a> to handle the challenges.</span><!--end_enstr-->
<span class="jpstr">
あなたのアプリがある要請を<a class="symbol-name" href="../../../documentation/foundation/urlsessiontask.html"><code><span>URLSession<wbr/>Task</span></code></a>でする場合、サーバーは続ける前に１つ以上の資格情報の要求で応答するかもしれません。セッションタスクは、これをあなたのために取り扱います。それができないならば、それはあなたのセッションのもつ<a class="symbol-name" href="../../../documentation/foundation/urlsession/1411530-delegate.html"><code><span>delegate</span></code></a>を呼び出してそのチャレンジを取り扱います。
</span><!--end_jpstr-->
</p><p><span class="enstr">Implement the delegate methods described in this article to answer challenges issued by a server that your app connects to. If you don’t implement a delegate, your request may be denied by the server, and you receive a response with HTTP status code <code class="code-voice"><span>401</span></code> (Forbidden) instead of the data you expect.</span><!--end_enstr-->
<span class="jpstr">
この記事で記述される委任先メソッドを実装して、あなたのアプリが接続するところのサーバーによって出されるチャレンジに答えてください。あなたが委任先を実装しないならば、あなたのリクエストはサーバーによって拒絶されるでしょう、そしてあなたは応答をHTTP状態コード<code class="code-voice"><span>401</span></code> (Forbidden) で受け取るでしょう、あなたが期待するデータではなしに。
</span><!--end_jpstr-->
</p><p></p></div><h3 id="2942075"><span class="enstr">Determine the Appropriate Delegate Method</span><!--end_enstr-->
<span class="jpstr">
適切な委任先メソッドを決定する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">Implement one or both delegate authentication methods, depending on the nature of the challenge(s) you receive.</span><!--end_enstr-->
<span class="jpstr">
１つまたは両方の委任先認証メソッドを実装してください、あなたが受け取るそのチャレンジ（または複数）に基づいて。
</span><!--end_jpstr-->
</p><ul><li><p><span class="enstr">Implement the <a class="symbol-name" href="../../../documentation/foundation/urlsessiondelegate/1409308-urlsession.html"><code><span>url<wbr/>Session(_:<wbr/>did<wbr/>Receive:<wbr/>completion<wbr/>Handler:)</span></code></a> method of <a class="symbol-name" href="../../../documentation/foundation/urlsessiondelegate.html"><code><span>URLSession<wbr/>Delegate</span></code></a> to handle session-wide challenges. These are challenges like Transport Layer Security (TLS) validation. Once you’ve successfully handled this kind of challenge, your action remains in effect for all tasks created from that <a class="symbol-name" href="../../../documentation/foundation/urlsession.html"><code><span>URLSession</span></code></a>.</span><!--end_enstr-->
<span class="jpstr">
<a class="symbol-name" href="../../../documentation/foundation/urlsessiondelegate.html"><code><span>URLSession<wbr/>Delegate</span></code></a>の<a class="symbol-name" href="../../../documentation/foundation/urlsessiondelegate/1409308-urlsession.html"><code><span>url<wbr/>Session(_:<wbr/>did<wbr/>Receive:<wbr/>completion<wbr/>Handler:)</span></code></a>メソッドを実装して、セッション単位のチャレンジを取り扱ってください。Transport Layer Security（TLS）検証のようなチャレンジがあります。一旦あなたが成功裏にこの種のチャレンジを処理するならば、あなたのアクションはその<a class="symbol-name" href="../../../documentation/foundation/urlsession.html"><code><span>URLSession</span></code></a>から作成された全てのタスクに対して有効なままです。
</span><!--end_jpstr-->
</p></li><li><p><span class="enstr">Implement the <a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate/1411595-urlsession.html"><code><span>url<wbr/>Session(_:<wbr/>task:<wbr/>did<wbr/>Receive:<wbr/>completion<wbr/>Handler:)</span></code></a> method of <a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate.html"><code><span>URLSession<wbr/>Task<wbr/>Delegate</span></code></a> to handle task-specific challenges. These are challenges like demands for username/password authentication. Each task created from a given session may issue its own challenges.</span><!--end_enstr-->
<span class="jpstr">
<a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate.html"><code><span>URLSession<wbr/>Task<wbr/>Delegate</span></code></a>の<a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate/1411595-urlsession.html"><code><span>url<wbr/>Session(_:<wbr/>task:<wbr/>did<wbr/>Receive:<wbr/>completion<wbr/>Handler:)</span></code></a>メソッドを実装して、タスク特有のチャレンジを取り扱ってください。ユーザ名／パスワード認証の要求のようなチャレンジがあります。ある与えられたセッションから作成された各タスクは、それ自身のチャレンジを発行するかもしれません。
</span><!--end_jpstr-->
</p></li></ul><aside class="aside aside-note" role="note"><p class="aside-name"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p><p><span class="enstr">See <a href="../../../documentation/foundation/urlprotectionspace/nsurlprotectionspace_authentication_method_constants.html">NSURLProtectionSpace Authentication Method Constants</a> for a guide to which authentication methods are session-wide or task-specific.</span><!--end_enstr-->
<span class="jpstr">
<a href="../../../documentation/foundation/urlprotectionspace/nsurlprotectionspace_authentication_method_constants.html">NSURLProtectionSpace Authentication Method Constants</a>をどの認証メソッドがセッション単位またはタスク特有であるかに対するガイドとして見てください。
</span><!--end_jpstr-->
</p></aside><p><span class="enstr">As a simple example, consider what happens when you request an <code class="code-voice"><span>http</span></code> URL protected by HTTP Basic authentication, as defined in <a href="https://tools.ietf.org/html/rfc7617">RFC 7617</a>. Because this is a task-specific challenge, you handle this by implementing <a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate/1411595-urlsession.html"><code><span>url<wbr/>Session(_:<wbr/>task:<wbr/>did<wbr/>Receive:<wbr/>completion<wbr/>Handler:)</span></code></a>.</span><!--end_enstr-->
<span class="jpstr">
単純な例として、<a href="https://tools.ietf.org/html/rfc7617">RFC 7617</a>で定義されるようにHTTP Basic認証によって保護された<code class="code-voice"><span>http</span></code> URLをあなたがリクエストする時に何が起こるか考えてください。これがタスク特有のチャレンジであることから、あなたはこれを<a class="symbol-name" href="../../../documentation/foundation/urlsessiontaskdelegate/1411595-urlsession.html"><code><span>url<wbr/>Session(_:<wbr/>task:<wbr/>did<wbr/>Receive:<wbr/>completion<wbr/>Handler:)</span></code></a>を実装することによって取り扱います。
</span><!--end_jpstr-->
</p><aside class="aside aside-note" role="note"><p class="aside-name"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p><p><span class="enstr">If you connect via <code class="code-voice"><span>https</span></code>, you also receive a server trust challenge. See <a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge/performing_manual_server_trust_authentication.html">Performing Manual Server Trust Authentication</a> for information on handling this type of session-wide challenge.</span><!--end_enstr-->
<span class="jpstr">
あなたが<code class="code-voice"><span>https</span></code>によって接続するならば、あなたはまたサーバー信用チャレンジを受け取ります。<a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge/performing_manual_server_trust_authentication.html">Performing Manual Server Trust Authentication</a>をこの型のセッション単位のチャレンジを取り扱う上での情報として見てください。
</span><!--end_jpstr-->
</p></aside><p><span class="enstr"><a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2948287">Figure 1</a> outlines a strategy for responding to the HTTP Basic challenge.</span><!--end_enstr-->
<span class="jpstr">
<a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2948287">図 1</a> は、HTTP Basicチャレンジに応答するための方策の要点を述べます。
</span><!--end_jpstr-->
</p><figure id="2948287"><img class="centered-block" src="../../../../docs-assets.developer.apple.com/published/0538c8630f/df4288af-90f3-4504-b657-a5ae9b3e994b.png" srcSet="../../../../docs-assets.developer.apple.com/published/0538c8630f/df4288af-90f3-4504-b657-a5ae9b3e994b.png 1x, https://docs-assets.developer.apple.com/published/00ef01d197/759d2099-d938-415f-ac8a-1a0cac9dea4b.png 2x" alt="Decision tree showing states and choices for handling an authentication challenge. The first decision point is whether the received challenge's authentication method is HTTP Basic; if not, use system default handling. If so, the user is challenged for username and password. The second decision point asks if the user did provide a username and password. If yes, create and use credential; if not, cancel the challenge." width="882" height="auto"/></figure><p><span class="enstr">The following sections implement this strategy.</span><!--end_enstr-->
<span class="jpstr">
後の続く節は、この方策を実装します。
</span><!--end_jpstr-->
</p></div><h3 id="2942073"><span class="enstr">Determine the Type of Authentication Challenge</span><!--end_enstr-->
<span class="jpstr">
認証チャレンジの型を決定する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">When you receive an authentication challenge, use your delegate method to determine the type of challenge. The delegate method receives a <a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge.html"><code><span>URLAuthentication<wbr/>Challenge</span></code></a> instance that describes the challenge being issued. This instance contains a <a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge/1410012-protectionspace.html"><code><span>protection<wbr/>Space</span></code></a> property whose <a class="symbol-name" href="../../../documentation/foundation/urlprotectionspace/1415028-authenticationmethod.html"><code><span>authentication<wbr/>Method</span></code></a> property indicates the kind of challenge being issued (such as a request for a username and password, or a client certificate). You use this value to determine whether you can handle the challenge.</span><!--end_enstr-->
<span class="jpstr">
あなたがある認証チャレンジを受け取る時、あなたの委任先メソッドを使ってチャレンジの型を決定してください。委任先メソッドは、ある<a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge.html"><code><span>URLAuthentication<wbr/>Challenge</span></code></a>インスタンスを受け取ります、それは発行されているチャレンジを記述します。このインスタンスは、<a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge/1410012-protectionspace.html"><code><span>protection<wbr/>Space</span></code></a>プロパティを含みます、それの<a class="symbol-name" href="../../../documentation/foundation/urlprotectionspace/1415028-authenticationmethod.html"><code><span>authentication<wbr/>Method</span></code></a>プロパティは発行されているチャレンジの種類を指し示します（たとえばユーザ名とパスワードの要求、またはクライアント証明書など）。あなたは、この値を使ってあなたがそのチャレンジを取り扱えるかどうかを決定します。
</span><!--end_jpstr-->
</p><p><span class="enstr">You respond to the challenge by directly invoking the completion handler passed in to the challenge, passing an <a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition</span></code></a> indicating your response to the challenge. You use the disposition argument to provide a credential, cancel the request, or allow the default handling to proceed, whichever is appropriate.</span><!--end_enstr-->
<span class="jpstr">
あなたは、チャレンジに渡される完了ハンドラを、チャレンジに対するあなたの応答を指し示している<a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition</span></code></a>を渡して、直接に発動することによってチャレンジに応答します。あなたは、意向の引数を使うことで、資格情報を提供する、リクエストを取り消す、または省略時の処理に続けさせる、どれでも適切なことをします。
</span><!--end_jpstr-->
</p><p><span class="enstr"><a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2942079">Listing 1</a> tests the authentication method to see if it is the expected type, HTTP Basic. If the <code class="code-voice"><span>authentication<wbr/>Method</span></code> property indicates some other kind of challenge, it calls the completion handler with the <a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition/performdefaulthandling.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition<wbr/>.perform<wbr/>Default<wbr/>Handling</span></code></a> disposition. Telling the task to use its default handling may satisfy the challenge; otherwise, the task will move on to the next challenge in the response and call this delegate again. This process continues until the task reaches the HTTP Basic challenge that you expect to handle.</span><!--end_enstr-->
<span class="jpstr">
<a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2942079">コード出力 1</a> は、認証メソッドをテストして、それが期待する型、HTTP Basicであるかを見ます。<code class="code-voice"><span>authentication<wbr/>Method</span></code>プロパティが何か他の種類のチャレンジを指し示すならば、それは完了ハンドラを<a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition/performdefaulthandling.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition<wbr/>.perform<wbr/>Default<wbr/>Handling</span></code></a>の意向で呼び出します。それの省略時の処理を使うようにタスクに伝えることは、そのチャレンジを満足させるかもしれません；そうでなければ、タスクはその応答において次のチャレンジへと移動します、そしてこの委任先を再び呼び出すでしょう。この過程は、あなたが取り扱うのを期待するHTTP Basicチャレンジに、そのタスクが到達するまで続きます。
</span><!--end_jpstr-->
</p><figure id="2942079"><figcaption><strong class="caption-title"><span class="enstr">Listing 1</span><!--end_enstr-->
<span class="jpstr">
コード出力 1
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Checking the authentication method of an authentication challenge</span><!--end_enstr-->
<span class="jpstr">
ある認証チャレンジの認証メソッドを調べる
</span><!--end_jpstr-->
</p></div></div></figcaption><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let authMethod = challenge.protectionSpace.authenticationMethod
guard authMethod == NSURLAuthenticationMethodHTTPBasic else {
    completionHandler(.performDefaultHandling, nil)
    return
}
</code></pre></div></div></figure><p></p></div><h3 id="2942078"><span class="enstr">Create a Credential Instance</span><!--end_enstr-->
<span class="jpstr">
資格情報インスタンスを作成する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">To successfully answer the challenge, you need to submit a credential appropriate to type of challenge you have received. For HTTP Basic and HTTP Digest challenges, you provide a username and password. <a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2942074">Listing 2</a> shows a helper method that attempts to create a <a class="symbol-name" href="../../../documentation/foundation/urlcredential.html"><code><span>URLCredential</span></code></a> instance from user-interface fields, if they are filled in.</span><!--end_enstr-->
<span class="jpstr">
成功裏にチャレンジに応えるには、あなたは、あなたが受け取ったチャレンジの型に適切な資格情報を提出する必要があります。HTTP Basic と HTTP Digest チャレンジに対して、あなたはユーザ名とパスワードを提供します。<a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2942074">コード出力 2</a> は、あるヘルパーメソッドです、それは<a class="symbol-name" href="../../../documentation/foundation/urlcredential.html"><code><span>URLCredential</span></code></a>インスタンスをユーザインターフェイスの各欄から作成します、もしそれらが記入されるならば。
</span><!--end_jpstr-->
</p><figure id="2942074"><figcaption><strong class="caption-title"><span class="enstr">Listing 2</span><!--end_enstr-->
<span class="jpstr">
コード出力 2 
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Creating a URLCredential from user interface values</span><!--end_enstr-->
<span class="jpstr">
URLCredential をユーザインターフェイス値から作成する
</span><!--end_jpstr-->
</p></div></div></figcaption><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>func credentialsFromUI() -&gt; URLCredential? {
    guard let username = usernameField.text, !username.isEmpty,
        let password = passwordField.text, !password.isEmpty else {
            return nil
    }
    return URLCredential(user: username, password: password,
                         persistence: .forSession)
}
</code></pre></div></div></figure><p><span class="enstr">In this example, the returned <code class="code-voice"><span>URLCredential</span></code> has <a class="symbol-name" href="../../../documentation/foundation/urlcredential/persistence/forsession.html"><code><span>URLCredential<wbr/>.Persistence<wbr/>.for<wbr/>Session</span></code></a> persistence, so it’s only stored by the <code class="code-voice"><span>URLSession</span></code> instance that created the task. You would need to supply new <code class="code-voice"><span>URLCredential</span></code> instances for tasks created by other session instances, and on future runs of the app.</span><!--end_enstr-->
<span class="jpstr">
この例では、返される<code class="code-voice"><span>URLCredential</span></code>は、<a class="symbol-name" href="../../../documentation/foundation/urlcredential/persistence/forsession.html"><code><span>URLCredential<wbr/>.Persistence<wbr/>.for<wbr/>Session</span></code></a>永続性を持ちます、なのでそれはそのタスクによって作成された<code class="code-voice"><span>URLSession</span></code>インスタンスによって格納されるだけです。あなたは、新しい<code class="code-voice"><span>URLCredential</span></code>インスタンスを他のセッションインスタンスによって作成されたタスクに対して、そしてそのアプリの将来の実行に関して、供給する必要があるでしょう
</span><!--end_jpstr-->
</p><p></p></div><h3 id="2942077"><span class="enstr">Call the Completion Handler</span><!--end_enstr-->
<span class="jpstr">
完了ハンドラを呼び出す
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">Once you’ve tried to create a credential instance, you must call the completion handler to answer the challenge.</span><!--end_enstr-->
<span class="jpstr">
一旦あなたが資格情報インスタンスを作成する試みをしたならば、あなたは完了ハンドラを呼び出してチャレンジに答えなければなりません。
</span><!--end_jpstr-->
</p><ul><li><p><span class="enstr">If you can’t create a credential, or if the user explicitly canceled, call the completion handler and pass the <a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition/cancelauthenticationchallenge.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition<wbr/>.cancel<wbr/>Authentication<wbr/>Challenge</span></code></a> disposition.</span><!--end_enstr-->
<span class="jpstr">
あなたがある資格情報を作成できないならば、またはユーザが明示的に取り消したならば、完了ハンドラを呼び出して<a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition/cancelauthenticationchallenge.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition<wbr/>.cancel<wbr/>Authentication<wbr/>Challenge</span></code></a>の意向を渡してください。
</span><!--end_jpstr-->
</p></li><li><p><span class="enstr">If you can create a credential instance, use the <a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition/usecredential.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition<wbr/>.use<wbr/>Credential</span></code></a> disposition to pass it to the completion handler.</span><!--end_enstr-->
<span class="jpstr">
あなたが資格情報インスタンスを作成できるならば、<a class="symbol-name" href="../../../documentation/foundation/urlsession/authchallengedisposition/usecredential.html"><code><span>URLSession<wbr/>.Auth<wbr/>Challenge<wbr/>Disposition<wbr/>.use<wbr/>Credential</span></code></a>の意向を使ってそれを完了ハンドラに渡してください。
</span><!--end_jpstr-->
</p></li></ul><p> <span class="enstr"><a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2942076">Listing 3</a> shows both these options.</span><!--end_enstr-->
<span class="jpstr">
<a href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge.html#2942076">コード出力 3</a> は、それらオプションの両方を示します。
</span><!--end_jpstr-->
</p><figure id="2942076"><figcaption><strong class="caption-title"><span class="enstr">Listing 3</span><!--end_enstr-->
<span class="jpstr">
コード出力 3 
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Invoking the authentication challenge completion Handler</span><!--end_enstr-->
<span class="jpstr">
認証チャレンジ完了ハンドラを発動する
</span><!--end_jpstr-->
</p></div></div></figcaption><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>guard let credential = credentialOrNil else {
    completionHandler(.cancelAuthenticationChallenge, nil)
    return
}
completionHandler(.useCredential, credential)
</code></pre></div></div></figure><p><span class="enstr">If you supply a credential that is accepted by the server, the task begins uploading or downloading data.</span><!--end_enstr-->
<span class="jpstr">
あなたがサーバによって受け入れられる資格情報を供給するならば、タスクはデータのアップロードまたはダウンロードを開始します。
</span><!--end_jpstr-->
</p><aside class="aside aside-important" aria-label="important"><p class="aside-name"><span class="enstr">Important</span><!--end_enstr-->
<span class="jpstr">
重要
</span><!--end_jpstr-->
</p><p><span class="enstr">You can pass the completion handler to other methods or temporarily store it in a property, for situations like waiting for the user to complete a username/password dialog. But eventually you must call the completion handler to complete the challenge and allow the task to proceed, even if you’re choosing to cancel, as seen in the failure case of <span class="reference">Listing 3</span>.</span><!--end_enstr-->
<span class="jpstr">
あなたは、完了ハンドラを他のメソッドに渡すことまたは一時的にそれをあるプロパティの中に格納することができます、ユーザがユーザ名／パスワードのダイアログを完成させるのを待っているような状況に対しては。しかし最後にはあなたは完了ハンドラを呼び出してチャレンジを完了してそしてタスクが続行できるようにしなければなりません、たとえあなたがキャンセルを選んでいるとしてもです、<span class="reference">コード出力 3</span> の失敗の場合において見られるように。
</span><!--end_jpstr-->
</p></aside><p></p><p></p></div><h3 id="2938912"><span class="enstr">Handle Failures Gracefully</span><!--end_enstr-->
<span class="jpstr">
失敗を優雅に取り扱う
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">If the credential is refused, the system calls your delegate method again. When this happens, the callback provides your rejected credential as the <a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge/1417749-proposedcredential.html"><code><span>proposed<wbr/>Credential</span></code></a> property of the <code class="code-voice"><span>URLAuthentication<wbr/>Challenge</span></code> parameter. The challenge instance also includes a <a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge/1416522-previousfailurecount.html"><code><span>previous<wbr/>Failure<wbr/>Count</span></code></a> property, which indicates how many times the credential has been rejected. You can use these properties to determine what to do next. For example, if the <code class="code-voice"><span>previous<wbr/>Failure<wbr/>Count</span></code> is greater than zero, you could use the user string of the <code class="code-voice"><span>proposed<wbr/>Credential</span></code> to populate a user/password reentry UI.</span><!--end_enstr-->
<span class="jpstr">
資格情報が拒絶されるならば、システムはあなたの委任先メソッドを再び呼び出します。これが起こる場合、コールバックはあなたの拒絶された資格情報を<code class="code-voice"><span>URLAuthentication<wbr/>Challenge</span></code>パラメータの<a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge/1417749-proposedcredential.html"><code><span>proposed<wbr/>Credential</span></code></a>プロパティとして提供します。チャレンジインスタンスはまた、<a class="symbol-name" href="../../../documentation/foundation/urlauthenticationchallenge/1416522-previousfailurecount.html"><code><span>previous<wbr/>Failure<wbr/>Count</span></code></a>プロパティを含みます、それはどれくらい多くの回数その資格情報が拒絶されたかを指し示します。あなたは、それらプロパティを使って次に何をするか決定します。例えば、<code class="code-voice"><span>previous<wbr/>Failure<wbr/>Count</span></code>がゼロより大きいならば、あなたは<code class="code-voice"><span>proposed<wbr/>Credential</span></code>のユーザ文字列を使って、ユーザ／パスワード再記入UIを満たすことができます。
</span><!--end_jpstr-->
</p></div></div></section></div></div><section id="topics" class="contenttable section alt-light-container row"><div class="alt-light"><div class="section-content"><h2 class="contenttable-title"><span class="enstr">Topics</span><!--end_enstr-->
<span class="jpstr">
話題
</span><!--end_jpstr-->
</h2><section id="2938913" class="contenttable-section"><div class="contenttable-container row"><div class="contenttable-section-title-container column large-3 medium-3 small-12"><h3 class="contenttable-section-title"><span class="enstr">Creating URL Credentials</span><!--end_enstr-->
<span class="jpstr">
URL資格情報を作成する
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><div class="task-topics"><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name" href="../../../documentation/foundation/url_loading_system/handling_an_authentication_challenge/performing_manual_server_trust_authentication.html"><svg xmlns="http://www.w3.org/2000/svg" height="15" viewBox="0 0 22 30" class="svg-icon symbol-name-icon" aria-hidden="true"><title>Article</title><g id="Article" class="svg-icon-small"><path d="M12.87,0H0V2H0V28H0v2H22V9.13ZM20,28H2V2h9V12h9Zm0-18H13V3l7,7Z"></path></g></svg><span><span class="enstr">Performing Manual Server Trust Authentication</span><!--end_enstr-->
<span class="jpstr">
手動でサーバー信用認証を実行する
</span><!--end_jpstr-->
</span></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr">Evaluate the server’s security credentials in your app.</span><!--end_enstr-->
<span class="jpstr">
サーバーのもつ保安資格情報をあなたのアプリにおいて評価します。
</span><!--end_jpstr-->
</p></div></div></div></div></div></div></div></section></div></div></section><section id="see-also" class="contenttable section alt-light-container row"><div class="alt-light"><div class="section-content"><h2 class="contenttable-title"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</h2><section id="2878020" class="contenttable-section"><div class="contenttable-container row"><div class="contenttable-section-title-container column large-3 medium-3 small-12"><h3 class="contenttable-section-title"><span class="enstr">Authentication and Credentials</span><!--end_enstr-->
<span class="jpstr">
認証と資格情報
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><div class="task-topics"><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name symbol-name-decorated" href="../../../documentation/foundation/urlauthenticationchallenge.html"><code class="display-name"><span class="decorator">class </span><span class="identifier">URLAuthentication<wbr/>Challenge</span></code></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr">A challenge from a server requiring authentication from the client.</span><!--end_enstr-->
<span class="jpstr">
クライアントからの認証を必要としているサーバーからのチャレンジ。
</span><!--end_jpstr-->
</p></div></div></div></div><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name symbol-name-decorated" href="../../../documentation/foundation/urlcredential.html"><code class="display-name"><span class="decorator">class </span><span class="identifier">URLCredential</span></code></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr"><code class="code-voice"><span>A</span></code>n authentication credential consisting of information specific to the type of credential and the type of persistent storage to use, if any.</span><!--end_enstr-->
<span class="jpstr">
資格情報の型と、もしあれば、使用する永続ストレージの型に特有の情報から成る、ある認証（オーセンティケーション）資格情報。
</span><!--end_jpstr-->
</p></div></div></div></div><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name symbol-name-decorated" href="../../../documentation/foundation/urlcredentialstorage.html"><code class="display-name"><span class="decorator">class </span><span class="identifier">URLCredential<wbr/>Storage</span></code></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr">The manager of a shared credentials cache.</span><!--end_enstr-->
<span class="jpstr">
共有資格情報キャッシュの管理者。
</span><!--end_jpstr-->
</p></div></div></div></div><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name symbol-name-decorated" href="../../../documentation/foundation/urlprotectionspace.html"><code class="display-name"><span class="decorator">class </span><span class="identifier">URLProtection<wbr/>Space</span></code></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr">A server or an area on a server, commonly referred to as a realm, that requires authentication.</span><!--end_enstr-->
<span class="jpstr">
あるサーバーまたはサーバー上のある場所、一般にレルムと呼ばれます、それは認証を必要とします。
</span><!--end_jpstr-->
 </p></div></div></div></div></div></div></div></section></div></div></section></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/business/">Business</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><span class="enstr">Resources</span><!--end_enstr-->
<span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><span class="enstr">Internationalization</span><!--end_enstr-->
<span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/business/distribute/">Apps for Business</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
              </ul>
              <h3><a href="/account/">Account</a></h3>
              <ul>
                <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2019 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":2938910,"abstract":"<div><p>Respond appropriately when a server demands authentication for a URL request.<\/p><\/div>","title":{"content":"Handling an Authentication Challenge"},"discussion":"<div><p>When your app makes a request with a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiontask\"><code><span>URLSession<wbr\/>Task<\/span><\/code><\/a>, the server may respond with one or more demands for credentials before continuing. The session task attempts to handle this for you. If it can’t, it calls your session’s <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/1411530-delegate\"><code><span>delegate<\/span><\/code><\/a> to handle the challenges.<\/p><p>Implement the delegate methods described in this article to answer challenges issued by a server that your app connects to. If you don’t implement a delegate, your request may be denied by the server, and you receive a response with HTTP status code <code class=\"code-voice\"><span>401<\/span><\/code> (Forbidden) instead of the data you expect.<\/p><p><\/p><\/div><h3 id=\"2942075\">Determine the Appropriate Delegate Method<\/h3><div><p>Implement one or both delegate authentication methods, depending on the nature of the challenge(s) you receive.<\/p><ul><li><p>Implement the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiondelegate\/1409308-urlsession\"><code><span>url<wbr\/>Session(_:<wbr\/>did<wbr\/>Receive:<wbr\/>completion<wbr\/>Handler:)<\/span><\/code><\/a> method of <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiondelegate\"><code><span>URLSession<wbr\/>Delegate<\/span><\/code><\/a> to handle session-wide challenges. These are challenges like Transport Layer Security (TLS) validation. Once you’ve successfully handled this kind of challenge, your action remains in effect for all tasks created from that <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\"><code><span>URLSession<\/span><\/code><\/a>.<\/p><\/li><li><p>Implement the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiontaskdelegate\/1411595-urlsession\"><code><span>url<wbr\/>Session(_:<wbr\/>task:<wbr\/>did<wbr\/>Receive:<wbr\/>completion<wbr\/>Handler:)<\/span><\/code><\/a> method of <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiontaskdelegate\"><code><span>URLSession<wbr\/>Task<wbr\/>Delegate<\/span><\/code><\/a> to handle task-specific challenges. These are challenges like demands for username\/password authentication. Each task created from a given session may issue its own challenges.<\/p><\/li><\/ul><aside class=\"aside aside-note\" role=\"note\"><p class=\"aside-name\">Note<\/p><p>See <a href=\"\/documentation\/foundation\/urlprotectionspace\/nsurlprotectionspace_authentication_method_constants\">NSURLProtectionSpace Authentication Method Constants<\/a> for a guide to which authentication methods are session-wide or task-specific.<\/p><\/aside><p>As a simple example, consider what happens when you request an <code class=\"code-voice\"><span>http<\/span><\/code> URL protected by HTTP Basic authentication, as defined in <a href=\"https:\/\/tools.ietf.org\/html\/rfc7617\">RFC 7617<\/a>. Because this is a task-specific challenge, you handle this by implementing <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsessiontaskdelegate\/1411595-urlsession\"><code><span>url<wbr\/>Session(_:<wbr\/>task:<wbr\/>did<wbr\/>Receive:<wbr\/>completion<wbr\/>Handler:)<\/span><\/code><\/a>.<\/p><aside class=\"aside aside-note\" role=\"note\"><p class=\"aside-name\">Note<\/p><p>If you connect via <code class=\"code-voice\"><span>https<\/span><\/code>, you also receive a server trust challenge. See <a href=\"\/documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge\/performing_manual_server_trust_authentication\">Performing Manual Server Trust Authentication<\/a> for information on handling this type of session-wide challenge.<\/p><\/aside><p><a href=\"\/documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge#2948287\">Figure 1<\/a> outlines a strategy for responding to the HTTP Basic challenge.<\/p><figure id=\"2948287\"><img class=\"centered-block\" src=\"https:\/\/docs-assets.developer.apple.com\/published\/0538c8630f\/df4288af-90f3-4504-b657-a5ae9b3e994b.png\" srcSet=\"https:\/\/docs-assets.developer.apple.com\/published\/0538c8630f\/df4288af-90f3-4504-b657-a5ae9b3e994b.png 1x, https:\/\/docs-assets.developer.apple.com\/published\/00ef01d197\/759d2099-d938-415f-ac8a-1a0cac9dea4b.png 2x\" alt=\"Decision tree showing states and choices for handling an authentication challenge. The first decision point is whether the received challenge&#x27;s authentication method is HTTP Basic; if not, use system default handling. If so, the user is challenged for username and password. The second decision point asks if the user did provide a username and password. If yes, create and use credential; if not, cancel the challenge.\" width=\"882\" height=\"auto\"\/><\/figure><p>The following sections implement this strategy.<\/p><\/div><h3 id=\"2942073\">Determine the Type of Authentication Challenge<\/h3><div><p>When you receive an authentication challenge, use your delegate method to determine the type of challenge. The delegate method receives a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlauthenticationchallenge\"><code><span>URLAuthentication<wbr\/>Challenge<\/span><\/code><\/a> instance that describes the challenge being issued. This instance contains a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlauthenticationchallenge\/1410012-protectionspace\"><code><span>protection<wbr\/>Space<\/span><\/code><\/a> property whose <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlprotectionspace\/1415028-authenticationmethod\"><code><span>authentication<wbr\/>Method<\/span><\/code><\/a> property indicates the kind of challenge being issued (such as a request for a username and password, or a client certificate). You use this value to determine whether you can handle the challenge.<\/p><p>You respond to the challenge by directly invoking the completion handler passed in to the challenge, passing an <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/authchallengedisposition\"><code><span>URLSession<wbr\/>.Auth<wbr\/>Challenge<wbr\/>Disposition<\/span><\/code><\/a> indicating your response to the challenge. You use the disposition argument to provide a credential, cancel the request, or allow the default handling to proceed, whichever is appropriate.<\/p><p><a href=\"\/documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge#2942079\">Listing 1<\/a> tests the authentication method to see if it is the expected type, HTTP Basic. If the <code class=\"code-voice\"><span>authentication<wbr\/>Method<\/span><\/code> property indicates some other kind of challenge, it calls the completion handler with the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/authchallengedisposition\/performdefaulthandling\"><code><span>URLSession<wbr\/>.Auth<wbr\/>Challenge<wbr\/>Disposition<wbr\/>.perform<wbr\/>Default<wbr\/>Handling<\/span><\/code><\/a> disposition. Telling the task to use its default handling may satisfy the challenge; otherwise, the task will move on to the next challenge in the response and call this delegate again. This process continues until the task reaches the HTTP Basic challenge that you expect to handle.<\/p><figure id=\"2942079\"><figcaption><strong class=\"caption-title\">Listing 1<\/strong> <div class=\"caption-content formatted-content\"><div><p>Checking the authentication method of an authentication challenge<\/p><\/div><\/div><\/figcaption><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let authMethod = challenge.protectionSpace.authenticationMethod\nguard authMethod == NSURLAuthenticationMethodHTTPBasic else {\n    completionHandler(.performDefaultHandling, nil)\n    return\n}\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div><h3 id=\"2942078\">Create a Credential Instance<\/h3><div><p>To successfully answer the challenge, you need to submit a credential appropriate to type of challenge you have received. For HTTP Basic and HTTP Digest challenges, you provide a username and password. <a href=\"\/documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge#2942074\">Listing 2<\/a> shows a helper method that attempts to create a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlcredential\"><code><span>URLCredential<\/span><\/code><\/a> instance from user-interface fields, if they are filled in.<\/p><figure id=\"2942074\"><figcaption><strong class=\"caption-title\">Listing 2<\/strong> <div class=\"caption-content formatted-content\"><div><p>Creating a URLCredential from user interface values<\/p><\/div><\/div><\/figcaption><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>func credentialsFromUI() -&gt; URLCredential? {\n    guard let username = usernameField.text, !username.isEmpty,\n        let password = passwordField.text, !password.isEmpty else {\n            return nil\n    }\n    return URLCredential(user: username, password: password,\n                         persistence: .forSession)\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>In this example, the returned <code class=\"code-voice\"><span>URLCredential<\/span><\/code> has <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlcredential\/persistence\/forsession\"><code><span>URLCredential<wbr\/>.Persistence<wbr\/>.for<wbr\/>Session<\/span><\/code><\/a> persistence, so it’s only stored by the <code class=\"code-voice\"><span>URLSession<\/span><\/code> instance that created the task. You would need to supply new <code class=\"code-voice\"><span>URLCredential<\/span><\/code> instances for tasks created by other session instances, and on future runs of the app.<\/p><p><\/p><\/div><h3 id=\"2942077\">Call the Completion Handler<\/h3><div><p>Once you’ve tried to create a credential instance, you must call the completion handler to answer the challenge.<\/p><ul><li><p>If you can’t create a credential, or if the user explicitly canceled, call the completion handler and pass the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/authchallengedisposition\/cancelauthenticationchallenge\"><code><span>URLSession<wbr\/>.Auth<wbr\/>Challenge<wbr\/>Disposition<wbr\/>.cancel<wbr\/>Authentication<wbr\/>Challenge<\/span><\/code><\/a> disposition.<\/p><\/li><li><p>If you can create a credential instance, use the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/authchallengedisposition\/usecredential\"><code><span>URLSession<wbr\/>.Auth<wbr\/>Challenge<wbr\/>Disposition<wbr\/>.use<wbr\/>Credential<\/span><\/code><\/a> disposition to pass it to the completion handler.<\/p><\/li><\/ul><p> <a href=\"\/documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge#2942076\">Listing 3<\/a> shows both these options.<\/p><figure id=\"2942076\"><figcaption><strong class=\"caption-title\">Listing 3<\/strong> <div class=\"caption-content formatted-content\"><div><p>Invoking the authentication challenge completion Handler<\/p><\/div><\/div><\/figcaption><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>guard let credential = credentialOrNil else {\n    completionHandler(.cancelAuthenticationChallenge, nil)\n    return\n}\ncompletionHandler(.useCredential, credential)\n<\/code><\/pre><\/div><\/div><\/figure><p>If you supply a credential that is accepted by the server, the task begins uploading or downloading data.<\/p><aside class=\"aside aside-important\" aria-label=\"important\"><p class=\"aside-name\">Important<\/p><p>You can pass the completion handler to other methods or temporarily store it in a property, for situations like waiting for the user to complete a username\/password dialog. But eventually you must call the completion handler to complete the challenge and allow the task to proceed, even if you’re choosing to cancel, as seen in the failure case of <span class=\"reference\">Listing 3<\/span>.<\/p><\/aside><p><\/p><p><\/p><\/div><h3 id=\"2938912\">Handle Failures Gracefully<\/h3><div><p>If the credential is refused, the system calls your delegate method again. When this happens, the callback provides your rejected credential as the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlauthenticationchallenge\/1417749-proposedcredential\"><code><span>proposed<wbr\/>Credential<\/span><\/code><\/a> property of the <code class=\"code-voice\"><span>URLAuthentication<wbr\/>Challenge<\/span><\/code> parameter. The challenge instance also includes a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlauthenticationchallenge\/1416522-previousfailurecount\"><code><span>previous<wbr\/>Failure<wbr\/>Count<\/span><\/code><\/a> property, which indicates how many times the credential has been rejected. You can use these properties to determine what to do next. For example, if the <code class=\"code-voice\"><span>previous<wbr\/>Failure<wbr\/>Count<\/span><\/code> is greater than zero, you could use the user string of the <code class=\"code-voice\"><span>proposed<wbr\/>Credential<\/span><\/code> to populate a user\/password reentry UI.<\/p><\/div>","containingGroup":[{"id":2878020,"role":"task","paths":[],"symbols":[{"id":2938910,"role":"article","paths":["documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge"],"hasChildren":true,"abstract":"<div><p>Respond appropriately when a server demands authentication for a URL request.<\/p><\/div>","title":{"content":"Handling an Authentication Challenge"}},{"id":1413790,"role":"symbol","usr":"c:objc(cs)NSURLAuthenticationChallenge","name":"NSURLAuthenticationChallenge","domain":"swift","kind":"cl","availability":[{"platform":"iOS","introduced":"2.0"},{"platform":"macOS","introduced":"10.2"},{"platform":"Mac Catalyst","introduced":"13.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"watchOS","introduced":"2.0"}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">class <\/span><span class=\"identifier\">URLAuthentication<wbr\/>Challenge<\/span><\/code>","paths":["documentation\/foundation\/urlauthenticationchallenge"],"title":{"content":"URLAuthenticationChallenge"},"abstract":"<div><p>A challenge from a server requiring authentication from the client.<\/p><\/div>","hasChildren":true},{"id":1415188,"role":"symbol","usr":"c:objc(cs)NSURLCredential","name":"NSURLCredential","domain":"swift","kind":"cl","availability":[{"platform":"iOS","introduced":"2.0"},{"platform":"macOS","introduced":"10.2"},{"platform":"Mac Catalyst","introduced":"13.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"watchOS","introduced":"2.0"}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">class <\/span><span class=\"identifier\">URLCredential<\/span><\/code>","paths":["documentation\/foundation\/urlcredential"],"title":{"content":"URLCredential"},"abstract":"<div><p><code class=\"code-voice\"><span>A<\/span><\/code>n authentication credential consisting of information specific to the type of credential and the type of persistent storage to use, if any.<\/p><\/div>","hasChildren":true},{"id":1407689,"role":"symbol","usr":"c:objc(cs)NSURLCredentialStorage","name":"NSURLCredentialStorage","domain":"swift","kind":"cl","availability":[{"platform":"iOS","introduced":"2.0"},{"platform":"macOS","introduced":"10.2"},{"platform":"Mac Catalyst","introduced":"13.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"watchOS","introduced":"2.0"}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">class <\/span><span class=\"identifier\">URLCredential<wbr\/>Storage<\/span><\/code>","paths":["documentation\/foundation\/urlcredentialstorage"],"title":{"content":"URLCredentialStorage"},"abstract":"<div><p>The manager of a shared credentials cache.<\/p><\/div>","hasChildren":true},{"id":1412850,"role":"symbol","usr":"c:objc(cs)NSURLProtectionSpace","name":"NSURLProtectionSpace","domain":"swift","kind":"cl","availability":[{"platform":"iOS","introduced":"2.0"},{"platform":"macOS","introduced":"10.2"},{"platform":"Mac Catalyst","introduced":"13.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"watchOS","introduced":"2.0"}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">class <\/span><span class=\"identifier\">URLProtection<wbr\/>Space<\/span><\/code>","paths":["documentation\/foundation\/urlprotectionspace"],"title":{"content":"URLProtectionSpace"},"abstract":"<div><p>A server or an area on a server, commonly referred to as a realm, that requires authentication. <\/p><\/div>","hasChildren":true}],"title":{"content":"Authentication and Credentials"}}],"modules":[{"title":{"content":"Foundation"},"paths":["documentation\/foundation"],"importStatement":"<import xml:space=\"preserve\"><keyWord>import<\/keyWord> Foundation<\/import>","availability":[{"platform":"watchOS","introduced":"2.0"},{"platform":"Mac Catalyst","introduced":"13.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"iOS","introduced":"2.0"},{"platform":"macOS","introduced":"10.0"}]}],"role":"article","language":"swift","roleHeading":"Article","languages":["occ","swift"],"variants":{"occ":{"paths":["documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge"]},"swift":{"paths":["documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge"]}},"pid":424974,"paths":["documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge"],"hierarchy":[[{"id":1613013,"role":"collection","title":{"content":"Foundation"},"paths":["documentation\/foundation"]},{"id":2877756,"role":"collectionGroup","title":{"content":"URL Loading System"},"paths":["documentation\/foundation\/url_loading_system"]}]],"legalNotices":{"copyright":"Copyright &copy; 2019 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"},"tasks":[{"id":2938913,"role":"task","symbols":[{"id":2938915,"role":"article","paths":["documentation\/foundation\/url_loading_system\/handling_an_authentication_challenge\/performing_manual_server_trust_authentication"],"abstract":"<div><p>Evaluate the server’s security credentials in your app.<\/p><\/div>","title":{"content":"Performing Manual Server Trust Authentication"}}],"title":{"content":"Creating URL Credentials"}}]}</script></body></html>