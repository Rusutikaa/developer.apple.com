<!DOCTYPE html><html lang="en"><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Working with Core Foundation Types | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="219449"/><link href="../../../documentation/assets/application-ddf2ac84.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="../../../documentation/assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="../../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../documentation/assets/favicon.ico"/><script src="../../../documentation/assets/shared-8d50366b.js"></script></head><body><div id="_omniture_top">
      <script>
        var s_account="appleglobal, awdappledeveloper"
      </script><!-- script src="https://developer.apple.com/assets/metrics/scripts/analytics.js" -->
      </script>
      <script>
        s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
        s.channel="www.documentation.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US"><div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open"> <span class="ac-gn-menuanchor-label">Open Menu</span> </a>
            <a href="#" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close"> <span class="ac-gn-menuanchor-label">Close Menu</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple" href="/" id="ac-gn-firstfocus-small"> <span class="ac-gn-link-text">Apple Developer</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-bag ac-gn-bag-small" id="ac-gn-bag-small">
            <a class="ac-gn-link ac-gn-link-bag" href="/account/"> <span class="ac-gn-link-text">Account</span> <span class="ac-gn-bag-badge"></span> </a> <span class="ac-gn-bagview-caret ac-gn-bagview-caret-large"></span> </li>
        </ul>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple" href="/" id="ac-gn-firstfocus"> <span class="ac-gn-link-text">Apple Developer</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link" href="/discover/"> <span>Discover</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link" href="/design/"> <span>Design</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link" href="/develop/"> <span>Develop</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link" href="/distribute/"> <span>Distribute</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-support">
            <a class="ac-gn-link" href="/support/"> <span>Support</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link" href="/account/"> <span>Account</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-search-button" class="ac-gn-link ac-gn-link-search" href="/search/" aria-label="Search developer.apple.com"> <span class="ac-gn-search-placeholder" aria-hidden="true">Search</span> </a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
              <div class="ac-gn-searchform-wrapper">
                <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" placeholder="Search" data-placeholder-long="Search for documentation, videos, and more" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" />
                <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit"></button>
                <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search"></button>
              </div>
            </form>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults="Hit enter to search.">
            </aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Close Search">
            <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
            <span class="ac-gn-searchview-close-right"></span>
            </span>
          </button>
        </aside>
      </div></nav><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/swift.html">Swift</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/swift/imported_c_and_objective-c_apis.html"><span class="enstr">Imported C and Objective-C APIs</span><!--end_enstr-->
<span class="jpstr">
インポートされたCおよびObjective-C API
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current"><span class="enstr">Working with Core Foundation Types</span><!--end_enstr-->
<span class="jpstr">
Core Foundation型を扱う
</span><!--end_jpstr-->
</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="3"><li class="localnav-menu-setting language-container"><span class="localnav-menu-setting-label">Language:</span><span class="localnav-menu-toggle-none current-language" aria-current="page">Swift</span></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Article</span><h1 class="topic-heading"><span><span class="enstr">Working with Core Foundation Types</span><!--end_enstr-->
<span class="jpstr">
Core Foundation型を扱う
</span><!--end_jpstr-->
</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><span class="enstr">Work directly with memory-managed Core Foundation types in your Swift code, and manually handle retains as needed.</span><!--end_enstr-->
<span class="jpstr">
メモリ管理されたCore Foundation型をあなたのSwiftコードにおいて直接に扱い、そして必要に応じて手動でリテインを処理します。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section frameworks" role="complementary" aria-label="Framework"><p class="topic-summary-section-label subsection-label"><span class="enstr">Framework</span><!--end_enstr-->
<span class="jpstr">
フレームワーク
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><span><span class="enstr">Swift Standard Library</span><!--end_enstr-->
<span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</span></li></ul></div><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label"><span class="enstr">On This Page</span><!--end_enstr-->
<span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#overview" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#see-also" class="icon icon-after icon-chevrondowncircle"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="overview" class="section"><h2><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">When you import the Core Foundation framework, its types are imported as Swift classes.Wherever memory management annotations are provided, Swift automatically manages the memory of Core Foundation objects, including Core Foundation objects that you instantiate yourself.In Swift, you can use each pair of toll-free bridged Foundation and Core Foundation types interchangeably.You can also bridge some toll-free bridged Core Foundation types to Swift standard library types if you cast to a bridging Foundation type first.See <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html#//apple_ref/doc/uid/TP40010810-CH2">Toll-Free Bridging</a> for more information.</span><!--end_enstr-->
<span class="jpstr">
あなたがCore Foundationフレームワークをインポートする場合、それの型は、Swiftクラスとしてインポートされます。メモリ管理注釈が提供されるどこででも、あなた自身でインスタンス化するCore Foundationオブジェクトを含めて、スウィフトは自動的にCore Foundationオブジェクトのメモリを管理します。スウィフトにおいて、あなたは、トールフリーブリッジ（無料の橋渡し）されたFoundationとCore Foundation型の各対を入れ替えて使うことができます。あなたはまた、いくつかのトールフリーブリッジされたCore Foundation型をSwift標準ライブラリ型にブリッジすることが、ブリッジしているFoundation型にあなたが最初にキャストするならば、可能です。さらなる情報のために<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html#//apple_ref/doc/uid/TP40010810-CH2">Toll-Free Bridging</a>を見てください。
</span><!--end_jpstr-->
</p></div><h3 id="2994152"><span class="enstr">Use Memory Managed Objects</span><!--end_enstr-->
<span class="jpstr">
メモリ管理オブジェクトを使う
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">When Swift imports Core Foundation types, the compiler remaps the names of these types.The compiler removes <code class="code-voice"><span>Ref</span></code> from the end of each type name because all Swift classes are reference types; therefore, the suffix is redundant.The <code class="code-voice"><span>CFType<wbr/>Ref</span></code> type completely remaps to the <code class="code-voice"><span>Any<wbr/>Object</span></code> type.</span><!--end_enstr-->
<span class="jpstr">
スウィフトがCore Foundation型をインポートするとき、コンパイラはこれらの型の名前をリマップします。コンパイラは各型名の終わりから<code class="code-voice"><span>Ref</span></code>を削除します、なぜなら全てのスウィフトクラスが参照型であるからです；したがって、この接尾辞は冗長です。<code class="code-voice"><span>CFType<wbr/>Ref</span></code>型は、<code class="code-voice"><span>Any<wbr/>Object</span></code>型に完全にリマップされます。
</span><!--end_jpstr-->
</p><p><span class="enstr">Core Foundation objects returned from annotated APIs are automatically memory-managed in Swift—you don't need to invoke the <code class="code-voice"><span>CFRetain</span></code>, <code class="code-voice"><span>CFRelease</span></code>, or <code class="code-voice"><span>CFAutorelease</span></code> functions yourself.</span><!--end_enstr-->
<span class="jpstr">
注釈をつけられたAPIから返されるCore Foundationオブジェクトは、自動的にSwiftにおいてメモリ管理されます ― あなたは、<code class="code-voice"><span>CFRetain</span></code>、<code class="code-voice"><span>CFRelease</span></code>、または<code class="code-voice"><span>CFAutorelease</span></code>関数をあなた自身で呼び出す必要はありません。
</span><!--end_jpstr-->
</p><p><span class="enstr">If you return Core Foundation objects from your own C functions and Objective-C methods, you can annotate them with either the <code class="code-voice"><span>CF<wbr/>_RETURNS<wbr/>_RETAINED</span></code> or <code class="code-voice"><span>CF<wbr/>_RETURNS<wbr/>_NOT<wbr/>_RETAINED</span></code> macro to automatically insert memory management calls.You can also use the <code class="code-voice"><span>CF<wbr/>_IMPLICIT<wbr/>_BRIDGING<wbr/>_ENABLED</span></code> and <code class="code-voice"><span>CF<wbr/>_IMPLICIT<wbr/>_BRIDGING<wbr/>_DISABLED</span></code> macros to enclose C function declarations that follow the policy for Core Foundation ownership naming, in order to infer memory management.</span><!--end_enstr-->
<span class="jpstr">
あなたがCore Foundationオブジェクトをあなた独自のC関数およびObjective-Cメソッドから返すならば、あなたはそれらに<code class="code-voice"><span>CF<wbr/>_RETURNS<wbr/>_RETAINED</span></code>または<code class="code-voice"><span>CF<wbr/>_RETURNS<wbr/>_NOT<wbr/>_RETAINED</span></code>マクロのどちらかで注釈をつけて、自動的にメモリ管理呼び出しを差し込むことができます。あなたはまた、メモリ管理を推論する目的で、<code class="code-voice"><span>CF<wbr/>_IMPLICIT<wbr/>_BRIDGING<wbr/>_ENABLED</span></code>および<code class="code-voice"><span>CF<wbr/>_IMPLICIT<wbr/>_BRIDGING<wbr/>_DISABLED</span></code>マクロを使って、Core Foundation所有者命名の方針に従うC関数宣言を囲むことができます。
</span><!--end_jpstr-->
</p></div><h3 id="2994151"><span class="enstr">Convert Unmanaged Objects to Memory-Managed Objects</span><!--end_enstr-->
<span class="jpstr">
管理されないオブジェクトをメモリ管理オブジェクトに変換する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">When Swift imports APIs that have not been annotated, the compiler cannot automatically memory-manage the returned Core Foundation objects.Swift wraps these returned Core Foundation objects in an <a class="symbol-name" href="../../../documentation/swift/unmanaged.html"><code><span>Unmanaged</span></code></a><code class="code-voice"><span>&lt;Instance&gt;</span></code> structure.All indirectly returned Core Foundation objects are unmanaged as well.For example, here’s an unannotated C function:</span><!--end_enstr-->
<span class="jpstr">
注釈をつけられなかったAPIをSwiftがインポートする場合、コンパイラは返されたCore Foundationオブジェクトを自動的にメモリ管理できません。Swiftは、これらの返されたCore Foundationオブジェクトを<a class="symbol-name" href="../../../documentation/swift/unmanaged.html"><code><span>Unmanaged</span></code></a><code class="code-voice"><span>&lt;Instance&gt;</span></code>構造体でラップします。全ての間接的に返されたコアファウンデーション・オブジェクトは、同様に管理されません。例えば、ここに注釈をつけられなかったC関数があります：
</span><!--end_jpstr-->
</p><figure id="2994148"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="occ"><code>CFStringRef StringByAddingTwoStrings(CFStringRef s1, CFStringRef s2)
</code></pre></div></div></figure><p><span class="enstr">And here’s how Swift imports it:</span><!--end_enstr-->
<span class="jpstr">
そしてここにスウィフトがそれをインポートする方法があります：
</span><!--end_jpstr-->
</p><figure id="2994149"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>func StringByAddingTwoStrings(_: CFString!, _: CFString!) -&gt; Unmanaged&lt;CFString&gt;!{
    // ...
}
</code></pre></div></div></figure><p><span class="enstr">When you receive an unmanaged object from an unannotated API, immediately convert it to a memory-managed object before you work with it.That way, Swift can handle memory management for you.</span><!--end_enstr-->
<span class="jpstr">
あなたが注釈をつけられないAPIから管理されないオブジェクトを受け取るとき、あなたがそれを扱う前に、直ちにそれをメモリ管理されたオブジェクトに変換してください。そのように、スウィフトはあなたの代わりにメモリ管理をうまく取り扱うことができます。
</span><!--end_jpstr-->
</p><p><span class="enstr">The <code class="code-voice"><span>Unmanaged&lt;Instance&gt;</span></code> structure provides two methods to convert an unmanaged object to a memory-managed object—<code class="code-voice"><span>take<wbr/>Unretained<wbr/>Value()</span></code> and <code class="code-voice"><span>take<wbr/>Retained<wbr/>Value()</span></code>.Both of these methods return the original, unwrapped type of the object.You choose which method to use based on whether the API you are invoking returns an unretained or a retained object.</span><!--end_enstr-->
<span class="jpstr">
<code class="code-voice"><span>Unmanaged&lt;Instance&gt;</span></code>構造体は、２つのメソッドを、管理されないオブジェクトをメモリ管理されたオブジェクトに変換するために提供します ― <code class="code-voice"><span>take<wbr/>Unretained<wbr/>Value()</span></code>と<code class="code-voice"><span>take<wbr/>Retained<wbr/>Value()</span></code>。これらのメソッドの両方とも、元の、オブジェクトのアンラップされた型を返します。あなたはどちらかのメソッドを、あなたが呼んでいるAPIが、リテイン（保有）されないまたはリテインされるオブジェクトを返すのかに基づき選択して使用します。
</span><!--end_jpstr-->
</p><p><span class="enstr">For example, suppose the C function above doesn't retain the <code class="code-voice"><span>CFString</span></code> object before returning it.To start using the object, you use the <code class="code-voice"><span>take<wbr/>Unretained<wbr/>Value()</span></code> function.</span><!--end_enstr-->
<span class="jpstr">
例えば、上のC関数が<code class="code-voice"><span>CFString</span></code>オブジェクトを、それを返す前にリテインしないと思ってください。そのオブジェクトの使用を開始するには、あなたは<code class="code-voice"><span>take<wbr/>Unretained<wbr/>Value()</span></code>関数を使用します。
</span><!--end_jpstr-->
</p><figure id="2994159"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let memoryManagedResult = StringByAddingTwoStrings(str1, str2).takeUnretainedValue()
// memoryManagedResult is a memory managed CFString
</code></pre></div></div></figure><p><span class="enstr">You can also invoke the <code class="code-voice"><span>retain()</span></code>, <code class="code-voice"><span>release()</span></code>, and <code class="code-voice"><span>autorelease()</span></code> methods on unmanaged objects, but this approach is not recommended.</span><!--end_enstr-->
<span class="jpstr">
あなたはまた、管理されないオブジェクト上で<code class="code-voice"><span>retain()</span></code>、<code class="code-voice"><span>release()</span></code>、そして<code class="code-voice"><span>autorelease()</span></code>メソッドを呼び出すことができます、しかしこの取り組みは勧められません。
</span><!--end_jpstr-->
</p><p><span class="enstr">For more information, see <a href="https://developer.apple.com/library/archive/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148">Ownership Policy</a> in <a href="https://developer.apple.com/library/archive/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html#//apple_ref/doc/uid/10000127i">Memory Management Programming Guide for Core Foundation</a>.</span><!--end_enstr-->
<span class="jpstr">
更なる情報のために、<a href="https://developer.apple.com/library/archive/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148">Ownership Policy</a>を<a href="https://developer.apple.com/library/archive/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html#//apple_ref/doc/uid/10000127i">Memory Management Programming Guide for Core Foundation</a>で見てください。
</span><!--end_jpstr-->
</p><p></p><p></p></div></div></section></div></div><section id="see-also" class="contenttable section alt-light-container row"><div class="alt-light"><div class="section-content"><h2 class="contenttable-title"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</h2><section id="2994158" class="contenttable-section"><div class="contenttable-container row"><div class="contenttable-section-title-container column large-3 medium-3 small-12"><h3 class="contenttable-section-title"><span class="enstr">Cocoa Frameworks</span><!--end_enstr-->
<span class="jpstr">
Cocoaフレームワーク
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><div class="task-topics"><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name" href="../../../documentation/swift/imported_c_and_objective-c_apis/working_with_foundation_types.html"><svg xmlns="http://www.w3.org/2000/svg" height="15" viewBox="0 0 22 30" class="svg-icon symbol-name-icon" aria-hidden="true"><title>Article</title><g id="Article" class="svg-icon-small"><path d="M12.87,0H0V2H0V28H0v2H22V9.13ZM20,28H2V2h9V12h9Zm0-18H13V3l7,7Z"></path></g></svg><span><span class="enstr">Working with Foundation Types</span><!--end_enstr-->
<span class="jpstr">
Foundation型を扱う
</span><!--end_jpstr-->
</span></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr">Use bridged Foundation types in your Swift codebase to work with dates, times, and other values.</span><!--end_enstr-->
<span class="jpstr">
ブリッジされたFoundation型をあなたのSwiftコード基盤において使って、日付、時刻、および他の値を扱います。
</span><!--end_jpstr-->
</p></div></div></div></div></div></div></div></section></div></div></section></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/enterprise/">Enterprise</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><span class="enstr">Resources</span><!--end_enstr-->
<span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><span class="enstr">Internationalization</span><!--end_enstr-->
<span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/programs/volume/">Volume Purchase Program</a></li>
                <li><a href="/programs/volume/b2b/">Custom B2B Apps</a></li>
                <li><a href="/enterprise/distribute/">Enterprise Apps</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
                <br />
                <h3><a href="/account/">Account</a></h3>
                <ul>
                  <li><a href="/programs/">Developer Program</a></li>
                  <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                  <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
                </ul>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2018 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":2994156,"discussion":"<div><p>When you import the Core Foundation framework, its types are imported as Swift classes. Wherever memory management annotations are provided, Swift automatically manages the memory of Core Foundation objects, including Core Foundation objects that you instantiate yourself. In Swift, you can use each pair of toll-free bridged Foundation and Core Foundation types interchangeably. You can also bridge some toll-free bridged Core Foundation types to Swift standard library types if you cast to a bridging Foundation type first. See <a href=\"https:\/\/developer.apple.com\/library\/archive\/documentation\/General\/Conceptual\/CocoaEncyclopedia\/Toll-FreeBridgin\/Toll-FreeBridgin.html#\/\/apple_ref\/doc\/uid\/TP40010810-CH2\">Toll-Free Bridging<\/a> for more information.<\/p><\/div><h3 id=\"2994152\">Use Memory Managed Objects<\/h3><div><p>When Swift imports Core Foundation types, the compiler remaps the names of these types. The compiler removes <code class=\"code-voice\"><span>Ref<\/span><\/code> from the end of each type name because all Swift classes are reference types; therefore, the suffix is redundant. The <code class=\"code-voice\"><span>CFType<wbr\/>Ref<\/span><\/code> type completely remaps to the <code class=\"code-voice\"><span>Any<wbr\/>Object<\/span><\/code> type.<\/p><p>Core Foundation objects returned from annotated APIs are automatically memory-managed in Swift—you don&#x27;t need to invoke the <code class=\"code-voice\"><span>CFRetain<\/span><\/code>, <code class=\"code-voice\"><span>CFRelease<\/span><\/code>, or <code class=\"code-voice\"><span>CFAutorelease<\/span><\/code> functions yourself.<\/p><p>If you return Core Foundation objects from your own C functions and Objective-C methods, you can annotate them with either the <code class=\"code-voice\"><span>CF<wbr\/>_RETURNS<wbr\/>_RETAINED<\/span><\/code> or <code class=\"code-voice\"><span>CF<wbr\/>_RETURNS<wbr\/>_NOT<wbr\/>_RETAINED<\/span><\/code> macro to automatically insert memory management calls. You can also use the <code class=\"code-voice\"><span>CF<wbr\/>_IMPLICIT<wbr\/>_BRIDGING<wbr\/>_ENABLED<\/span><\/code> and <code class=\"code-voice\"><span>CF<wbr\/>_IMPLICIT<wbr\/>_BRIDGING<wbr\/>_DISABLED<\/span><\/code> macros to enclose C function declarations that follow the policy for Core Foundation ownership naming, in order to infer memory management.<\/p><\/div><h3 id=\"2994151\">Convert Unmanaged Objects to Memory-Managed Objects<\/h3><div><p>When Swift imports APIs that have not been annotated, the compiler cannot automatically memory-manage the returned Core Foundation objects. Swift wraps these returned Core Foundation objects in an <a class=\"symbol-name\" href=\"\/documentation\/swift\/unmanaged\"><code><span>Unmanaged<\/span><\/code><\/a><code class=\"code-voice\"><span>&lt;Instance&gt;<\/span><\/code> structure. All indirectly returned Core Foundation objects are unmanaged as well. For example, here’s an unannotated C function:<\/p><figure id=\"2994148\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"occ\"><code>CFStringRef StringByAddingTwoStrings(CFStringRef s1, CFStringRef s2)\n<\/code><\/pre><\/div><\/div><\/figure><p>And here’s how Swift imports it:<\/p><figure id=\"2994149\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>func StringByAddingTwoStrings(_: CFString!, _: CFString!) -&gt; Unmanaged&lt;CFString&gt;! {\n    \/\/ ...\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>When you receive an unmanaged object from an unannotated API, immediately convert it to a memory-managed object before you work with it. That way, Swift can handle memory management for you.<\/p><p>The <code class=\"code-voice\"><span>Unmanaged&lt;Instance&gt;<\/span><\/code> structure provides two methods to convert an unmanaged object to a memory-managed object—<code class=\"code-voice\"><span>take<wbr\/>Unretained<wbr\/>Value()<\/span><\/code> and <code class=\"code-voice\"><span>take<wbr\/>Retained<wbr\/>Value()<\/span><\/code>. Both of these methods return the original, unwrapped type of the object. You choose which method to use based on whether the API you are invoking returns an unretained or a retained object.<\/p><p>For example, suppose the C function above doesn&#x27;t retain the <code class=\"code-voice\"><span>CFString<\/span><\/code> object before returning it. To start using the object, you use the <code class=\"code-voice\"><span>take<wbr\/>Unretained<wbr\/>Value()<\/span><\/code> function.<\/p><figure id=\"2994159\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let memoryManagedResult = StringByAddingTwoStrings(str1, str2).takeUnretainedValue()\n\/\/ memoryManagedResult is a memory managed CFString\n<\/code><\/pre><\/div><\/div><\/figure><p>You can also invoke the <code class=\"code-voice\"><span>retain()<\/span><\/code>, <code class=\"code-voice\"><span>release()<\/span><\/code>, and <code class=\"code-voice\"><span>autorelease()<\/span><\/code> methods on unmanaged objects, but this approach is not recommended.<\/p><p>For more information, see <a href=\"https:\/\/developer.apple.com\/library\/archive\/documentation\/CoreFoundation\/Conceptual\/CFMemoryMgmt\/Concepts\/Ownership.html#\/\/apple_ref\/doc\/uid\/20001148\">Ownership Policy<\/a> in <a href=\"https:\/\/developer.apple.com\/library\/archive\/documentation\/CoreFoundation\/Conceptual\/CFMemoryMgmt\/CFMemoryMgmt.html#\/\/apple_ref\/doc\/uid\/10000127i\">Memory Management Programming Guide for Core Foundation<\/a>.<\/p><p><\/p><p><\/p><\/div>","title":{"content":"Working with Core Foundation Types"},"abstract":"<div><p>Work directly with memory-managed Core Foundation types in your Swift code, and manually handle retains as needed.<\/p><\/div>","containingGroup":[{"id":2994158,"role":"task","paths":[],"symbols":[{"id":2994153,"role":"article","paths":["documentation\/swift\/imported_c_and_objective-c_apis\/working_with_foundation_types"],"abstract":"<div><p>Use bridged Foundation types in your Swift codebase to work with dates, times, and other values.<\/p><\/div>","title":{"content":"Working with Foundation Types"}},{"id":2994156,"role":"article","paths":["documentation\/swift\/imported_c_and_objective-c_apis\/working_with_core_foundation_types"],"abstract":"<div><p>Work directly with memory-managed Core Foundation types in your Swift code, and manually handle retains as needed.<\/p><\/div>","title":{"content":"Working with Core Foundation Types"}}],"title":{"content":"Cocoa Frameworks"}}],"modules":[{"title":{"content":"Swift Standard Library"},"paths":["documentation\/swift"],"importStatement":"<import xml:space=\"preserve\"><keyWord>import<\/keyWord> Swift<\/import>","availability":[{"platform":"watchOS","introduced":"2.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"macOS","introduced":"10.10"},{"platform":"iOS","introduced":"8.0"}]}],"languages":["swift"],"variants":{"swift":{"paths":["documentation\/swift\/imported_c_and_objective-c_apis\/working_with_core_foundation_types"]}},"pid":219449,"role":"article","language":"swift","paths":["documentation\/swift\/imported_c_and_objective-c_apis\/working_with_core_foundation_types"],"hierarchy":[[{"id":3000738,"role":"collection","title":{"content":"Swift"},"paths":["documentation\/swift"]},{"id":2994160,"role":"collectionGroup","title":{"content":"Imported C and Objective-C APIs"},"paths":["documentation\/swift\/imported_c_and_objective-c_apis"]}]],"legalNotices":{"copyright":"Copyright &copy; 2018 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script></body></html>