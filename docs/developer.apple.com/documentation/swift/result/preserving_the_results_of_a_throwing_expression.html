<!DOCTYPE html><html lang="en" data-reactroot=""><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Preserving the Results of a Throwing Expression | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="424974"/><link href="../../../documentation/assets/application-e5bb1544.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="../../../documentation/assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="../../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../documentation/assets/favicon.ico"/><script src="../../../documentation/assets/shared-b7676010.js"></script></head><body><div id="_omniture_top">
      <script>
        var s_account="awdappledeveloper"
      </script><!-- script src="https://developer.apple.com/assets/metrics/scripts/analytics.js" -->
      </script>
      <script>
        s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
        s.channel="www.documentation.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr"></aside><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
      <div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
              <span class="ac-gn-menuanchor-label">Global Nav Open Menu</span>
            </a>
            <a href="#" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
              <span class="ac-gn-menuanchor-label">Global Nav Close Menu</span>
            </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
              <span class="ac-gn-link-text">Apple Developer</span>
            </a>
          </li>
        </ul>
        <div class="ac-gn-search-placeholder-container" role="search">
          <div class="ac-gn-search ac-gn-search-small">
            <a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
              </a><div class="ac-gn-search-placeholder-bar">
                <div class="ac-gn-search-placeholder-input">
                  <div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
                    <div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
                    <span class="ac-gn-search-placeholder">Search Developer</span>
                  </div>
                </div>
                <div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
                  <span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
              <span class="ac-gn-link-text">Apple Developer</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
              <span class="ac-gn-link-text">Discover</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
              <span class="ac-gn-link-text">Design</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
              <span class="ac-gn-link-text">Develop</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
              <span class="ac-gn-link-text">Distribute</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
            <a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
              <span class="ac-gn-link-text">Support</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
              <span class="ac-gn-link-text">Account</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <div class="ac-gn-searchview-bar">
              <div class="ac-gn-searchview-bar-wrapper">
                <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
                  <div class="ac-gn-searchform-wrapper">
                    <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="quicklinks suggestions" />
                    <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
                    <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
                        <span class="ac-gn-searchform-reset-background"></span>
                      </button>
                  </div>
                </form>
                <button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
                    <span class="ac-gn-searchview-close-cancel" aria-hidden="true">
                      Cancel
                    </span>
                  </button>
              </div>
            </div>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
              <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
                <span class="ac-gn-searchview-close-right"></span>
              </span>
            </button>
        </aside>
          </div>
    </nav><div class="ac-gn-blur"></div><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift.html">Swift</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift/swift_standard_library.html"><span class="enstr">Swift Standard Library</span><!--end_enstr-->
<span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift/swift_standard_library/numbers_and_basic_values.html"><span class="enstr">Numbers and Basic Values</span><!--end_enstr-->
<span class="jpstr">
数と基本的な値
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated-breadcrumbs"><button class="localnav-menu-breadcrumb-link truncated-breadcrumbs-disclosebtn"><span class="truncated-breadcrumbs-disclosebtn-indicator">⋯</span></button><ul class="truncated-breadcrumbs-dropdown"><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift.html">Swift</a></li><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift/swift_standard_library.html"><span class="enstr">Swift Standard Library</span><!--end_enstr-->
<span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</a></li><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift/swift_standard_library/numbers_and_basic_values.html"><span class="enstr">Numbers and Basic Values</span><!--end_enstr-->
<span class="jpstr">
数と基本的な値
</span><!--end_jpstr-->
</a></li></ul></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/swift/result.html">Result</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current"><span class="enstr">Preserving the Results of a Throwing Expression</span><!--end_enstr-->
<span class="jpstr">
スローする式の結果を保全する
</span><!--end_jpstr-->
</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="5"><li class="localnav-menu-setting language-container"><span class="localnav-menu-setting-label">Language:</span><span class="localnav-menu-toggle-none current-language" aria-current="page">Swift</span></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Article</span><h1 class="topic-heading"><span><span class="enstr">Preserving the Results of a Throwing Expression</span><!--end_enstr-->
<span class="jpstr">
スローする式の結果を保全する
</span><!--end_jpstr-->
</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><span class="enstr">Call the initializer that wraps a throwing expression when you need to serialize or memoize the result.</span><!--end_enstr-->
<span class="jpstr">
スローする式をラップするイニシャライザを呼び出します、あなたが結果をシリアライズまたは記憶する必要がある時に。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label"><span class="enstr">On This Page</span><!--end_enstr-->
<span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#overview" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#see-also" class="icon icon-after icon-chevrondowncircle"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="overview" class="section"><h2><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">Sometimes you need to preserve the entire result of a function call or other expression that can either throw or return a value. For example, you may need to serialize the result or pass it as a value to another part of your app that handles the result data. Use the <code class="code-voice"><span>Result</span></code> type in these scenarios to capture the result of a potentially failing operation.</span><!--end_enstr-->
<span class="jpstr">
時々あなたはスローするまたは値を返すどちらかが可能な関数呼び出しや他の式の結果の全体を保全する必要があります。例えば、あなたは結果をシリアライズするまたはそれをある値としてあなたのアプリの別の部分に、結果データを処理するものに渡す必要があるかもしれません。<code class="code-voice"><span>Result</span></code>型をそれらの状況において使用して、失敗する可能性のある演算の結果をキャプチャしてください。
</span><!--end_jpstr-->
</p></div><h3 id="3148852"><span class="enstr">Identify a Throwing Expression to Preserve</span><!--end_enstr-->
<span class="jpstr">
スローする式を識別することで保全する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">Typically, you use <code class="code-voice"><span>do-catch</span></code> statements to handle throwing expressions immediately, but sometimes you need to store the whole result of the operation for later processing during tasks like analyzing a batch of calls. The following example introduces an API that generates random numbers, but that fails approximately half of the time.</span><!--end_enstr-->
<span class="jpstr">
概して、あなたは<code class="code-voice"><span>do-catch</span></code>文を使うことでスロー式を直接に取り扱います、しかし時にはあなたは演算の結果全体を保管しておく必要があります、もっと後で、一群の呼び出しを分析することのような作業の間に処理するために。以下の例は、無作為な数を生成するあるAPIを導入します、しかしそれはおおよそ半分は失敗します。
</span><!--end_jpstr-->
</p><figure id="3148851"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>enum EntropyError: Error {
    case entropyDepleted
}

struct UnreliableRandomGenerator {
    func random() throws -&gt; Int {
        if Bool.random() {
            return Int.random(in: 1...100)
        } else {
            throw EntropyError.entropyDepleted
        }
    }
}
</code></pre></div></div></figure><p></p></div><h3 id="3148842"><span class="enstr">Convert the Throwing Expression to a Result</span><!--end_enstr-->
<span class="jpstr">
スローする式を結果へと変換する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">You preserve the return value or thrown error from a throwing expression using the <a class="symbol-name" href="../../../documentation/swift/result.html"><code><span>Result</span></code></a> enumeration’s <a class="symbol-name" href="../../../documentation/swift/result/3139399-init.html"><code><span>init(catching:)</span></code></a> initializer. Invoke the throwing expression inside the closure you pass to the initializer:</span><!--end_enstr-->
<span class="jpstr">
あなたはスローする式から戻り値またはスローされたエラーを、<a class="symbol-name" href="../../../documentation/swift/result.html"><code><span>Result</span></code></a>列挙の持つ<a class="symbol-name" href="../../../documentation/swift/result/3139399-init.html"><code><span>init(catching:)</span></code></a>イニシャライザを使って保全します。スロー式をあなたがこのイニシャライザに渡すクロージャ内から発動してください。
</span><!--end_jpstr-->
</p><figure id="3148841"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>let singleSample = Result { try UnreliableRandomGenerator().random() }
</code></pre></div></div></figure><p><span class="enstr">In most scenarios, you use the preserved result as part of broader functionality in your code. For example, you may run a series of randomness tests and compute the statistical average of both a range of numbers returned from a random number generator, as well as the failure rate of calling the API. In these cases, you need to store the whole result rather than just the success value or that the API call failed.</span><!--end_enstr-->
<span class="jpstr">
ほとんどの状況では、あなたは保全された結果をあなたのコードにおけるより幅広い機能性の一部として使います。例えば、あなたは一連の無作為性テストを走らせて、無作為数生成子から返されたある範囲の数、それだけでなくそのAPI呼び出しの失敗割合の両方の統計上の平均を計算するかもしれません。これらの場合において、あなたは全体の結果を取っておく必要があります、成功値またはAPI呼び出しが失敗したことだけでなく。
</span><!--end_jpstr-->
 </p><p><span class="enstr">The following example uses the <code class="code-voice"><span>init(catching:)</span></code> initializer in the broader context of saving a series of calls for later statistical analysis:</span><!--end_enstr-->
<span class="jpstr">
以下の例は、<code class="code-voice"><span>init(catching:)</span></code>イニシャライザを、後で統計学的に分析するために一連の呼び出しを保存する、より幅広い文脈において使います：
</span><!--end_jpstr-->
</p><figure id="3148853"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>struct RandomnessMonitor {
    let randomnessSource: UnreliableRandomGenerator
    var results: [Result&lt;Int, Error&gt;] = []
    
    init(generator: UnreliableRandomGenerator) {
        randomnessSource = generator
    }
    
    mutating func sample() {
        let sample = Result { try randomnessSource.random() }
        results.append(sample)
    }
    
    func summary() -&gt; (Double, Double) {
        let totals = results.reduce((sum: 0, count: 0)) { total, sample in
            switch sample {
            case .success(let number):
                return (total.sum + number, total.count)
            case .failure:
                return (total.sum, total.count + 1)
            }
        }
        
        return (
            average: Double(totals.sum) / Double(results.count - totals.count),
            failureRate: Double(totals.count) / Double(results.count)
        )
    }
}
</code></pre></div></div></figure><p><span class="enstr">Running the analysis on a sufficiently large sample generates an average number near 50 and a failure rate near 50%:</span><!--end_enstr-->
<span class="jpstr">
十分に大きなサンプル上での分析の実行は、50に近い平均数と50%に近い失敗割合を生成します：
</span><!--end_jpstr-->
</p><figure id="3151689"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>var monitor = RandomnessMonitor(generator: UnreliableRandomGenerator())
(0..&lt;1000).forEach { _ in monitor.sample() }
let (average, failureRate) = monitor.summary()
print("Average value: \(average), failure rate: \(failureRate * 100.0)%.")
// Prints values such as: "Average value: 47.95, failure rate: 48.69%."
</code></pre></div></div></figure><p></p></div></div></section></div></div><section id="see-also" class="contenttable section alt-light-container row"><div class="alt-light"><div class="section-content"><h2 class="contenttable-title"><span class="enstr">See Also</span><!--end_enstr-->
<span class="jpstr">
参照
</span><!--end_jpstr-->
</h2><section id="3141326" class="contenttable-section"><div class="contenttable-container row"><div class="contenttable-section-title-container column large-3 medium-3 small-12"><h3 class="contenttable-section-title"><span class="enstr">Converting a Throwing Expression to a Result</span><!--end_enstr-->
<span class="jpstr">
スローする式を結果へ変換する
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><div class="task-topics"><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name symbol-name-decorated" href="../../../documentation/swift/result/3139399-init.html"><code class="display-name"><span class="identifier">init</span><span class="decorator">(</span><span class="identifier">catching</span><span class="decorator">: () -&gt; Success)</span></code></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><span class="enstr">Creates a new result by evaluating a throwing closure, capturing the returned value as a success, or any thrown error as a failure.</span><!--end_enstr-->
<span class="jpstr">
新しい結果を、あるスローするクロージャを評価することによって作成します、返される値をある成功としてキャプチャしています、または何からのスローされたエラーをある失敗として。
</span><!--end_jpstr-->
</p></div></div></div></div></div></div></div></section></div></div></section></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/business/">Business</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><span class="enstr">Resources</span><!--end_enstr-->
<span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><span class="enstr">Internationalization</span><!--end_enstr-->
<span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/business/distribute/">Apps for Business</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
              </ul>
              <h3><a href="/account/">Account</a></h3>
              <ul>
                <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2019 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":3148838,"title":{"content":"Preserving the Results of a Throwing Expression"},"discussion":"<div><p>Sometimes you need to preserve the entire result of a function call or other expression that can either throw or return a value. For example, you may need to serialize the result or pass it as a value to another part of your app that handles the result data. Use the <code class=\"code-voice\"><span>Result<\/span><\/code> type in these scenarios to capture the result of a potentially failing operation.<\/p><\/div><h3 id=\"3148852\">Identify a Throwing Expression to Preserve<\/h3><div><p>Typically, you use <code class=\"code-voice\"><span>do-catch<\/span><\/code> statements to handle throwing expressions immediately, but sometimes you need to store the whole result of the operation for later processing during tasks like analyzing a batch of calls. The following example introduces an API that generates random numbers, but that fails approximately half of the time.<\/p><figure id=\"3148851\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>enum EntropyError: Error {\n    case entropyDepleted\n}\n\nstruct UnreliableRandomGenerator {\n    func random() throws -&gt; Int {\n        if Bool.random() {\n            return Int.random(in: 1...100)\n        } else {\n            throw EntropyError.entropyDepleted\n        }\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div><h3 id=\"3148842\">Convert the Throwing Expression to a Result<\/h3><div><p>You preserve the return value or thrown error from a throwing expression using the <a class=\"symbol-name\" href=\"\/documentation\/swift\/result\"><code><span>Result<\/span><\/code><\/a> enumeration’s <a class=\"symbol-name\" href=\"\/documentation\/swift\/result\/3139399-init\"><code><span>init(catching:)<\/span><\/code><\/a> initializer. Invoke the throwing expression inside the closure you pass to the initializer:<\/p><figure id=\"3148841\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>let singleSample = Result { try UnreliableRandomGenerator().random() }\n<\/code><\/pre><\/div><\/div><\/figure><p>In most scenarios, you use the preserved result as part of broader functionality in your code. For example, you may run a series of randomness tests and compute the statistical average of both a range of numbers returned from a random number generator, as well as the failure rate of calling the API. In these cases, you need to store the whole result rather than just the success value or that the API call failed. <\/p><p>The following example uses the <code class=\"code-voice\"><span>init(catching:)<\/span><\/code> initializer in the broader context of saving a series of calls for later statistical analysis:<\/p><figure id=\"3148853\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>struct RandomnessMonitor {\n    let randomnessSource: UnreliableRandomGenerator\n    var results: [Result&lt;Int, Error&gt;] = []\n    \n    init(generator: UnreliableRandomGenerator) {\n        randomnessSource = generator\n    }\n    \n    mutating func sample() {\n        let sample = Result { try randomnessSource.random() }\n        results.append(sample)\n    }\n    \n    func summary() -&gt; (Double, Double) {\n        let totals = results.reduce((sum: 0, count: 0)) { total, sample in\n            switch sample {\n            case .success(let number):\n                return (total.sum + number, total.count)\n            case .failure:\n                return (total.sum, total.count + 1)\n            }\n        }\n        \n        return (\n            average: Double(totals.sum) \/ Double(results.count - totals.count),\n            failureRate: Double(totals.count) \/ Double(results.count)\n        )\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>Running the analysis on a sufficiently large sample generates an average number near 50 and a failure rate near 50%:<\/p><figure id=\"3151689\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>var monitor = RandomnessMonitor(generator: UnreliableRandomGenerator())\n(0..&lt;1000).forEach { _ in monitor.sample() }\nlet (average, failureRate) = monitor.summary()\nprint(&quot;Average value: \\(average), failure rate: \\(failureRate * 100.0)%.&quot;)\n\/\/ Prints values such as: &quot;Average value: 47.95, failure rate: 48.69%.&quot;\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div>","abstract":"<div><p>Call the initializer that wraps a throwing expression when you need to serialize or memoize the result.<\/p><\/div>","containingGroup":[{"id":3141326,"role":"task","paths":[],"symbols":[{"id":3148838,"role":"article","paths":["documentation\/swift\/result\/preserving_the_results_of_a_throwing_expression"],"abstract":"<div><p>Call the initializer that wraps a throwing expression when you need to serialize or memoize the result.<\/p><\/div>","title":{"content":"Preserving the Results of a Throwing Expression"}},{"id":3139399,"role":"symbol","usr":"s:s6ResultOss5Error_pRs_rlE8catchingAByxsAC_pGxyKXE_tcfc","name":"init(catching:)","domain":"swift","kind":"enumctr","availability":[{"platform":"Xcode","introduced":"10.2"}],"displayName":"<code class=\"display-name\"><span class=\"identifier\">init<\/span><span class=\"decorator\">(<\/span><span class=\"identifier\">catching<\/span><span class=\"decorator\">: () -&gt; Success)<\/span><\/code>","paths":["documentation\/swift\/result\/3139399-init"],"title":{"content":"init(catching:)"},"abstract":"<div><p>Creates a new result by evaluating a throwing closure, capturing the returned value as a success, or any thrown error as a failure.<\/p><\/div>"}],"title":{"content":"Converting a Throwing Expression to a Result"}}],"role":"article","language":"swift","roleHeading":"Article","languages":["swift"],"variants":{"swift":{"paths":["documentation\/swift\/result\/preserving_the_results_of_a_throwing_expression"]}},"pid":424974,"paths":["documentation\/swift\/result\/preserving_the_results_of_a_throwing_expression"],"hierarchy":[[{"id":3000738,"role":"collection","title":{"content":"Swift"},"paths":["documentation\/swift"]},{"id":2984803,"role":"collectionGroup","title":{"content":"Swift Standard Library"},"paths":["documentation\/swift\/swift_standard_library"]},{"id":2877120,"role":"collectionGroup","title":{"content":"Numbers and Basic Values"},"paths":["documentation\/swift\/swift_standard_library\/numbers_and_basic_values"]},{"id":3139392,"role":"symbol","title":{"content":"Result"},"usr":"s:s6ResultO","kind":"enum","paths":["documentation\/swift\/result"]}]],"legalNotices":{"copyright":"Copyright &copy; 2019 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script></body></html>