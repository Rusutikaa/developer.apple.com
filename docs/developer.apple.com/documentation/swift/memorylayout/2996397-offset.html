<!DOCTYPE html><html lang="en" data-reactroot=""><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>offset(of:) - MemoryLayout | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="463568"/><link href="../../../documentation/assets/application-e5bb1544.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="../../../documentation/assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="../../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../documentation/assets/favicon.ico"/><script src="../../../documentation/assets/shared-b7676010.js"></script></head><body><div id="_omniture_top">
      <script>
        var s_account="awdappledeveloper"
      </script><!-- script src="https://developer.apple.com/assets/metrics/scripts/analytics.js" -->
      </script>
      <script>
        s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
        s.channel="www.documentation.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr"></aside><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
      <div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
              <span class="ac-gn-menuanchor-label">Global Nav Open Menu</span>
            </a>
            <a href="#" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
              <span class="ac-gn-menuanchor-label">Global Nav Close Menu</span>
            </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
              <span class="ac-gn-link-text">Apple Developer</span>
            </a>
          </li>
        </ul>
        <div class="ac-gn-search-placeholder-container" role="search">
          <div class="ac-gn-search ac-gn-search-small">
            <a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
              </a><div class="ac-gn-search-placeholder-bar">
                <div class="ac-gn-search-placeholder-input">
                  <div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
                    <div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
                    <span class="ac-gn-search-placeholder">Search Developer</span>
                  </div>
                </div>
                <div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
                  <span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
              <span class="ac-gn-link-text">Apple Developer</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
              <span class="ac-gn-link-text">Discover</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
              <span class="ac-gn-link-text">Design</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
              <span class="ac-gn-link-text">Develop</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
              <span class="ac-gn-link-text">Distribute</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
            <a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
              <span class="ac-gn-link-text">Support</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
              <span class="ac-gn-link-text">Account</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <div class="ac-gn-searchview-bar">
              <div class="ac-gn-searchview-bar-wrapper">
                <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
                  <div class="ac-gn-searchform-wrapper">
                    <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="quicklinks suggestions" />
                    <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
                    <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
                        <span class="ac-gn-searchform-reset-background"></span>
                      </button>
                  </div>
                </form>
                <button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
                    <span class="ac-gn-searchview-close-cancel" aria-hidden="true">
                      Cancel
                    </span>
                  </button>
              </div>
            </div>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
              <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
                <span class="ac-gn-searchview-close-right"></span>
              </span>
            </button>
        </aside>
          </div>
    </nav><div class="ac-gn-blur"></div><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift.html">Swift</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift/swift_standard_library.html"><span class="enstr">Swift Standard Library</span><!--end_enstr-->
<span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift/swift_standard_library/manual_memory_management.html"><span class="enstr">Manual Memory Management</span><!--end_enstr-->
<span class="jpstr">
手動メモリ管理
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated-breadcrumbs"><button class="localnav-menu-breadcrumb-link truncated-breadcrumbs-disclosebtn"><span class="truncated-breadcrumbs-disclosebtn-indicator">⋯</span></button><ul class="truncated-breadcrumbs-dropdown"><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift.html">Swift</a></li><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift/swift_standard_library.html"><span class="enstr">Swift Standard Library</span><!--end_enstr-->
<span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</a></li><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift/swift_standard_library/manual_memory_management.html"><span class="enstr">Manual Memory Management</span><!--end_enstr-->
<span class="jpstr">
手動メモリ管理
</span><!--end_jpstr-->
</a></li></ul></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/swift/memorylayout.html">MemoryLayout</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current">offset(of:)</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="5"><li class="localnav-menu-setting language-container"><span class="localnav-menu-setting-label">Language:</span><span class="localnav-menu-toggle-none current-language" aria-current="page">Swift</span></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow"><span class="enstr">Type Method</span><!--end_enstr-->
<span class="jpstr">
型メソッド
</span><!--end_jpstr-->
</span><h1 class="topic-heading"><span>offset(of:)</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><span class="enstr">Returns the offset of an inline stored property within a type’s in-memory representation.</span><!--end_enstr-->
<span class="jpstr">
インライン格納プロパティの、ある型のインメモリ表現内部でのオフセットを返します。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section sdks" role="complementary" aria-label="SDK"><p class="topic-summary-section-label subsection-label">SDK</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item sdk"><span aria-label="Xcode 10.0+, Available on Xcode 10.0 and later" role="text" title="Available on Xcode 10.0 and later">Xcode 10.0+</span></li></ul></div><div class="topic-summary-section frameworks" role="complementary" aria-label="Framework"><p class="topic-summary-section-label subsection-label"><span class="enstr">Framework</span><!--end_enstr-->
<span class="jpstr">
フレームワーク
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><span><span class="enstr">Swift Standard Library</span><!--end_enstr-->
<span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</span></li></ul></div><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label"><span class="enstr">On This Page</span><!--end_enstr-->
<span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#declarations" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Declaration</span><!--end_enstr-->
<span class="jpstr">
宣言
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#parameters" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Parameters</span><!--end_enstr-->
<span class="jpstr">
パラメータ
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#return-value" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Return Value</span><!--end_enstr-->
<span class="jpstr">
戻り値
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#discussion" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Discussion</span><!--end_enstr-->
<span class="jpstr">
解説
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="declarations" class="section"><h2><span class="enstr">Declaration</span><!--end_enstr-->
<span class="jpstr">
宣言
</span><!--end_jpstr-->
</h2><figure class="declaration"><div class="code-listing"><pre class="code-source code-source-indented" data-language="swift"><code><span><span class="syntax-keyword">static</span> <span class="syntax-keyword">func</span> <span class="syntax-identifier">offset</span>(<span class="syntax-identifier">of</span> <span class="syntax-param-name">key</span>: <a class="symbolref" href="../../../documentation/swift/partialkeypath.html"><span>Partial<wbr/>Key<wbr/>Path</span></a>&lt;T&gt;) -&gt; <a class="symbolref" href="../../../documentation/swift/int.html"><span>Int</span></a>?
</span></code></pre></div></figure></section><section class="section" id="parameters"><h2><span class="enstr">Parameters</span><!--end_enstr-->
<span class="jpstr">
パラメータ
</span><!--end_jpstr-->
</h2><dl class="datalist"><dt class="datalist-term"><code>key</code></dt><dd class="datalist-description"><div class="formatted-content"><div><p><span class="enstr">A key path referring to storage that can be accessed through a value of type <code class="code-voice"><span>T</span></code>.</span><!--end_enstr-->
<span class="jpstr">
型<code class="code-voice"><span>T</span></code>の値を通してアクセス可能なストレージを参照しているキーパス。
</span><!--end_jpstr-->
</p></div></div></dd></dl></section><section id="return-value" class="section"><h2><span class="enstr">Return Value</span><!--end_enstr-->
<span class="jpstr">
戻り値
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">The offset in bytes from a pointer to a value of type <code class="code-voice"><span>T</span></code> to a pointer to the storage referenced by <code class="code-voice"><span>key</span></code>, or <code class="code-voice"><span>nil</span></code> if no such offset is available for the storage referenced by <code class="code-voice"><span>key</span></code>. If the value is <code class="code-voice"><span>nil</span></code>, it can be because <code class="code-voice"><span>key</span></code> is computed, has observers, requires reabstraction, or overlaps storage with other properties.</span><!--end_enstr-->
<span class="jpstr">
型<code class="code-voice"><span>T</span></code>の値へのポインタから、<code class="code-voice"><span>key</span></code>によって参照されるストレージへのポインタまでのバイトでのオフセット、または<code class="code-voice"><span>nil</span></code>、もしそのようなオフセットが<code class="code-voice"><span>key</span></code>によって参照されるストレージに利用可能でないならば。値が<code class="code-voice"><span>nil</span></code>の場合、それが可能なのは<code class="code-voice"><span>key</span></code>が計算される、オブザーバを持つ、再抽象化を要求する、またはストレージを他のプロパティでオーバーラップするからです。
</span><!--end_jpstr-->
</p></div></div></section><section id="discussion" class="section"><h2><span class="enstr">Discussion</span><!--end_enstr-->
<span class="jpstr">
解説
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">You can use this method to find the distance in bytes that can be added to a pointer of type <code class="code-voice"><span>T</span></code> to get a pointer to the property referenced by <code class="code-voice"><span>key</span></code>. The offset is available only if the given key refers to inline, directly addressable storage within the in-memory representation of <code class="code-voice"><span>T</span></code>.</span><!--end_enstr-->
<span class="jpstr">
あなたはこのメソッドを使ってバイトでの隔たりを見つけることができます、それは型<code class="code-voice"><span>T</span></code>のポインタに加えることで、<code class="code-voice"><span>key</span></code>によって参照されるプロパティへのポインタを得ることができるものです。このオフセットは与えられたキーがインラインの、直接にアドレス指定可能なストレージを<code class="code-voice"><span>T</span></code>のインメモリ表現内で参照する場合にのみ利用可能です。
</span><!--end_jpstr-->
</p><p><span class="enstr">If the return value of this method is non-<code class="code-voice"><span>nil</span></code>, then accessing the value by key path or by an offset pointer are equivalent. For example, for a variable <code class="code-voice"><span>root</span></code> of type <code class="code-voice"><span>T</span></code>, a key path <code class="code-voice"><span>key</span></code> of type <code class="code-voice"><span>Writable<wbr/>Key<wbr/>Path&lt;T, U&gt;</span></code>, and a <code class="code-voice"><span>value</span></code> of type <code class="code-voice"><span>U</span></code>:</span><!--end_enstr-->
<span class="jpstr">
このメソッドの戻り値が非<code class="code-voice"><span>nil</span></code>ならば、その時その値にキーパスによってまたはあるオフセットポインタによってアクセスすることは、等価です。例えば、変数<code class="code-voice"><span>root</span></code>で型<code class="code-voice"><span>T</span></code>、キーパス<code class="code-voice"><span>key</span></code>で型<code class="code-voice"><span>Writable<wbr/>Key<wbr/>Path&lt;T, U&gt;</span></code>、そして<code class="code-voice"><span>value</span></code>で型<code class="code-voice"><span>U</span></code>に対して：
</span><!--end_jpstr-->
</p><figure id="3131187"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>//<span class="enstr"> Mutation through the key path</span><!--end_enstr--><span class="jpstr">（ キーパスを通した変化）</span><!--end_jpstr-->
root[keyPath: key] = value

//<span class="enstr"> Mutation through the offset pointer</span><!--end_enstr--><span class="jpstr">（ オフセットポインタを通した変化）</span><!--end_jpstr-->
withUnsafeMutableBytes(of: &amp;root) { bytes in
    let offset = MemoryLayout&lt;T&gt;.offset(of: key)!
    let rawPointerToValue = bytes.baseAddress! + offset
    let pointerToValue = rawPointerToValue.assumingMemoryBound(to: U.self)
    pointerToValue.pointee = value
}
</code></pre></div></div></figure><p><span class="enstr">A property has inline, directly addressable storage when it is a stored property for which no additional work is required to extract or set the value. Properties are not directly accessible if they trigger any <code class="code-voice"><span>did<wbr/>Set</span></code> or <code class="code-voice"><span>will<wbr/>Set</span></code> accessors, perform any representation changes such as bridging or closure reabstraction, or mask the value out of overlapping storage as for packed bitfields. In addition, because class instance properties are always stored out-of-line, their positions are not accessible using <code class="code-voice"><span>offset(of:)</span></code>.</span><!--end_enstr-->
<span class="jpstr">
あるプロパティは、インラインに、直接にアドレス指定可能なストレージを持ちます、それが値を抽出または設定するのに追加的な仕事が要求されない格納プロパティである場合は。プロパティは直接にアクセス可能ではありません、もしそれらが何らかの<code class="code-voice"><span>did<wbr/>Set</span></code>または<code class="code-voice"><span>will<wbr/>Set</span></code>アクセッサの引き金になる、何らかの表現変更の実行たとえばブリッジまたはクロージャ再抽象化など、またはオーバーラップしているストレージの外の値をパックされたビットフィールドとしてマスクするならば。その上、クラスインスタンスプロパティは常にアウトオブラインに格納されることから、それらの位置は<code class="code-voice"><span>offset(of:)</span></code>によってアクセス可能ではありません。
</span><!--end_jpstr-->
</p><p><span class="enstr">For example, in the <code class="code-voice"><span>Product<wbr/>Category</span></code> type defined here, only <code class="code-voice"><span>\.update<wbr/>Counter</span></code>, <code class="code-voice"><span>\.identifier</span></code>, and <code class="code-voice"><span>\.identifier<wbr/>.name</span></code> refer to properties with inline, directly addressable storage:</span><!--end_enstr-->
<span class="jpstr">
例えば、ここで定義される<code class="code-voice"><span>Product<wbr/>Category</span></code>型において、<code class="code-voice"><span>\.update<wbr/>Counter</span></code>, <code class="code-voice"><span>\.identifier</span></code>、そして<code class="code-voice"><span>\.identifier<wbr/>.name</span></code>だけがインラインに、直接にアドレス指定可能なストレージでのプロパティを参照します。
</span><!--end_jpstr-->
</p><figure id="3003491"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>struct ProductCategory {
    struct Identifier {
        var name: String              //<span class="enstr"> addressable</span><!--end_enstr--><span class="jpstr">（ アドレス指定可能）</span><!--end_jpstr-->
    }

    var identifier: Identifier        //<span class="enstr"> addressable</span><!--end_enstr--><span class="jpstr">（ アドレス指定可能）</span><!--end_jpstr-->
    var updateCounter: Int            //<span class="enstr"> addressable</span><!--end_enstr--><span class="jpstr">（ アドレス指定可能）</span><!--end_jpstr-->
    var products: [Product] {         //<span class="enstr"> not addressable: didSet handler</span><!--end_enstr--><span class="jpstr">（ アドレス指定可能でない：didSetハンドラ）</span><!--end_jpstr-->
        didSet { updateCounter += 1 }
    }
    var productCount: Int {           //<span class="enstr"> not addressable: computed property</span><!--end_enstr--><span class="jpstr">（ アドレス指定可能でない：計算プロパティ）</span><!--end_jpstr-->
        return products.count
    }
}
</code></pre></div></div></figure><p><span class="enstr">When using <code class="code-voice"><span>offset(of:)</span></code> with a type imported from a library, don’t assume that future versions of the library will have the same behavior. If a property is converted from a stored property to a computed property, the result of <code class="code-voice"><span>offset(of:)</span></code> changes to <code class="code-voice"><span>nil</span></code>. That kind of conversion is nonbreaking in other contexts, but would trigger a runtime error if the result of <code class="code-voice"><span>offset(of:)</span></code> is force-unwrapped.</span><!--end_enstr-->
<span class="jpstr">
<code class="code-voice"><span>offset(of:)</span></code>をあるライブラリからインポートされる型で使う場合、そのライブラリの将来のバージョンが同じ挙動を持つと決めてかからないでください。プロパティが格納プロパティから計算プロパティに変換されるならば、<code class="code-voice"><span>offset(of:)</span></code>の結果は<code class="code-voice"><span>nil</span></code>に変わります。その種の変換は、他の文脈においては非破壊です、しかし<code class="code-voice"><span>offset(of:)</span></code>の結果が強制アンラップされるならば実行時エラーの引き金となります。
</span><!--end_jpstr-->
</p></div></div></section></div></div></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/business/">Business</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><span class="enstr">Resources</span><!--end_enstr-->
<span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><span class="enstr">Internationalization</span><!--end_enstr-->
<span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/business/distribute/">Apps for Business</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
              </ul>
              <h3><a href="/account/">Account</a></h3>
              <ul>
                <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2020 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":2996397,"title":{"content":"offset(of:)"},"parameters":[{"name":"key","discussion":"<div><p>A key path referring to storage that can be accessed through a value of type <code class=\"code-voice\"><span>T<\/span><\/code>.<\/p><\/div>"}],"discussion":"<div><p>You can use this method to find the distance in bytes that can be added to a pointer of type <code class=\"code-voice\"><span>T<\/span><\/code> to get a pointer to the property referenced by <code class=\"code-voice\"><span>key<\/span><\/code>. The offset is available only if the given key refers to inline, directly addressable storage within the in-memory representation of <code class=\"code-voice\"><span>T<\/span><\/code>.<\/p><p>If the return value of this method is non-<code class=\"code-voice\"><span>nil<\/span><\/code>, then accessing the value by key path or by an offset pointer are equivalent. For example, for a variable <code class=\"code-voice\"><span>root<\/span><\/code> of type <code class=\"code-voice\"><span>T<\/span><\/code>, a key path <code class=\"code-voice\"><span>key<\/span><\/code> of type <code class=\"code-voice\"><span>Writable<wbr\/>Key<wbr\/>Path&lt;T, U&gt;<\/span><\/code>, and a <code class=\"code-voice\"><span>value<\/span><\/code> of type <code class=\"code-voice\"><span>U<\/span><\/code>:<\/p><figure id=\"3131187\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>\/\/ Mutation through the key path\nroot[keyPath: key] = value\n\n\/\/ Mutation through the offset pointer\nwithUnsafeMutableBytes(of: &amp;root) { bytes in\n    let offset = MemoryLayout&lt;T&gt;.offset(of: key)!\n    let rawPointerToValue = bytes.baseAddress! + offset\n    let pointerToValue = rawPointerToValue.assumingMemoryBound(to: U.self)\n    pointerToValue.pointee = value\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>A property has inline, directly addressable storage when it is a stored property for which no additional work is required to extract or set the value. Properties are not directly accessible if they trigger any <code class=\"code-voice\"><span>did<wbr\/>Set<\/span><\/code> or <code class=\"code-voice\"><span>will<wbr\/>Set<\/span><\/code> accessors, perform any representation changes such as bridging or closure reabstraction, or mask the value out of overlapping storage as for packed bitfields. In addition, because class instance properties are always stored out-of-line, their positions are not accessible using <code class=\"code-voice\"><span>offset(of:)<\/span><\/code>.<\/p><p>For example, in the <code class=\"code-voice\"><span>Product<wbr\/>Category<\/span><\/code> type defined here, only <code class=\"code-voice\"><span>\\.update<wbr\/>Counter<\/span><\/code>, <code class=\"code-voice\"><span>\\.identifier<\/span><\/code>, and <code class=\"code-voice\"><span>\\.identifier<wbr\/>.name<\/span><\/code> refer to properties with inline, directly addressable storage:<\/p><figure id=\"3003491\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>struct ProductCategory {\n    struct Identifier {\n        var name: String              \/\/ addressable\n    }\n\n    var identifier: Identifier        \/\/ addressable\n    var updateCounter: Int            \/\/ addressable\n    var products: [Product] {         \/\/ not addressable: didSet handler\n        didSet { updateCounter += 1 }\n    }\n    var productCount: Int {           \/\/ not addressable: computed property\n        return products.count\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>When using <code class=\"code-voice\"><span>offset(of:)<\/span><\/code> with a type imported from a library, don’t assume that future versions of the library will have the same behavior. If a property is converted from a stored property to a computed property, the result of <code class=\"code-voice\"><span>offset(of:)<\/span><\/code> changes to <code class=\"code-voice\"><span>nil<\/span><\/code>. That kind of conversion is nonbreaking in other contexts, but would trigger a runtime error if the result of <code class=\"code-voice\"><span>offset(of:)<\/span><\/code> is force-unwrapped.<\/p><\/div>","returnValue":"<div><p>The offset in bytes from a pointer to a value of type <code class=\"code-voice\"><span>T<\/span><\/code> to a pointer to the storage referenced by <code class=\"code-voice\"><span>key<\/span><\/code>, or <code class=\"code-voice\"><span>nil<\/span><\/code> if no such offset is available for the storage referenced by <code class=\"code-voice\"><span>key<\/span><\/code>. If the value is <code class=\"code-voice\"><span>nil<\/span><\/code>, it can be because <code class=\"code-voice\"><span>key<\/span><\/code> is computed, has observers, requires reabstraction, or overlaps storage with other properties.<\/p><\/div>","abstract":"<div><p>Returns the offset of an inline stored property within a type’s in-memory representation.<\/p><\/div>","containingGroup":[{"id":3024342,"role":"task","paths":[],"symbols":[{"id":2996397,"role":"symbol","usr":"s:s12MemoryLayoutO6offset2ofSiSgs14PartialKeyPathCyxG_tFZ","name":"offset(of:)","domain":"swift","kind":"enumcm","availability":[{"platform":"Xcode","introduced":"10.0"}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">static func <\/span><span class=\"identifier\">offset<\/span><span class=\"decorator\">(<\/span><span class=\"identifier\">of<\/span><span class=\"decorator\">: Partial<wbr\/>Key<wbr\/>Path&lt;T&gt;) -&gt; Int?<\/span><\/code>","paths":["documentation\/swift\/memorylayout\/2996397-offset"],"title":{"content":"offset(of:)"},"abstract":"<div><p>Returns the offset of an inline stored property within a type’s in-memory representation.<\/p><\/div>"}],"title":{"content":"Querying Type Properties"}}],"usr":"s:s12MemoryLayoutO6offset2ofSiSgs14PartialKeyPathCyxG_tFZ","name":"offset(of:)","domain":"swift","kind":"enumcm","availability":[{"platform":"Xcode","current":"11.4","introduced":"10.0"}],"parent":{"id":2428282,"usr":"s:s12MemoryLayoutO","name":"MemoryLayout","domain":"swift","kind":"enum","role":"symbol","paths":["documentation\/swift\/memorylayout"],"title":{"content":"MemoryLayout"},"abstract":{"content":"<abstract><paragraph xml:space=\"preserve\">The memory layout of a type, describing its size, stride, and alignment.<\/paragraph><\/abstract>"}},"module":[{"title":{"content":"Swift Standard Library"},"importStatement":"<div><span class=\"syntax-identifier\">import<\/span> Swift<\/div>","paths":["documentation\/swift"],"platforms":["iOS","macOS","Mac Catalyst","tvOS","watchOS"]}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">static func <\/span><span class=\"identifier\">offset<\/span><span class=\"decorator\">(<\/span><span class=\"identifier\">of<\/span><span class=\"decorator\">: Partial<wbr\/>Key<wbr\/>Path&lt;T&gt;) -&gt; Int?<\/span><\/code>","declaration":[{"content":"<span><span class=\"syntax-keyword\">static<\/span> <span class=\"syntax-keyword\">func<\/span> <span class=\"syntax-identifier\">offset<\/span>(<span class=\"syntax-identifier\">of<\/span> <span class=\"syntax-param-name\">key<\/span>: <a class=\"symbolref\" href=\"\/documentation\/swift\/partialkeypath\"><span>Partial<wbr\/>Key<wbr\/>Path<\/span><\/a>&lt;T&gt;) -&gt; <a class=\"symbolref\" href=\"\/documentation\/swift\/int\"><span>Int<\/span><\/a>?\n<\/span>","platforms":["iOS","macOS","Mac Catalyst","tvOS","watchOS"],"references":{"1541415":{"id":1541415,"role":"symbol","paths":["documentation\/swift\/int"],"usr":"s:Si","kind":"struct","language":"swift","domain":"swift","name":"Int","languages":["swift"],"title":{"content":"Int"}},"2894145":{"id":2894145,"role":"symbol","paths":["documentation\/swift\/partialkeypath"],"usr":"s:s14PartialKeyPathC","kind":"cl","language":"swift","domain":"swift","name":"PartialKeyPath","languages":["swift"],"title":{"content":"PartialKeyPath"}}}}],"role":"symbol","language":"swift","roleHeading":"Type Method","languages":["swift"],"variants":{"swift":{"paths":["documentation\/swift\/memorylayout\/2996397-offset"],"usr":"s:s12MemoryLayoutO6offset2ofSiSgs14PartialKeyPathCyxG_tFZ"}},"pid":463568,"paths":["documentation\/swift\/memorylayout\/2996397-offset"],"hierarchy":[[{"id":3000738,"role":"collection","title":{"content":"Swift"},"paths":["documentation\/swift"]},{"id":2984803,"role":"collectionGroup","title":{"content":"Swift Standard Library"},"paths":["documentation\/swift\/swift_standard_library"]},{"id":2877791,"role":"collectionGroup","title":{"content":"Manual Memory Management"},"paths":["documentation\/swift\/swift_standard_library\/manual_memory_management"]},{"id":2428282,"role":"symbol","title":{"content":"MemoryLayout"},"usr":"s:s12MemoryLayoutO","kind":"enum","paths":["documentation\/swift\/memorylayout"]}]],"legalNotices":{"copyright":"Copyright &copy; 2020 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script></body></html>