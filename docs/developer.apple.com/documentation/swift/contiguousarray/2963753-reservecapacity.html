<!DOCTYPE html><html lang="en" data-reactroot=""><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>reserveCapacity(_:) - ContiguousArray | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="424974"/><link href="../../../documentation/assets/application-e5bb1544.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="../../../documentation/assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="../../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../documentation/assets/favicon.ico"/><script src="../../../documentation/assets/shared-b7676010.js"></script></head><body><div id="_omniture_top">
      <script>
        var s_account="awdappledeveloper"
      </script><!-- script src="https://developer.apple.com/assets/metrics/scripts/analytics.js" -->
      </script>
      <script>
        s.pageName= AC && AC.Tracking && AC.Tracking.pageName();
        s.channel="www.documentation.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr"></aside><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
      <div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
              <span class="ac-gn-menuanchor-label">Global Nav Open Menu</span>
            </a>
            <a href="#" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
              <span class="ac-gn-menuanchor-label">Global Nav Close Menu</span>
            </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
              <span class="ac-gn-link-text">Apple Developer</span>
            </a>
          </li>
        </ul>
        <div class="ac-gn-search-placeholder-container" role="search">
          <div class="ac-gn-search ac-gn-search-small">
            <a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
              </a><div class="ac-gn-search-placeholder-bar">
                <div class="ac-gn-search-placeholder-input">
                  <div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
                    <div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
                    <span class="ac-gn-search-placeholder">Search Developer</span>
                  </div>
                </div>
                <div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
                  <span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
              <span class="ac-gn-link-text">Apple Developer</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
              <span class="ac-gn-link-text">Discover</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
              <span class="ac-gn-link-text">Design</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
              <span class="ac-gn-link-text">Develop</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
              <span class="ac-gn-link-text">Distribute</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
            <a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
              <span class="ac-gn-link-text">Support</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
              <span class="ac-gn-link-text">Account</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <div class="ac-gn-searchview-bar">
              <div class="ac-gn-searchview-bar-wrapper">
                <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
                  <div class="ac-gn-searchform-wrapper">
                    <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="quicklinks suggestions" />
                    <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
                    <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
                        <span class="ac-gn-searchform-reset-background"></span>
                      </button>
                  </div>
                </form>
                <button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
                    <span class="ac-gn-searchview-close-cancel" aria-hidden="true">
                      Cancel
                    </span>
                  </button>
              </div>
            </div>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
              <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
                <span class="ac-gn-searchview-close-right"></span>
              </span>
            </button>
        </aside>
          </div>
    </nav><div class="ac-gn-blur"></div><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift.html">Swift</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated"><a class="localnav-menu-link" href="../../../documentation/swift/array.html">Array</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item truncated-breadcrumbs"><button class="localnav-menu-breadcrumb-link truncated-breadcrumbs-disclosebtn"><span class="truncated-breadcrumbs-disclosebtn-indicator">⋯</span></button><ul class="truncated-breadcrumbs-dropdown"><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift.html">Swift</a></li><li class="truncated-breadcrumbs-dropdown-item"><a class="truncated-breadcrumbs-dropdown-item-link" href="../../../documentation/swift/array.html">Array</a></li></ul></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/swift/contiguousarray.html">ContiguousArray</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current">reserveCapacity(_:)</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="4"><li class="localnav-menu-setting language-container"><span class="localnav-menu-setting-label">Language:</span><span class="localnav-menu-toggle-none current-language" aria-current="page">Swift</span></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow"><span class="enstr">Instance Method</span><!--end_enstr-->
<span class="jpstr">
インスタンスメソッド
</span><!--end_jpstr-->
</span><h1 class="topic-heading"><span>reserve<wbr/>Capacity(_:)</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><span class="enstr">Reserves enough space to store the specified number of elements.</span><!--end_enstr-->
<span class="jpstr">
指定された数の要素を格納するのに十分な空間を確保します。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section sdks" role="complementary" aria-label="SDK"><p class="topic-summary-section-label subsection-label">SDK</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item sdk"><span aria-label="Xcode 10.0+, Available on Xcode 10.0 and later" role="text" title="Available on Xcode 10.0 and later">Xcode 10.0+</span></li></ul></div><div class="topic-summary-section frameworks" role="complementary" aria-label="Framework"><p class="topic-summary-section-label subsection-label"><span class="enstr">Framework</span><!--end_enstr-->
<span class="jpstr">
フレームワーク
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><span><span class="enstr">Swift Standard Library</span><!--end_enstr-->
<span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</span></li></ul></div><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label"><span class="enstr">On This Page</span><!--end_enstr-->
<span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#declarations" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Declaration</span><!--end_enstr-->
<span class="jpstr">
宣言
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#parameters" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Parameters</span><!--end_enstr-->
<span class="jpstr">
パラメータ
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#discussion" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Discussion</span><!--end_enstr-->
<span class="jpstr">
解説
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#relationships" class="icon icon-after icon-chevrondowncircle"><span class="enstr">Relationships</span><!--end_enstr-->
<span class="jpstr">
関係
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="declarations" class="section"><h2><span class="enstr">Declaration</span><!--end_enstr-->
<span class="jpstr">
宣言
</span><!--end_jpstr-->
</h2><figure class="declaration"><div class="code-listing"><pre class="code-source code-source-indented" data-language="swift"><code><span><span class="syntax-keyword">mutating</span> <span class="syntax-keyword">func</span> <span class="syntax-identifier">reserveCapacity</span>(<span class="syntax-identifier">_</span> <span class="syntax-param-name">minimumCapacity</span>: <a class="symbolref" href="../../../documentation/swift/int.html"><span>Int</span></a>)
</span></code></pre></div></figure></section><section class="section" id="parameters"><h2><span class="enstr">Parameters</span><!--end_enstr-->
<span class="jpstr">
パラメータ
</span><!--end_jpstr-->
</h2><dl class="datalist"><dt class="datalist-term"><code>minimumCapacity</code></dt><dd class="datalist-description"><div class="formatted-content"><div><p><span class="enstr">The requested number of elements to store.</span><!--end_enstr-->
<span class="jpstr">
依頼された格納される要素数。
</span><!--end_jpstr-->
</p></div></div></dd></dl></section><section id="discussion" class="section"><h2><span class="enstr">Discussion</span><!--end_enstr-->
<span class="jpstr">
解説
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">If you are adding a known number of elements to an array, use this method to avoid multiple reallocations. This method ensures that the array has unique, mutable, contiguous storage, with space allocated for at least the requested number of elements.</span><!--end_enstr-->
<span class="jpstr">
あなたが数のわかった要素を配列に加えているならば、このメソッドを使って複数の再割り当てを避けてください。このメソッドは、配列が、少なくとも要請された数の要素に割り当てられた空間とともに、固有な、可変の、隣接するストレージを持つことを保証します。
</span><!--end_jpstr-->
</p><p><span class="enstr">For performance reasons, the size of the newly allocated storage might be greater than the requested capacity. Use the array’s <code class="code-voice"><span>capacity</span></code> property to determine the size of the new storage.</span><!--end_enstr-->
<span class="jpstr">
性能上の理由から、新しく割り当てられたストレージは要請された容量より大きいかもしれません。配列の<code class="code-voice"><span>capacity</span></code>プロパティを使って新しいストレージの大きさを特定してください。
</span><!--end_jpstr-->
</p></div><h3 id="2963754"><span class="enstr">Preserving an Array’s Geometric Growth Strategy</span><!--end_enstr-->
<span class="jpstr">
配列の幾何数級的増大戦略を守る
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">If you implement a custom data structure backed by an array that grows dynamically, naively calling the <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code> method can lead to worse than expected performance. Arrays need to follow a geometric allocation pattern for appending elements to achieve amortized constant-time performance. The <code class="code-voice"><span>Array</span></code> type’s <code class="code-voice"><span>append(_:)</span></code> and <code class="code-voice"><span>append(contents<wbr/>Of:)</span></code> methods take care of this detail for you, but <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code> allocates only as much space as you tell it to (padded to a round value), and no more. This avoids over-allocation, but can result in insertion not having amortized constant-time performance.</span><!--end_enstr-->
<span class="jpstr">
あなたが動的に増大する配列によって裏打ちされる誂えのデータ構造を実装するならば、無邪気に<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>メソッドを呼び出すと予想される性能よりずっと悪くなります。ならし定数時間性能を達成するために、配列は要素を追加するのにある幾何数級的なアロケートパターンに従う必要があります。<code class="code-voice"><span>Array</span></code>型の<code class="code-voice"><span>append(_:)</span></code>と<code class="code-voice"><span>append(contents<wbr/>Of:)</span></code>メソッドは、この詳細をあなたの代わりに面倒を見ます、しかし<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>はあなたがそれに伝える（ある丸め値に詰め込まれた）のと同じ程度の空間だけをアロケートして、それ以上は何もしません。これは過度のアロケーションを防ぎます、しかし挿入においてならし定数時間性能を持たない結果になります。
</span><!--end_jpstr-->
</p><p><span class="enstr">The following code declares <code class="code-voice"><span>values</span></code>, an array of integers, and the <code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code> function, which adds ten more values to the <code class="code-voice"><span>values</span></code> array on each call.</span><!--end_enstr-->
<span class="jpstr">
以下のコードは、整数の配列<code class="code-voice"><span>values</span></code>、そして呼び出し毎に10個さらに値を<code class="code-voice"><span>values</span></code>配列に加える<code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code>関数を宣言します。
</span><!--end_jpstr-->
</p><figure id="2963755"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>  var values: [Int] = [0, 1, 2, 3]

  //<span class="enstr"> Don't use 'reserveCapacity(_:)' like this</span><!--end_enstr--><span class="jpstr">（  'reserveCapacity(_:)' をこのように使わないでください）</span><!--end_jpstr-->
  func addTenQuadratic() {
      let newCount = values.count + 10
      values.reserveCapacity(newCount)
      for n in values.count..&lt;newCount {
          values.append(n)
      }
  }
</code></pre></div></div></figure><p><span class="enstr">The call to <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code> increases the <code class="code-voice"><span>values</span></code> array’s capacity by exactly 10 elements on each pass through <code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code>, which is linear growth. Instead of having constant time when averaged over many calls, the function may decay to performance that is linear in <code class="code-voice"><span>values<wbr/>.count</span></code>. This is almost certainly not what you want.</span><!--end_enstr-->
<span class="jpstr">
<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>を呼び出すことは、<code class="code-voice"><span>values</span></code>配列の容量を正確に10要素ずつ<code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code>が行われる各々で漸増します、それは線形成長です。多くの呼出しの全体を平均したとき定数時を持つのではなく、<code class="code-voice"><span>values<wbr/>.count</span></code>において線形である性能を関数が衰えさせるかもしれません。これはほとんど疑いなくあなたが望むことではありません。
</span><!--end_jpstr-->
</p><p><span class="enstr">In cases like this, the simplest fix is often to simply remove the call to <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>, and let the <code class="code-voice"><span>append(_:)</span></code> method grow the array for you.</span><!--end_enstr-->
<span class="jpstr">
このような場合に、最も簡単な修正はしばしば単純に<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>の呼出しを取り除いて、そして<code class="code-voice"><span>append(_:)</span></code>メソッドがあなたの代わりの配列を成長させるようにしてください。
</span><!--end_jpstr-->
</p><figure id="2963756"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>  func addTen() {
      let newCount = values.count + 10
      for n in values.count..&lt;newCount {
          values.append(n)
      }
  }
</code></pre></div></div></figure><p><span class="enstr">If you need more control over the capacity of your array, implement your own geometric growth strategy, passing the size you compute to <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>.</span><!--end_enstr-->
<span class="jpstr">
あなたがあなたの配列の容量に関してより制御を必要とするならば、あなた独自の幾何数級的戦略を実装して、あなたが算出する大きさを<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>に渡してください。
</span><!--end_jpstr-->
</p><p><span class="enstr">Complexity: O(<em>n</em>), where <em>n</em> is the number of elements in the array.</span><!--end_enstr-->
<span class="jpstr">
計算量：O(<em>n</em>)、ここで<em>n</em>は配列の中の要素数です。
</span><!--end_jpstr-->
</p></div></div></section></div></div><section id="relationships" class="contenttable section alt-light-container row"><div class="alt-light"><div class="section-content"><h2 class="contenttable-title"><span class="enstr">Relationships</span><!--end_enstr-->
<span class="jpstr">
関係
</span><!--end_jpstr-->
</h2><section id="from-protocol" class="contenttable-section"><div class="contenttable-container row"><div class="contenttable-section-title-container column large-3 medium-3 small-12"><h3 class="contenttable-section-title"><span class="enstr">From Protocol</span><!--end_enstr-->
<span class="jpstr">
由来プロトコル
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><div><a class="symbol-name" href="../../../documentation/swift/rangereplaceablecollection.html"><code><span>Range<wbr/>Replaceable<wbr/>Collection</span></code></a></div></div></div></section></div></div></section></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/business/">Business</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><span class="enstr">Resources</span><!--end_enstr-->
<span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><span class="enstr">Internationalization</span><!--end_enstr-->
<span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/business/distribute/">Apps for Business</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
              </ul>
              <h3><a href="/account/">Account</a></h3>
              <ul>
                <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2019 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":2963753,"title":{"content":"reserveCapacity(_:)"},"abstract":"<div><p>Reserves enough space to store the specified number of elements.<\/p><\/div>","discussion":"<div><p>If you are adding a known number of elements to an array, use this method to avoid multiple reallocations. This method ensures that the array has unique, mutable, contiguous storage, with space allocated for at least the requested number of elements.<\/p><p>For performance reasons, the size of the newly allocated storage might be greater than the requested capacity. Use the array’s <code class=\"code-voice\"><span>capacity<\/span><\/code> property to determine the size of the new storage.<\/p><\/div><h3 id=\"2963754\">Preserving an Array’s Geometric Growth Strategy<\/h3><div><p>If you implement a custom data structure backed by an array that grows dynamically, naively calling the <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code> method can lead to worse than expected performance. Arrays need to follow a geometric allocation pattern for appending elements to achieve amortized constant-time performance. The <code class=\"code-voice\"><span>Array<\/span><\/code> type’s <code class=\"code-voice\"><span>append(_:)<\/span><\/code> and <code class=\"code-voice\"><span>append(contents<wbr\/>Of:)<\/span><\/code> methods take care of this detail for you, but <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code> allocates only as much space as you tell it to (padded to a round value), and no more. This avoids over-allocation, but can result in insertion not having amortized constant-time performance.<\/p><p>The following code declares <code class=\"code-voice\"><span>values<\/span><\/code>, an array of integers, and the <code class=\"code-voice\"><span>add<wbr\/>Ten<wbr\/>Quadratic()<\/span><\/code> function, which adds ten more values to the <code class=\"code-voice\"><span>values<\/span><\/code> array on each call.<\/p><figure id=\"2963755\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>  var values: [Int] = [0, 1, 2, 3]\n\n  \/\/ Don&#x27;t use &#x27;reserveCapacity(_:)&#x27; like this\n  func addTenQuadratic() {\n      let newCount = values.count + 10\n      values.reserveCapacity(newCount)\n      for n in values.count..&lt;newCount {\n          values.append(n)\n      }\n  }\n<\/code><\/pre><\/div><\/div><\/figure><p>The call to <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code> increases the <code class=\"code-voice\"><span>values<\/span><\/code> array’s capacity by exactly 10 elements on each pass through <code class=\"code-voice\"><span>add<wbr\/>Ten<wbr\/>Quadratic()<\/span><\/code>, which is linear growth. Instead of having constant time when averaged over many calls, the function may decay to performance that is linear in <code class=\"code-voice\"><span>values<wbr\/>.count<\/span><\/code>. This is almost certainly not what you want.<\/p><p>In cases like this, the simplest fix is often to simply remove the call to <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code>, and let the <code class=\"code-voice\"><span>append(_:)<\/span><\/code> method grow the array for you.<\/p><figure id=\"2963756\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>  func addTen() {\n      let newCount = values.count + 10\n      for n in values.count..&lt;newCount {\n          values.append(n)\n      }\n  }\n<\/code><\/pre><\/div><\/div><\/figure><p>If you need more control over the capacity of your array, implement your own geometric growth strategy, passing the size you compute to <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code>.<\/p><p>Complexity: O(<em>n<\/em>), where <em>n<\/em> is the number of elements in the array.<\/p><\/div>","parameters":[{"name":"minimumCapacity","discussion":"<div><p>The requested number of elements to store.<\/p><\/div>"}],"usr":"s:s15ContiguousArrayV15reserveCapacityyySiF","name":"reserveCapacity(_:)","domain":"swift","kind":"structm","availability":[{"platform":"Xcode","current":"11.3","introduced":"10.0"}],"parent":{"id":1540726,"usr":"s:s15ContiguousArrayV","name":"ContiguousArray","domain":"swift","kind":"struct","role":"symbol","paths":["documentation\/swift\/contiguousarray"],"title":{"content":"ContiguousArray"},"abstract":{"content":"<abstract><paragraph xml:space=\"preserve\">A contiguously stored array.<\/paragraph><\/abstract>"}},"conformance":[{"id":3018297,"usr":"s:Sm15reserveCapacityyySiF","name":"reserveCapacity(_:)","domain":"swift","kind":"intfm","role":"symbol","paths":["documentation\/swift\/rangereplaceablecollection\/3018297-reservecapacity"],"title":{"content":"reserveCapacity(_:)"},"parent":{"id":1641531,"usr":"s:Sm","name":"RangeReplaceableCollection","domain":"swift","kind":"intf","role":"symbol","paths":["documentation\/swift\/rangereplaceablecollection"],"title":{"content":"RangeReplaceableCollection"}},"platforms":["iOS","macOS","Mac Catalyst","tvOS","watchOS"]}],"module":[{"title":{"content":"Swift Standard Library"},"importStatement":"<div><span class=\"syntax-identifier\">import<\/span> Swift<\/div>","paths":["documentation\/swift"],"platforms":["iOS","macOS","Mac Catalyst","tvOS","watchOS"]}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">func <\/span><span class=\"identifier\">reserve<wbr\/>Capacity<\/span><span class=\"decorator\">(Int)<\/span><\/code>","declaration":[{"content":"<span><span class=\"syntax-keyword\">mutating<\/span> <span class=\"syntax-keyword\">func<\/span> <span class=\"syntax-identifier\">reserveCapacity<\/span>(<span class=\"syntax-identifier\">_<\/span> <span class=\"syntax-param-name\">minimumCapacity<\/span>: <a class=\"symbolref\" href=\"\/documentation\/swift\/int\"><span>Int<\/span><\/a>)\n<\/span>","platforms":["iOS","macOS","Mac Catalyst","tvOS","watchOS"],"references":{"1541415":{"id":1541415,"role":"symbol","paths":["documentation\/swift\/int"],"usr":"s:Si","kind":"struct","language":"swift","domain":"swift","name":"Int","languages":["swift"],"title":{"content":"Int"}}}}],"role":"symbol","language":"swift","roleHeading":"Instance Method","languages":["swift"],"variants":{"swift":{"paths":["documentation\/swift\/contiguousarray\/2963753-reservecapacity"],"usr":"s:s15ContiguousArrayV15reserveCapacityyySiF"}},"pid":424974,"paths":["documentation\/swift\/contiguousarray\/2963753-reservecapacity"],"hierarchy":[[{"id":3000738,"role":"collection","title":{"content":"Swift"},"paths":["documentation\/swift"]},{"id":1539084,"role":"symbol","title":{"content":"Array"},"usr":"s:Sa","kind":"struct","paths":["documentation\/swift\/array"]},{"id":1540726,"role":"symbol","title":{"content":"ContiguousArray"},"usr":"s:s15ContiguousArrayV","kind":"struct","paths":["documentation\/swift\/contiguousarray"]}],[{"id":1613013,"role":"collection","title":{"content":"Foundation"},"paths":["documentation\/foundation"]},{"id":2877744,"role":"collectionGroup","title":{"content":"Collections"},"paths":["documentation\/foundation\/collections"]},{"id":1539084,"role":"symbol","title":{"content":"Array"},"usr":"s:Sa","kind":"struct","paths":["documentation\/swift\/array"]},{"id":1540726,"role":"symbol","title":{"content":"ContiguousArray"},"usr":"s:s15ContiguousArrayV","kind":"struct","paths":["documentation\/swift\/contiguousarray"]}],[{"id":3000738,"role":"collection","title":{"content":"Swift"},"paths":["documentation\/swift"]},{"id":2984803,"role":"collectionGroup","title":{"content":"Swift Standard Library"},"paths":["documentation\/swift\/swift_standard_library"]},{"id":2877122,"role":"collectionGroup","title":{"content":"Collections"},"paths":["documentation\/swift\/swift_standard_library\/collections"]},{"id":1539084,"role":"symbol","title":{"content":"Array"},"usr":"s:Sa","kind":"struct","paths":["documentation\/swift\/array"]},{"id":1540726,"role":"symbol","title":{"content":"ContiguousArray"},"usr":"s:s15ContiguousArrayV","kind":"struct","paths":["documentation\/swift\/contiguousarray"]}]],"legalNotices":{"copyright":"Copyright &copy; 2019 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script></body></html>