<!DOCTYPE html><html lang="en"><head><title>reserveCapacity(_:) - ContiguousArray | Apple Developer Documentation</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta data-pid="106536"/><link rel="stylesheet" type="text/css" href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all"/><link rel="stylesheet" type="text/css" href="../../../reference/assets/application-8b4d44bd.css" media="all"/><link rel="mask-icon" href="../../../reference/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../reference/assets/favicon.ico"/><script src="../../../reference/assets/shared-852cc781.js"></script></head><body><div id="_omniture_top">
      <script type="text/javascript">
        var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
      </script>
      <!-- script type="text/javascript" src="file://www.apple.com/metrics/scripts/s_code_h.js" --></script>
      <script type="text/javascript">
        s.pageName=AC.Tracking.pageName();
        s.channel="www.us.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US"><div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open"> <span class="ac-gn-menuanchor-label">Open Menu</span> </a>
            <a href="#" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close"> <span class="ac-gn-menuanchor-label">Close Menu</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple" href="/" id="ac-gn-firstfocus-small"> <span class="ac-gn-link-text">Apple Developer</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-bag ac-gn-bag-small" id="ac-gn-bag-small">
            <a class="ac-gn-link ac-gn-link-bag" href="/account/"> <span class="ac-gn-link-text">Account</span> <span class="ac-gn-bag-badge"></span> </a> <span class="ac-gn-bagview-caret ac-gn-bagview-caret-large"></span> </li>
        </ul>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple" href="/" id="ac-gn-firstfocus"> <span class="ac-gn-link-text">Apple Developer</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link" href="/discover/"> <span>Discover</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link" href="/design/"> <span>Design</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link" href="/develop/"> <span>Develop</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link" href="/distribute/"> <span>Distribute</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-support">
            <a class="ac-gn-link" href="/support/"> <span>Support</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link" href="/account/"> <span>Account</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-search-button" class="ac-gn-link ac-gn-link-search" href="/search/" aria-label="Search developer.apple.com"> <span class="ac-gn-search-placeholder" aria-hidden="true">Search</span> </a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
              <div class="ac-gn-searchform-wrapper">
                <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" placeholder="Search" data-placeholder-long="Search for documentation, videos, and more" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" />
                <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit"></button>
                <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search"></button>
              </div>
            </form>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults="Hit enter to search.">
            </aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Close Search">
            <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
            <span class="ac-gn-searchview-close-right"></span>
            </span>
          </button>
        </aside>
      </div></nav><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">API Reference</a><div class="breadcrumb localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul class="localnav-menu-items" aria-label="Breadcrumb"><li class="localnav-menu-item more"><a href="../../../reference/swift.html" class="localnav-menu-link">Swift Standard Library<br><span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item more"><a href="../../../reference/swift/contiguousarray.html" class="localnav-menu-link">ContiguousArray</a></li><li class="localnav-menu-item"><span class="localnav-menu-link current" aria-current="page">reserveCapacity(_:)</span></li><li class="localnav-menu-item changes-toggle-container"><span class="localnav-menu-link changes-toggle changes-toggle-none">No API Changes</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Instance Method<br><span class="jpstr">
インスタンスメソッド
</span><!--end_jpstr-->
</span><h1 class="topic-heading"><span>reserve<wbr/>Capacity(_:)</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p>Reserves enough space to store the specified number of elements.<br><span class="jpstr">
指定された数の要素を格納するのに十分な空間を確保します。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section languages" role="complementary" aria-label="Language"><p class="topic-summary-section-label  subsection-label">Language<br><span class="jpstr">
言語
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item languages-list-item current-language"><span data-language="swift" aria-current="page">Swift</span></li></ul></div><div class="topic-summary-section sdks" role="complementary" aria-label="SDK"><p class="topic-summary-section-label subsection-label">SDK</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item sdk"><span title="Available on Xcode 6.0.1 and later" aria-label="Xcode 6.0.1+, Available on Xcode 6.0.1 and later" role="text">Xcode 6.0.1+</span></li></ul></div><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label">On This Page<br><span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#declarations" class="icon icon-after icon-chevrondowncircle">Declaration<br><span class="jpstr">
宣言
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#parameters" class="icon icon-after icon-chevrondowncircle">Parameters<br><span class="jpstr">
パラメータ
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#discussion" class="icon icon-after icon-chevrondowncircle">Discussion<br><span class="jpstr">
解説
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#relationships" class="icon icon-after icon-chevrondowncircle">Relationships<br><span class="jpstr">
関係
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="declarations" class="section"><h2>Declaration<br><span class="jpstr">
宣言
</span><!--end_jpstr-->
</h2><div class=""><figure class="declaration"><div class="code-listing"><pre class="code-source code-source-indented" data-language="swift"><code><div><span class="syntax-keyword">mutating</span> <span class="syntax-keyword">func</span> <span class="syntax-identifier">reserveCapacity</span>(<span class="syntax-identifier">_</span> <span class="syntax-param-name">minimumCapacity</span>: <span class="syntax-type">Int</span>)
</div></code></pre></div></figure></div></section><section id="parameters" class="section"><h2>Parameters<br><span class="jpstr">
パラメータ
</span><!--end_jpstr-->
</h2><dl class="params"><dt><code class="param-name"><span>minimum<wbr/>Capacity</span></code></dt><dd><div class="param-discussion formatted-content"><div><p>The requested number of elements to store.<br><span class="jpstr">
依頼された格納される要素数。
</span><!--end_jpstr-->
</p></div></div></dd></dl></section><section id="discussion" class="section"><h2>Discussion<br><span class="jpstr">
解説
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p>If you are adding a known number of elements to an array, use this method to avoid multiple reallocations. This method ensures that the array has unique, mutable, contiguous storage, with space allocated for at least the requested number of elements.<br><span class="jpstr">
あなたが数のわかった要素を配列に加えているならば、このメソッドを使って複数の再割り当てを避けてください。このメソッドは、配列が、少なくとも要請された数の要素に割り当てられた空間とともに、固有な、可変の、隣接するストレージを持つことを保証します。
</span><!--end_jpstr-->
</p><p>For performance reasons, the size of the newly allocated storage might be greater than the requested capacity. Use the array’s <code class="code-voice"><span>capacity</span></code> property to determine the size of the new storage.<br><span class="jpstr">
性能上の理由から、新しく割り当てられたストレージは要請された容量より大きいかもしれません。配列の<code class="code-voice"><span>capacity</span></code>プロパティを使って新しいストレージの大きさを特定してください。
</span><!--end_jpstr-->
</p></div><h3 id="2849625">Preserving an Array’s Geometric Growth Strategy<br><span class="jpstr">
配列の幾何数級的増大戦略を守る
</span><!--end_jpstr-->
</h3><div><p>If you implement a custom data structure backed by an array that grows dynamically, naively calling the <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code> method can lead to worse than expected performance. Arrays need to follow a geometric allocation pattern for appending elements to achieve amortized constant-time performance. The <code class="code-voice"><span>Array</span></code> type’s <code class="code-voice"><span>append(_:)</span></code> and <code class="code-voice"><span>append(contents<wbr/>Of:)</span></code> methods take care of this detail for you, but <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code> allocates only as much space as you tell it to (padded to a round value), and no more. This avoids over-allocation, but can result in insertion not having amortized constant-time performance.<br><span class="jpstr">
あなたが動的に増大する配列によって裏打ちされる誂えのデータ構造を実装するならば、無邪気に<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>メソッドを呼び出すと予想される性能よりずっと悪くなります。ならし定数時間性能を達成するために、配列は要素を追加するのにある幾何数級的なアロケートパターンに従う必要があります。<code class="code-voice"><span>Array</span></code>型の<code class="code-voice"><span>append(_:)</span></code>と<code class="code-voice"><span>append(contents<wbr/>Of:)</span></code>メソッドは、この詳細をあなたの代わりに面倒を見ます、しかし<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>はあなたがそれに伝える（ある丸め値に詰め込まれた）のと同じ程度の空間だけをアロケートして、それ以上は何もしません。これは過度のアロケーションを防ぎます、しかし挿入においてならし定数時間性能を持たない結果になります。
</span><!--end_jpstr-->
</p><p>The following code declares <code class="code-voice"><span>values</span></code>, an array of integers, and the <code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code> function, which adds ten more values to the <code class="code-voice"><span>values</span></code> array on each call.<br><span class="jpstr">
以下のコードは、整数の配列<code class="code-voice"><span>values</span></code>、そして呼び出し毎に10個さらに値を<code class="code-voice"><span>values</span></code>配列に加える<code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code>関数を宣言します。
</span><!--end_jpstr-->
</p><figure id="2849626"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>  var values: [Int] = [0, 1, 2, 3]

  // Don&#x27;t use &#x27;reserveCapacity(_:)&#x27; like this
  func addTenQuadratic() {
      let newCount = values.count + 10
      values.reserveCapacity(newCount)
      for n in values.count..&lt;newCount {
          values.append(n)
      }
  }
</code></pre></div></div></figure><p>The call to <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code> increases the <code class="code-voice"><span>values</span></code> array’s capacity by exactly 10 elements on each pass through <code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code>, which is linear growth. Instead of having constant time when averaged over many calls, the function may decay to performance that is linear in <code class="code-voice"><span>values<wbr/>.count</span></code>. This is almost certainly not what you want.<br><span class="jpstr">
<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>を呼び出すことは、<code class="code-voice"><span>values</span></code>配列の容量を正確に10要素ずつ<code class="code-voice"><span>add<wbr/>Ten<wbr/>Quadratic()</span></code>が行われる各々で漸増します、それは線形成長です。多くの呼出しの全体を平均したとき定数時を持つのではなく、<code class="code-voice"><span>values<wbr/>.count</span></code>において線形である性能を関数が衰えさせるかもしれません。これはほとんど疑いなくあなたが望むことではありません。
</span><!--end_jpstr-->
</p><p>In cases like this, the simplest fix is often to simply remove the call to <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>, and let the <code class="code-voice"><span>append(_:)</span></code> method grow the array for you.<br><span class="jpstr">
このような場合に、最も簡単な修正はしばしば単純に<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>の呼出しを取り除いて、そして<code class="code-voice"><span>append(_:)</span></code>メソッドがあなたの代わりの配列を成長させるようにしてください。
</span><!--end_jpstr-->
</p><figure id="2849627"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>  func addTen() {
      let newCount = values.count + 10
      for n in values.count..&lt;newCount {
          values.append(n)
      }
  }
</code></pre></div></div></figure><p>If you need more control over the capacity of your array, implement your own geometric growth strategy, passing the size you compute to <code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>.<br><span class="jpstr">
あなたがあなたの配列の容量に関してより制御を必要とするならば、あなた独自の幾何数級的戦略を実装して、あなたが算出する大きさを<code class="code-voice"><span>reserve<wbr/>Capacity(_:)</span></code>に渡してください。
</span><!--end_jpstr-->
</p><p>Complexity: O(<em>n</em>), where <em>n</em> is the number of elements in the array.<br><span class="jpstr">
計算量：O(<em>n</em>)、ここで<em>n</em>は配列の中の要素数です。
</span><!--end_jpstr-->
</p></div></div></section></div></div><section id="relationships" class="contenttable section alt-light row"><div class="section-content"><h2 class="contenttable-title">Relationships<br><span class="jpstr">
関係
</span><!--end_jpstr-->
</h2><section id="from-protocol" class="contenttable-section"><div class="contenttable-container row"><div class="column large-3 medium-3 small-12"><h3 class="contenttable-section-title">From Protocol<br><span class="jpstr">
由来プロトコル
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><a class="symbol-name" href="../../../reference/swift/rangereplaceablecollection.html"><code><span>Range<wbr/>Replaceable<wbr/>Collection</span></code></a></div></div></section></div></section></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/reference>API Reference</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/enterprise/">Enterprise</a></li>
                <li><a href="/education/">Education</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/cases/">Accessories</a></li>
                <li><a href="/design/adaptivity/">Adaptivity</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/fonts/">Fonts</a></li>
                <li><a href="/videos/design/">Design Videos</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Guidelines</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/download/">Downloads</a></li>
                <li><a href="https://developer.apple.com/reference/">API Reference</a></li>
                <li><a href="/library/prerelease/content/navigation/">Guides</a></li>
                <li><a href="/library/prerelease/content/navigation/#section=Resource%20Types&topic=Sample%20Code">Sample Code</a></li>
                <li><a href="/videos/">Videos</a></li>
              </ul>

            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="https://itunesconnect.apple.com/">iTunes Connect</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="/enterprise/">Enterprise</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/contact/">Contact Us</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2017 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><div id="bootstrap"><script id="bootstrap-data" type="application/json">{"id":1538850,"title":{"content":"reserveCapacity(_:)"},"parameters":[{"name":"minimumCapacity","discussion":"<div><p>The requested number of elements to store.<\/p><\/div>"}],"abstract":"<div><p>Reserves enough space to store the specified number of elements.<\/p><\/div>","discussion":"<div><p>If you are adding a known number of elements to an array, use this method to avoid multiple reallocations. This method ensures that the array has unique, mutable, contiguous storage, with space allocated for at least the requested number of elements.<\/p><p>For performance reasons, the size of the newly allocated storage might be greater than the requested capacity. Use the array’s <code class=\"code-voice\"><span>capacity<\/span><\/code> property to determine the size of the new storage.<\/p><\/div><h3 id=\"2849625\">Preserving an Array’s Geometric Growth Strategy<\/h3><div><p>If you implement a custom data structure backed by an array that grows dynamically, naively calling the <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code> method can lead to worse than expected performance. Arrays need to follow a geometric allocation pattern for appending elements to achieve amortized constant-time performance. The <code class=\"code-voice\"><span>Array<\/span><\/code> type’s <code class=\"code-voice\"><span>append(_:)<\/span><\/code> and <code class=\"code-voice\"><span>append(contents<wbr\/>Of:)<\/span><\/code> methods take care of this detail for you, but <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code> allocates only as much space as you tell it to (padded to a round value), and no more. This avoids over-allocation, but can result in insertion not having amortized constant-time performance.<\/p><p>The following code declares <code class=\"code-voice\"><span>values<\/span><\/code>, an array of integers, and the <code class=\"code-voice\"><span>add<wbr\/>Ten<wbr\/>Quadratic()<\/span><\/code> function, which adds ten more values to the <code class=\"code-voice\"><span>values<\/span><\/code> array on each call.<\/p><figure id=\"2849626\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>  var values: [Int] = [0, 1, 2, 3]\n\n  \/\/ Don&#x27;t use &#x27;reserveCapacity(_:)&#x27; like this\n  func addTenQuadratic() {\n      let newCount = values.count + 10\n      values.reserveCapacity(newCount)\n      for n in values.count..&lt;newCount {\n          values.append(n)\n      }\n  }\n<\/code><\/pre><\/div><\/div><\/figure><p>The call to <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code> increases the <code class=\"code-voice\"><span>values<\/span><\/code> array’s capacity by exactly 10 elements on each pass through <code class=\"code-voice\"><span>add<wbr\/>Ten<wbr\/>Quadratic()<\/span><\/code>, which is linear growth. Instead of having constant time when averaged over many calls, the function may decay to performance that is linear in <code class=\"code-voice\"><span>values<wbr\/>.count<\/span><\/code>. This is almost certainly not what you want.<\/p><p>In cases like this, the simplest fix is often to simply remove the call to <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code>, and let the <code class=\"code-voice\"><span>append(_:)<\/span><\/code> method grow the array for you.<\/p><figure id=\"2849627\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>  func addTen() {\n      let newCount = values.count + 10\n      for n in values.count..&lt;newCount {\n          values.append(n)\n      }\n  }\n<\/code><\/pre><\/div><\/div><\/figure><p>If you need more control over the capacity of your array, implement your own geometric growth strategy, passing the size you compute to <code class=\"code-voice\"><span>reserve<wbr\/>Capacity(_:)<\/span><\/code>.<\/p><p>Complexity: O(<em>n<\/em>), where <em>n<\/em> is the number of elements in the array.<\/p><\/div>","usr":"s:FVs15ContiguousArray15reserveCapacityFSiT_","kind":"structm","availability":[{"platform":"xcode","current":"8.3","introduced":"6.0.1"}],"parent":{"id":1540726,"usr":"s:Vs15ContiguousArray","name":"ContiguousArray","kind":"struct","paths":["reference\/swift\/contiguousarray"],"title":{"content":"ContiguousArray"},"abstract":{"content":"<abstract><paragraph xml:space=\"preserve\">A contiguously stored array.<\/paragraph><\/abstract>"}},"conformance":[{"id":1786248,"usr":"s:FPs26RangeReplaceableCollection15reserveCapacityFwx13IndexDistanceT_","name":"reserveCapacity(_:)","kind":"intfm","paths":["reference\/swift\/rangereplaceablecollection\/1786248-reservecapacity"],"title":{"content":"reserveCapacity(_:)"},"parent":{"id":1641531,"usr":"s:Ps26RangeReplaceableCollection","name":"RangeReplaceableCollection","kind":"intf","paths":["reference\/swift\/rangereplaceablecollection"],"title":{"content":"RangeReplaceableCollection"}},"platforms":["ios","macos","tvos","watchos"]}],"module":[{"title":{"content":"Swift Standard Library"},"importStatement":"<div><span class=\"syntax-identifier\">import<\/span> Swift<\/div>","paths":["reference\/swift"],"platforms":["ios","macos","tvos","watchos"]}],"displayName":"<code class=\"display-name\"><span class=\"decorator\">func <\/span><span class=\"identifier\">reserve<wbr\/>Capacity<\/span><span class=\"decorator\">(Int)<\/span><\/code>","declaration":[{"content":"<div><span class=\"syntax-keyword\">mutating<\/span> <span class=\"syntax-keyword\">func<\/span> <span class=\"syntax-identifier\">reserveCapacity<\/span>(<span class=\"syntax-identifier\">_<\/span> <span class=\"syntax-param-name\">minimumCapacity<\/span>: <span class=\"syntax-type\">Int<\/span>)\n<\/div>","platforms":["ios","macos","tvos","watchos"]}],"languages":["swift"],"variants":{"swift":{"paths":["reference\/swift\/contiguousarray\/1538850-reservecapacity"],"usr":"s:FVs15ContiguousArray15reserveCapacityFSiT_"}},"pid":106536,"role":"symbol","language":"swift","paths":["reference\/swift\/contiguousarray\/1538850-reservecapacity"],"hierarchy":[[{"id":1613754,"role":"collection","title":{"content":"Swift Standard Library"},"paths":["reference\/swift"]},{"id":1540726,"role":"symbol","title":{"content":"ContiguousArray"},"usr":"s:Vs15ContiguousArray","kind":"struct","paths":["reference\/swift\/contiguousarray"]}]]}</script><script src="../../../reference/assets/TopicDetail-43a8bd7f.js"></script></div></body></html>