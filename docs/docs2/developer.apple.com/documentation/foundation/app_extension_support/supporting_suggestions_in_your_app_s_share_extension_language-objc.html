<!DOCTYPE html><html lang="en" data-reactroot=""><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Supporting Suggestions in Your App’s Share Extension | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="492525"/><link href="../../../documentation/assets/application-e5bb1544.css" media="all" rel="stylesheet" type="text/css"/><noscript><link href="../../../documentation/assets/nojs-c6be9131.css" media="all" rel="stylesheet" type="text/css"/></noscript><link rel="mask-icon" href="../../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../../documentation/assets/favicon.ico"/><script src="../../../documentation/assets/shared-b7676010.js"></script></head><body><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><aside id="ac-gn-segmentbar" class="ac-gn-segmentbar" lang="en-US" dir="ltr"></aside><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US" dir="ltr" data-store-locale="us" data-store-api="/[storefront]/shop/bag/status" data-search-locale="en_US" data-search-api="/search-services/suggestions/">
      <div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open">
              <span class="ac-gn-menuanchor-label">Global Nav Open Menu</span>
            </a>
            <a href="#" role="button" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close">
              <span class="ac-gn-menuanchor-label">Global Nav Close Menu</span>
            </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus-small">
              <span class="ac-gn-link-text">Apple Developer</span>
            </a>
          </li>
        </ul>
        <div class="ac-gn-search-placeholder-container" role="search">
          <div class="ac-gn-search ac-gn-search-small">
            <a id="ac-gn-link-search-small" class="ac-gn-link" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer">
              </a><div class="ac-gn-search-placeholder-bar">
                <div class="ac-gn-search-placeholder-input">
                  <div class="ac-gn-search-placeholder-input-text" aria-hidden="true">
                    <div class="ac-gn-link-search ac-gn-search-placeholder-input-icon"></div>
                    <span class="ac-gn-search-placeholder">Search Developer</span>
                  </div>
                </div>
                <div class="ac-gn-searchview-close ac-gn-searchview-close-small ac-gn-search-placeholder-searchview-close">
                  <span class="ac-gn-searchview-close-cancel" aria-hidden="true">Cancel</span>
                </div>
              </div>
            </a>
          </div>
        </div>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple-developer" href="/" data-analytics-title="appledeveloper home" id="ac-gn-firstfocus">
              <span class="ac-gn-link-text">Apple Developer</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link ac-gn-link-discover" href="/discover/" data-analytics-title="discover">
              <span class="ac-gn-link-text">Discover</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link ac-gn-link-design" href="/design/" data-analytics-title="design">
              <span class="ac-gn-link-text">Design</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link ac-gn-link-develop" href="/develop/" data-analytics-title="develop">
              <span class="ac-gn-link-text">Develop</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link ac-gn-link-distribute" href="/distribute/" data-analytics-title="distribute">
              <span class="ac-gn-link-text">Distribute</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-dsupport">
            <a class="ac-gn-link ac-gn-link-dsupport" href="/support/" data-analytics-title="dsupport">
              <span class="ac-gn-link-text">Support</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link ac-gn-link-account" href="/account/" data-analytics-title="account">
              <span class="ac-gn-link-text">Account</span>
              </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-link-search" class="ac-gn-link ac-gn-link-search" href="/search/" data-analytics-title="search" data-analytics-click="search" data-analytics-intrapage-link aria-label="Search Developer"></a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <div class="ac-gn-searchview-bar">
              <div class="ac-gn-searchview-bar-wrapper">
                <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
                  <div class="ac-gn-searchform-wrapper">
                    <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" aria-label="Search Developer" placeholder="Search Developer" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="true" aria-owns="quicklinks suggestions" />
                    <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit Search"></button>
                    <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search">
                        <span class="ac-gn-searchform-reset-background"></span>
                      </button>
                  </div>
                </form>
                <button id="ac-gn-searchview-close-small" class="ac-gn-searchview-close ac-gn-searchview-close-small" aria-label="Cancel Search">
                    <span class="ac-gn-searchview-close-cancel" aria-hidden="true">
                      Cancel
                    </span>
                  </button>
              </div>
            </div>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults=""></aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Cancel Search">
              <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
                <span class="ac-gn-searchview-close-right"></span>
              </span>
            </button>
        </aside>
          </div>
    </nav><div class="ac-gn-blur"></div><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/foundation_language-objc.html"><span class="enstr">Foundation</span><!--end_enstr-->
<span class="jpstr">
ファウンデーション
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../../documentation/foundation/app_extension_support_language-objc.html"><span class="enstr">App Extension Support</span><!--end_enstr-->
<span class="jpstr">
アプリ拡張サポート
</span><!--end_jpstr-->
</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current"><span class="enstr">Supporting Suggestions in Your App’s Share Extension</span><!--end_enstr-->
<span class="jpstr">
あなたのアプリの共有拡張において提案をサポートする
</span><!--end_jpstr-->
</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="3"><li class="localnav-menu-setting language-container"><div class="language-toggle-container"><label for="language-toggle" class="language-toggle-label">Language:</label><select id="language-toggle" class="language-dropdown localnav-menu-link" style="width:auto"><option value="swift">Swift</option><option selected="" value="occ">Objective-C</option></select></div><div class="language-list-container"><span class="localnav-menu-setting-label">Language:</span><ul class="language-list"><li class="language-list-item"><a href="../../../documentation/foundation/app_extension_support/supporting_suggestions_in_your_app_s_share_extension.html" class="localnav-menu-setting-link">Swift</a></li><li class="language-list-item"><span data-language="objc" aria-current="page" class="current-language">Objective-C</span></li></ul></div></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Article</span><h1 class="topic-heading"><span><span class="enstr">Supporting Suggestions in Your App’s Share Extension</span><!--end_enstr-->
<span class="jpstr">
あなたのアプリの共有拡張において提案をサポートする
</span><!--end_jpstr-->
</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><span class="enstr">Make your messaging app available for share sheet suggestions and use SiriKit intents to populate your app’s share extension.</span><!--end_enstr-->
<span class="jpstr">
あなたのメッセージングアプリを共有シート提案それらに対して利用可能にして、そしてSiriKitインテント（要望、意図）それらを使ってあなたのアプリのもつ共有拡張を満たします。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section frameworks" role="complementary" aria-label="Framework"><p class="topic-summary-section-label subsection-label"><span class="enstr">Framework</span><!--end_enstr-->
<span class="jpstr">
フレームワーク
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><span>UIKit</span></li></ul></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="overview" class="section"><h2><span class="enstr">Overview</span><!--end_enstr-->
<span class="jpstr">
概要
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><span class="enstr">Using the iOS share sheet, users can launch your messaging app instantly from a list of suggestions when sharing content like a link, image, video, or file. The share sheet suggests conversations with people in apps that the user interacts with frequently, and updates its suggestions over time based on the user’s favorite apps and conversations. Figure 1 shows suggestions that include a mix of apps and conversations with contacts.</span><!--end_enstr-->
<span class="jpstr">
iOS共有シートを使用して、利用者はあなたのメッセージングアプリを簡単にいくつかの提案の一覧から起動できます、リンク、画像、動画、またはファイルのような共有コンテンツを共有する時に。共有シートは、ユーザが頻繁に相互作用するアプリにおいて人々との会話を提案します、そしてそれの提案をユーザのお気に入りのアプリと会話に基づき時が経つに連れて更新します。図 1 は、いくつかの提案を示します、それらはアプリいくつかと連絡先との会話いくつかの混合を含んでいます。
</span><!--end_jpstr-->
 </p><figure id="3379658"><figcaption><strong class="caption-title"><span class="enstr">Figure 1</span><!--end_enstr-->
<span class="jpstr">
図 1
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">A share sheet provides a list of suggestions</span><!--end_enstr-->
<span class="jpstr">
共有シートは提案のリストを提供します。
</span><!--end_jpstr-->
</p></div></div></figcaption><img class="centered-block" src="../../../../docs-assets.developer.apple.com/published/682efb29af/c23647d5-dfff-4316-b527-983430e7b436.png" srcSet="../../../../docs-assets.developer.apple.com/published/682efb29af/c23647d5-dfff-4316-b527-983430e7b436.png 2x" alt="A screenshot of an iPhone. The upper half shows the apple.com website in Safari. The bottom half of the screen shows the share sheet after the user has decided to share the website with someone. iOS suggests conversations in the Messages app and another app." width="375" height="auto"/></figure><p><span class="enstr">To allow iOS to include conversations from your messaging app in the list of suggestions:</span><!--end_enstr-->
<span class="jpstr">
あなたのメッセージングアプリからさまざまな会話をその提案のリストに含めるようiOSに許可するには：
</span><!--end_jpstr-->
</p><ul><li><p><span class="enstr">Add a share extension to your app as described in <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/Share.html#//apple_ref/doc/uid/TP40014214-CH12-SW2">Understand Share Extensions</a>.</span><!--end_enstr-->
<span class="jpstr">
ある共有拡張をあなたのアプリに加えてください、<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/Share.html#//apple_ref/doc/uid/TP40014214-CH12-SW2">Understand Share Extensions</a>で記述されるように。
</span><!--end_jpstr-->
</p></li><li><p><span class="enstr">Declare support for the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a> intent type.</span><!--end_enstr-->
<span class="jpstr">
<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>インテント型に対するサポートを宣言してください。
</span><!--end_jpstr-->
</p></li><li><p><span class="enstr">Donate an <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a> in your messaging app and its share extension.</span><!--end_enstr-->
<span class="jpstr">
<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>をあなたのメッセージングアプリとそれの共有拡張に提供してください。
</span><!--end_jpstr-->
</p></li></ul><p><span class="enstr">As the user selects an app from the list of suggestions, the app’s sharing interface, implemented as a share extension, accesses additional metadata. iOS provides the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a> for you to prepopulate the interface of your app’s share extension.</span><!--end_enstr-->
<span class="jpstr">
ユーザがあるアプリを提案のリストから選ぶとき、共有拡張として実装される、アプリのもつ共有インターフェイスは、追加のメタデータにアクセスします。iOSは<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>をあなたのために提供して、あなたのアプリのもつ共有拡張のインターフェイスをあらかじめ満たします。
</span><!--end_jpstr-->
</p><p><span class="enstr">For example, you can access the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/2866586-conversationidentifier_language-objc"><code><span>conversation<wbr/>Identifier</span></code></a> property and preselect a conversation with which to share content so the user doesn’t need to search for a contact in a list, or type a friend’s name. Figure 2 shows an app’s sharing interface using the default system UI that’s based on an <a class="symbol-name" href="https://developer.apple.com/documentation/social/slcomposeviewcontroller_language-objc"><code><span>SLCompose<wbr/>View<wbr/>Controller</span></code></a>, with the recipient (Juan Chavez) already filled in.</span><!--end_enstr-->
<span class="jpstr">
例えば、あなたは<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/2866586-conversationidentifier_language-objc"><code><span>conversation<wbr/>Identifier</span></code></a>プロパティにアクセスして、そしてそれと内容を共有することになるある会話をあらかじめ選択できます、それでユーザはある連絡先を捜す、または友達の名前をタイプする必要がありません。図 2 は、<a class="symbol-name" href="https://developer.apple.com/documentation/social/slcomposeviewcontroller_language-objc"><code><span>SLCompose<wbr/>View<wbr/>Controller</span></code></a>に基づく省略時のシステムUIを使っているあるアプリのもつ共有インターフェイスを示します、既に記入された受取人（Juan Chavez）を使います。
</span><!--end_jpstr-->
</p><figure id="3379657"><figcaption><strong class="caption-title"><span class="enstr">Figure 2</span><!--end_enstr-->
<span class="jpstr">
図 2
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Prepopulating the share extension's interface with a conversation</span><!--end_enstr-->
<span class="jpstr">
共有拡張のインターフェイスをある会話であらかじめ満たす
</span><!--end_jpstr-->
</p></div></div></figcaption><img class="centered-block" src="../../../../docs-assets.developer.apple.com/published/780ba11531/6d5c5ba9-d704-49af-996e-d487d481d256.png" srcSet="../../../../docs-assets.developer.apple.com/published/780ba11531/6d5c5ba9-d704-49af-996e-d487d481d256.png 2x" alt="A screenshot of an iPhone with the Safari browser displaying the apple.com homepage. The user tapped the Share button and selected an app from the list of suggestions. The platforms default sharing interface, based on an SLComposeViewController, is visible. Based on the available metadata, the extension has prepopulated the interface with a recipient (Juan Chavez)." width="375" height="auto"/></figure></div><h3 id="3362225"><span class="enstr">Add a Share Extension to Your App</span><!--end_enstr-->
<span class="jpstr">
共有拡張をあなたのアプリに加える
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">To add a share extension to your app, open your app’s project in Xcode and select File &gt; New &gt; Target from the menu bar. Xcode presents a sheet that contains templates for different kinds of targets. Select the share extension template from the iOS pane and follow the steps in Xcode’s interface to add one to your app. To learn more, see <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/Share.html#//apple_ref/doc/uid/TP40014214-CH12-SW2">Understand Share Extensions</a> in the App Extension Programming Guide.</span><!--end_enstr-->
<span class="jpstr">
共有拡張をあなたのアプリに加えるには、あなたのアプリのプロジェクトをXcodにおいて開いて、File &gt; New &gt; Target をメニューバーから選んでください。Xcodeは、異なる種類のターゲットに対するテンプレートを含むあるシートを提示します。共有拡張テンプレートをiOSペインから選んで、Xcodeのインターフェイスにおいて段階に従ってそれをあなたのアプリに加えてください。さらに学習するには、<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/Share.html#//apple_ref/doc/uid/TP40014214-CH12-SW2">Understand Share Extensions</a>をApp Extension Programming Guideで見てください。
</span><!--end_jpstr-->
</p></div><h3 id="3343360"><span class="enstr">Support the Send Message Intent</span><!--end_enstr-->
<span class="jpstr">
送信メッセージインテントをサポートする
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">Open the Share extension’s <code class="code-voice"><span>Info<wbr/>.plist</span></code>, and expand the <a href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension_language-objc">NSExtension</a> and <a href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension/nsextensionattributes_language-objc">NSExtensionAttributes</a> keys. Next, add a new entry with the <a class="symbol-name" href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension/intentssupported_language-objc"><code><span>Intents<wbr/>Supported</span></code></a> key and select <code class="code-voice"><span>Array</span></code> for its value type. Add the string <code class="code-voice"><span>INSend<wbr/>Message<wbr/>Intent</span></code> as a new value to the array to declare support for the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a> intent type, as shown in Figure 3.</span><!--end_enstr-->
<span class="jpstr">
Share拡張のもつ<code class="code-voice"><span>Info<wbr/>.plist</span></code>を開いてください、そして<a href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension_language-objc">NSExtension</a>と<a href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension/nsextensionattributes_language-objc">NSExtensionAttributes</a>キーを展開してください。次に、新しい登録項目を<a class="symbol-name" href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension/intentssupported_language-objc"><code><span>Intents<wbr/>Supported</span></code></a>キーで加えて、<code class="code-voice"><span>Array</span></code>をそれの値型に選んでください。文字列<code class="code-voice"><span>INSend<wbr/>Message<wbr/>Intent</span></code>を新しい値として配列に加えて、<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>インテント型に対するサボートを宣言してください、図 3 で示されるように。
</span><!--end_jpstr-->
</p><figure id="3358270"><figcaption><strong class="caption-title"><span class="enstr">Figure 3</span><!--end_enstr-->
<span class="jpstr">
図 3
</span><!--end_jpstr-->
</strong> <div class="caption-content formatted-content"><div><p><span class="enstr">Add a new entry under the NSExtensionAttributes key</span><!--end_enstr-->
<span class="jpstr">
新しい登録項目をNSExtensionAttributesキーの下に加える
</span><!--end_jpstr-->
</p></div></div></figcaption><img class="centered-block" src="../../../../docs-assets.developer.apple.com/published/b1fc567406/d544f8e4-1dae-4f6e-b1f5-9573591add01.png" srcSet="../../../../docs-assets.developer.apple.com/published/b1fc567406/d544f8e4-1dae-4f6e-b1f5-9573591add01.png 2x" alt="A screenshot of Xcode showing the Info.plist file for a Share extension that the developer created using Xcode's share extension template. The entries below the NSExtension key are expanded and show the IntentsSupported key with an item that has the value set to INSendMessageIntent. The NSExtensionActivationRule entry is set to TRUEPREDICATE." width="898" height="auto"/></figure><p><span class="enstr">To make debugging easier, the value of <a href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension/nsextensionattributes/nsextensionactivationrule_language-objc">NSExtensionActivationRule</a> is set to <code class="code-voice"><span>TRUEPREDICATE</span></code> when you first add a share extension using Xcode’s template. Replace it with valid activation rules as described in <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html#//apple_ref/doc/uid/TP40014214-CH21-SW8">Declaring Supported Data Types for a Share or Action Extension</a> before submitting your app for review.</span><!--end_enstr-->
<span class="jpstr">
より簡単にデバッグするために、<a href="https://developer.apple.com/documentation/bundleresources/information_property_list/nsextension/nsextensionattributes/nsextensionactivationrule_language-objc">NSExtensionActivationRule</a>の値は<code class="code-voice"><span>TRUEPREDICATE</span></code>に設定されます、あなたが最初に共有拡張をXcodeテンプレートを使って加える時に。それを<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html#//apple_ref/doc/uid/TP40014214-CH21-SW8">Declaring Supported Data Types for a Share or Action Extension</a>で記述されるような有効な活動規則で置き換えてください、レビューのためにあなたのアプリを提出する前に。
</span><!--end_jpstr-->
</p></div><h3 id="3362244"><span class="enstr">Donate a Send Message Intent</span><!--end_enstr-->
<span class="jpstr">
送信メッセージインテントを提供する
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">Donate an <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a> when the user sends a message in your app and its share extension, and not in any other circumstances. For example, don’t donate an intent when the user hasn’t actually sent a message.</span><!--end_enstr-->
<span class="jpstr">
<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>を、ユーザがあるメッセージをあなたのアプリおよびそれの共有拡張において、そして何か他の事情においてではなく、送信する時に提供してください。例えば、あるインテントをユーザが実際にメッセージを送信していないときに提供しないでください。
</span><!--end_jpstr-->
</p><p><span class="enstr">As you initialize the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a> object, provide metadata that will be available later when the user choses your app’s share extension from the list of suggestions. The following code donates an <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a> with a <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/1778199-groupname_language-objc"><code><span>group<wbr/>Name</span></code></a>, a <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/2866586-conversationidentifier_language-objc"><code><span>conversation<wbr/>Identifier</span></code></a>, and an <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inimage_language-objc"><code><span>INImage</span></code></a>.</span><!--end_enstr-->
<span class="jpstr">
あなたが<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>オブジェクトを初期化するとき、後でユーザがあなたのアプリのもつ共有拡張を提案それらのリストから選ぶ時に利用可能になるメタデータを提供してください。以下のコードは、<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>を<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/1778199-groupname_language-objc"><code><span>group<wbr/>Name</span></code></a>、<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/2866586-conversationidentifier_language-objc"><code><span>conversation<wbr/>Identifier</span></code></a>、そして<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inimage_language-objc"><code><span>INImage</span></code></a>とともに提供します。
</span><!--end_jpstr-->
 </p><figure id="3362245"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>//<span class="enstr"> Create an INSendMessageIntent to donate an intent for a conversation with Juan Chavez.</span><!--end_enstr--><span class="jpstr">（ INSendMessageIntent を作成してあるインテントを Juan Chavez との会話に対して提供する。）</span><!--end_jpstr-->
let groupName = INSpeakableString(spokenPhrase: "Juan Chavez")
let sendMessageIntent = INSendMessageIntent(recipients: nil,
                                            content: nil,
                                            speakableGroupName: groupName,
                                            conversationIdentifier: "sampleConversationIdentifier",
                                            serviceName: nil,
                                            sender: nil)

//<span class="enstr"> Add the user's avatar to the intent.</span><!--end_enstr--><span class="jpstr">（ ユーザのアバターをその意図に加える。）</span><!--end_jpstr-->
let image = INImage(named: "Juan Chavez")
sendMessageIntent.setImage(image, forParameterNamed: \.speakableGroupName)

//<span class="enstr"> Donate the intent.</span><!--end_enstr--><span class="jpstr">（ その意図を提供する。）</span><!--end_jpstr-->
let interaction = INInteraction(intent: sendMessageIntent, response: nil)
interaction.donate(completion: { error in
    if error != nil {
        //<span class="enstr"> Add error handling here.</span><!--end_enstr--><span class="jpstr">（ エラー処理をここで加える。）</span><!--end_jpstr-->
    } else {
        //<span class="enstr"> Do something, e.g. send the content to a contact.</span><!--end_enstr--><span class="jpstr">（ 何かする、例えば内容をある連絡先に送信する。）</span><!--end_jpstr-->
    }
})
</code></pre></div></div></figure><p><span class="enstr">When iOS includes a conversation within your app as a suggestion in the share sheet, it displays your app’s icon along with the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inimage_language-objc"><code><span>INImage</span></code></a> you associated with your <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>. If there’s no <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inimage_language-objc"><code><span>INImage</span></code></a> set on the intent, iOS uses the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson/1639130-image_language-objc"><code><span>image</span></code></a> property from the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson_language-objc"><code><span>INPerson</span></code></a> object for each recipient. If the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson_language-objc"><code><span>INPerson</span></code></a> object’s <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson/1639130-image_language-objc"><code><span>image</span></code></a> is <code class="code-voice"><span>nil</span></code>, iOS looks up the corresponding contact in the Contacts app using the person’s <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson/1638320-contactidentifier_language-objc"><code><span>contact<wbr/>Identifier</span></code></a>. The share sheet then uses the contact’s image.</span><!--end_enstr-->
<span class="jpstr">
iOSがある会話をあなたのアプリ内で共有シートの中のある提案として含む場合、それはあなたのアプリのもつアイコンを表示します、それだけでなくあなたがあなたの<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>と結びつける<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inimage_language-objc"><code><span>INImage</span></code></a>も一緒に。そのインテント上に設定される<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inimage_language-objc"><code><span>INImage</span></code></a>がないならば、iOSは<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson/1639130-image_language-objc"><code><span>image</span></code></a>プロパティを<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson_language-objc"><code><span>INPerson</span></code></a>オブジェクトから各受取人に対して使います。<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson_language-objc"><code><span>INPerson</span></code></a>オブジェクトのもつ<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson/1639130-image_language-objc"><code><span>image</span></code></a>が<code class="code-voice"><span>nil</span></code>ならば、iOSは相当する連絡先を「連絡先」アプリにおいて<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/inperson/1638320-contactidentifier_language-objc"><code><span>contact<wbr/>Identifier</span></code></a>を使って捜します。共有シートはそれからその連絡先のもつ画像を使います。
</span><!--end_jpstr-->
</p><aside class="aside aside-tip" aria-label="tip"><p class="aside-name"><span class="enstr">Tip</span><!--end_enstr-->
<span class="jpstr">
秘訣
</span><!--end_jpstr-->
</p><p><span class="enstr">Both your app and its share extension donate an <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>. Write reusable code by creating an object that donates the intent and is available to both the extension and the app.</span><!--end_enstr-->
<span class="jpstr">
あなたのアプリとそれの共有拡張は両方とも<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>を提供します。再利用可能なコードを、インテントを提供するそして拡張とアプリの両方で利用可能であるあるオブジェクトを作成することによって書いてください。
</span><!--end_jpstr-->
</p></aside></div><h3 id="3343362"><span class="enstr">Populate Your Share Extension’s Interface with Metadata</span><!--end_enstr-->
<span class="jpstr">
あなたの共有拡張のインターフェイスをメタデータで満たす
</span><!--end_jpstr-->
</h3><div><p><span class="enstr">When the user selects your app from the list of suggestions, you can access the metadata that you created when your app donated the <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>. Use it to populate your share extension’s interface.</span><!--end_enstr-->
<span class="jpstr">
ユーザがあなたのアプリを提案それらのリストから選ぶ場合、あなたはメタデータにアクセスできます、それはあなたのアプリが<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>を提供した時にあなたが作成したものです。それを使ってあなたの共有拡張のもつインターフェイスを満たしてください。
</span><!--end_jpstr-->
</p><p><span class="enstr">The following code listing shows a template implementation for an <a class="symbol-name" href="https://developer.apple.com/documentation/social/slcomposeserviceviewcontroller_language-objc"><code><span>SLCompose<wbr/>Service<wbr/>View<wbr/>Controller</span></code></a> subclass. It accesses the <a class="symbol-name" href="../../../documentation/foundation/nsextensioncontext/3180173-intent_language-objc.html"><code><span>intent</span></code></a> property, makes sure it’s an <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>, and uses the intent’s <a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/2866586-conversationidentifier_language-objc"><code><span>conversation<wbr/>Identifier</span></code></a> to create a new <code class="code-voice"><span>Recipient</span></code> object.</span><!--end_enstr-->
<span class="jpstr">
以下のコード出力は、あるテンプレート実装を<a class="symbol-name" href="https://developer.apple.com/documentation/social/slcomposeserviceviewcontroller_language-objc"><code><span>SLCompose<wbr/>Service<wbr/>View<wbr/>Controller</span></code></a>サブクラスに対して示します。それは<a class="symbol-name" href="../../../documentation/foundation/nsextensioncontext/3180173-intent_language-objc.html"><code><span>intent</span></code></a>プロパティにアクセスします、それが<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent_language-objc"><code><span>INSend<wbr/>Message<wbr/>Intent</span></code></a>であることを確実にします、そしてそのインテントのもつ<a class="symbol-name" href="https://developer.apple.com/documentation/sirikit/insendmessageintent/2866586-conversationidentifier_language-objc"><code><span>conversation<wbr/>Identifier</span></code></a>を使って新しい<code class="code-voice"><span>Recipient</span></code>オブジェクトを作成します。
</span><!--end_jpstr-->
It then uses the <code class="code-voice"><span>Recipient</span></code> object to populate the share extension’s interface in the <a class="symbol-name" href="https://developer.apple.com/documentation/social/slcomposeserviceviewcontroller/1623325-configurationitems_language-objc"><code><span>configuration<wbr/>Items</span></code></a> method.</p><figure id="3343363"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>import Intents
import Social
import UIKit

class ShareViewController: SLComposeServiceViewController {

    var recipient: Recipient = Recipient(withName: "Placeholder")
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        //<span class="enstr"> Populate the recipient property with the metadata in case the user tapped a suggestion from the share sheet.</span><!--end_enstr--><span class="jpstr">（ 受取人プロパティを、ユーザがある提案を共有シートからタップした場合において、メタデータで満たします。）</span><!--end_jpstr-->
        let intent = self.extensionContext?.intent as?INSendMessageIntent
        if intent != nil {
            let conversationIdentifier = intent!.conversationIdentifier
            self.recipient = recipient(identifier: conversationIdentifier!)
        }
    }

    func recipient(identifier: String) -&gt; Recipient {
        //<span class="enstr"> Create a recipient object, for example by loading it from a data base.</span><!--end_enstr--><span class="jpstr">（ ある受取人オブジェクトを作成します、例えばそれをデータベースからロードすることによって。）</span><!--end_jpstr-->
        return Recipient(withName: identifier)
    }

    override func isContentValid() -&gt; Bool {
        //<span class="enstr"> Do validation of contentText and/or NSExtensionContext attachments here</span><!--end_enstr--><span class="jpstr">（ contentText および／または NSExtensionContext 添付物の検証をここで行います）</span><!--end_jpstr-->
        return true
    }

    override func didSelectPost() {
        //<span class="enstr"> This is called after the user selects Post. Do the upload of contentText and/or NSExtensionContext attachments.</span><!--end_enstr--><span class="jpstr">（ これは、ユーザがPostを選択する後に呼び出されます。contentText および／または NSExtensionContext 添付物のアップロードを行います。）</span><!--end_jpstr-->
        
        //<span class="enstr"> Inform the host that we're done, so it un-blocks its UI.</span><!--end_enstr--><span class="jpstr">（ ホストに私たちが済ませたことを通知します、それでそれはそれのUIを遮断解除します。）</span><!--end_jpstr-->
        //<span class="enstr"> Note: Alternatively you could call super's -didSelectPost, which will similarly complete the extension context.</span><!--end_enstr--><span class="jpstr">（ 注意：代わりにあなたはスーパーのもつ-didSelectPostを呼び出せました、それは同様に拡張前後関係を完了するでしょう。）</span><!--end_jpstr-->
        self.extensionContext!.completeRequest(returningItems: [], completionHandler: nil)
    }

    override func configurationItems() -&gt; [Any]!{
        //<span class="enstr"> To add configuration options via table cells at the bottom of the sheet, return an array of SLComposeSheetConfigurationItem here.</span><!--end_enstr--><span class="jpstr">（ 構成設定オプションをテーブルセル経由でシートの下で加えるには、SLComposeSheetConfigurationItem の配列をここで返してください。）</span><!--end_jpstr-->
        
        //<span class="enstr"> Use the Recipient object to populate the share sheet.</span><!--end_enstr--><span class="jpstr">（ Recipientオブジェクトを使って共有シートを満たしてください。）</span><!--end_jpstr-->
        let item = SLComposeSheetConfigurationItem()
        item?.title = NSLocalizedString("To:", comment: "The To: label when sharing content.")
        item?.value = self.recipient.name
        item?.tapHandler = {
            self.validateContent()
            item!.value = self.recipient.name
        }
        
        return [item!]
    }
}
</code></pre></div></div></figure><p></p></div></div></section></div></div></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/business/">Business</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><span class="enstr">Resources</span><!--end_enstr-->
<span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><span class="enstr">Internationalization</span><!--end_enstr-->
<span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/programs/">Developer Program</a></li>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/business/distribute/">Apps for Business</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
              </ul>
              <h3><a href="/account/">Account</a></h3>
              <ul>
                <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                <li><a href="https://appstoreconnect.apple.com/">App Store Connect</a></li>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2020 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":3343361,"title":{"content":"Supporting Suggestions in Your App’s Share Extension"},"discussion":"<div><p>Using the iOS share sheet, users can launch your messaging app instantly from a list of suggestions when sharing content like a link, image, video, or file. The share sheet suggests conversations with people in apps that the user interacts with frequently, and updates its suggestions over time based on the user’s favorite apps and conversations. Figure 1 shows suggestions that include a mix of apps and conversations with contacts. <\/p><figure id=\"3379658\"><figcaption><strong class=\"caption-title\">Figure 1<\/strong> <div class=\"caption-content formatted-content\"><div><p>A share sheet provides a list of suggestions<\/p><\/div><\/div><\/figcaption><img class=\"centered-block\" src=\"https:\/\/docs-assets.developer.apple.com\/published\/682efb29af\/c23647d5-dfff-4316-b527-983430e7b436.png\" srcSet=\"https:\/\/docs-assets.developer.apple.com\/published\/682efb29af\/c23647d5-dfff-4316-b527-983430e7b436.png 2x\" alt=\"A screenshot of an iPhone. The upper half shows the apple.com website in Safari. The bottom half of the screen shows the share sheet after the user has decided to share the website with someone. iOS suggests conversations in the Messages app and another app.\" width=\"375\" height=\"auto\"\/><\/figure><p>To allow iOS to include conversations from your messaging app in the list of suggestions:<\/p><ul><li><p>Add a share extension to your app as described in <a href=\"https:\/\/developer.apple.com\/library\/archive\/documentation\/General\/Conceptual\/ExtensibilityPG\/Share.html#\/\/apple_ref\/doc\/uid\/TP40014214-CH12-SW2\">Understand Share Extensions<\/a>.<\/p><\/li><li><p>Declare support for the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a> intent type.<\/p><\/li><li><p>Donate an <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a> in your messaging app and its share extension.<\/p><\/li><\/ul><p>As the user selects an app from the list of suggestions, the app’s sharing interface, implemented as a share extension, accesses additional metadata. iOS provides the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a> for you to prepopulate the interface of your app’s share extension.<\/p><p>For example, you can access the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent\/2866586-conversationidentifier_language-objc\"><code><span>conversation<wbr\/>Identifier<\/span><\/code><\/a> property and preselect a conversation with which to share content so the user doesn’t need to search for a contact in a list, or type a friend’s name. Figure 2 shows an app’s sharing interface using the default system UI that’s based on an <a class=\"symbol-name\" href=\"\/documentation\/social\/slcomposeviewcontroller_language-objc\"><code><span>SLCompose<wbr\/>View<wbr\/>Controller<\/span><\/code><\/a>, with the recipient (Juan Chavez) already filled in.<\/p><figure id=\"3379657\"><figcaption><strong class=\"caption-title\">Figure 2<\/strong> <div class=\"caption-content formatted-content\"><div><p>Prepopulating the share extension&#x27;s interface with a conversation<\/p><\/div><\/div><\/figcaption><img class=\"centered-block\" src=\"https:\/\/docs-assets.developer.apple.com\/published\/780ba11531\/6d5c5ba9-d704-49af-996e-d487d481d256.png\" srcSet=\"https:\/\/docs-assets.developer.apple.com\/published\/780ba11531\/6d5c5ba9-d704-49af-996e-d487d481d256.png 2x\" alt=\"A screenshot of an iPhone with the Safari browser displaying the apple.com homepage. The user tapped the Share button and selected an app from the list of suggestions. The platforms default sharing interface, based on an SLComposeViewController, is visible. Based on the available metadata, the extension has prepopulated the interface with a recipient (Juan Chavez).\" width=\"375\" height=\"auto\"\/><\/figure><\/div><h3 id=\"3362225\">Add a Share Extension to Your App<\/h3><div><p>To add a share extension to your app, open your app’s project in Xcode and select File &gt; New &gt; Target from the menu bar. Xcode presents a sheet that contains templates for different kinds of targets. Select the share extension template from the iOS pane and follow the steps in Xcode’s interface to add one to your app. To learn more, see <a href=\"https:\/\/developer.apple.com\/library\/archive\/documentation\/General\/Conceptual\/ExtensibilityPG\/Share.html#\/\/apple_ref\/doc\/uid\/TP40014214-CH12-SW2\">Understand Share Extensions<\/a> in the App Extension Programming Guide.<\/p><\/div><h3 id=\"3343360\">Support the Send Message Intent<\/h3><div><p>Open the Share extension’s <code class=\"code-voice\"><span>Info<wbr\/>.plist<\/span><\/code>, and expand the <a href=\"\/documentation\/bundleresources\/information_property_list\/nsextension_language-objc\">NSExtension<\/a> and <a href=\"\/documentation\/bundleresources\/information_property_list\/nsextension\/nsextensionattributes_language-objc\">NSExtensionAttributes<\/a> keys. Next, add a new entry with the <a class=\"symbol-name\" href=\"\/documentation\/bundleresources\/information_property_list\/nsextension\/intentssupported_language-objc\"><code><span>Intents<wbr\/>Supported<\/span><\/code><\/a> key and select <code class=\"code-voice\"><span>Array<\/span><\/code> for its value type. Add the string <code class=\"code-voice\"><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code> as a new value to the array to declare support for the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a> intent type, as shown in Figure 3.<\/p><figure id=\"3358270\"><figcaption><strong class=\"caption-title\">Figure 3<\/strong> <div class=\"caption-content formatted-content\"><div><p>Add a new entry under the NSExtensionAttributes key<\/p><\/div><\/div><\/figcaption><img class=\"centered-block\" src=\"https:\/\/docs-assets.developer.apple.com\/published\/b1fc567406\/d544f8e4-1dae-4f6e-b1f5-9573591add01.png\" srcSet=\"https:\/\/docs-assets.developer.apple.com\/published\/b1fc567406\/d544f8e4-1dae-4f6e-b1f5-9573591add01.png 2x\" alt=\"A screenshot of Xcode showing the Info.plist file for a Share extension that the developer created using Xcode&#x27;s share extension template. The entries below the NSExtension key are expanded and show the IntentsSupported key with an item that has the value set to INSendMessageIntent. The NSExtensionActivationRule entry is set to TRUEPREDICATE.\" width=\"898\" height=\"auto\"\/><\/figure><p>To make debugging easier, the value of <a href=\"\/documentation\/bundleresources\/information_property_list\/nsextension\/nsextensionattributes\/nsextensionactivationrule_language-objc\">NSExtensionActivationRule<\/a> is set to <code class=\"code-voice\"><span>TRUEPREDICATE<\/span><\/code> when you first add a share extension using Xcode’s template. Replace it with valid activation rules as described in <a href=\"https:\/\/developer.apple.com\/library\/archive\/documentation\/General\/Conceptual\/ExtensibilityPG\/ExtensionScenarios.html#\/\/apple_ref\/doc\/uid\/TP40014214-CH21-SW8\">Declaring Supported Data Types for a Share or Action Extension<\/a> before submitting your app for review.<\/p><\/div><h3 id=\"3362244\">Donate a Send Message Intent<\/h3><div><p>Donate an <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a> when the user sends a message in your app and its share extension, and not in any other circumstances. For example, don’t donate an intent when the user hasn’t actually sent a message.<\/p><p>As you initialize the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a> object, provide metadata that will be available later when the user choses your app’s share extension from the list of suggestions. The following code donates an <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a> with a <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent\/1778199-groupname_language-objc\"><code><span>group<wbr\/>Name<\/span><\/code><\/a>, a <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent\/2866586-conversationidentifier_language-objc\"><code><span>conversation<wbr\/>Identifier<\/span><\/code><\/a>, and an <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inimage_language-objc\"><code><span>INImage<\/span><\/code><\/a>. <\/p><figure id=\"3362245\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>\/\/ Create an INSendMessageIntent to donate an intent for a conversation with Juan Chavez.\nlet groupName = INSpeakableString(spokenPhrase: &quot;Juan Chavez&quot;)\nlet sendMessageIntent = INSendMessageIntent(recipients: nil,\n                                            content: nil,\n                                            speakableGroupName: groupName,\n                                            conversationIdentifier: &quot;sampleConversationIdentifier&quot;,\n                                            serviceName: nil,\n                                            sender: nil)\n\n\/\/ Add the user&#x27;s avatar to the intent.\nlet image = INImage(named: &quot;Juan Chavez&quot;)\nsendMessageIntent.setImage(image, forParameterNamed: \\.speakableGroupName)\n\n\/\/ Donate the intent.\nlet interaction = INInteraction(intent: sendMessageIntent, response: nil)\ninteraction.donate(completion: { error in\n    if error != nil {\n        \/\/ Add error handling here.\n    } else {\n        \/\/ Do something, e.g. send the content to a contact.\n    }\n})\n<\/code><\/pre><\/div><\/div><\/figure><p>When iOS includes a conversation within your app as a suggestion in the share sheet, it displays your app’s icon along with the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inimage_language-objc\"><code><span>INImage<\/span><\/code><\/a> you associated with your <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a>. If there’s no <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inimage_language-objc\"><code><span>INImage<\/span><\/code><\/a> set on the intent, iOS uses the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inperson\/1639130-image_language-objc\"><code><span>image<\/span><\/code><\/a> property from the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inperson_language-objc\"><code><span>INPerson<\/span><\/code><\/a> object for each recipient. If the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inperson_language-objc\"><code><span>INPerson<\/span><\/code><\/a> object’s <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inperson\/1639130-image_language-objc\"><code><span>image<\/span><\/code><\/a> is <code class=\"code-voice\"><span>nil<\/span><\/code>, iOS looks up the corresponding contact in the Contacts app using the person’s <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/inperson\/1638320-contactidentifier_language-objc\"><code><span>contact<wbr\/>Identifier<\/span><\/code><\/a>. The share sheet then uses the contact’s image.<\/p><aside class=\"aside aside-tip\" aria-label=\"tip\"><p class=\"aside-name\">Tip<\/p><p>Both your app and its share extension donate an <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a>. Write reusable code by creating an object that donates the intent and is available to both the extension and the app.<\/p><\/aside><\/div><h3 id=\"3343362\">Populate Your Share Extension’s Interface with Metadata<\/h3><div><p>When the user selects your app from the list of suggestions, you can access the metadata that you created when your app donated the <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a>. Use it to populate your share extension’s interface.<\/p><p>The following code listing shows a template implementation for an <a class=\"symbol-name\" href=\"\/documentation\/social\/slcomposeserviceviewcontroller_language-objc\"><code><span>SLCompose<wbr\/>Service<wbr\/>View<wbr\/>Controller<\/span><\/code><\/a> subclass. It accesses the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/nsextensioncontext\/3180173-intent_language-objc\"><code><span>intent<\/span><\/code><\/a> property, makes sure it’s an <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent_language-objc\"><code><span>INSend<wbr\/>Message<wbr\/>Intent<\/span><\/code><\/a>, and uses the intent’s <a class=\"symbol-name\" href=\"\/documentation\/sirikit\/insendmessageintent\/2866586-conversationidentifier_language-objc\"><code><span>conversation<wbr\/>Identifier<\/span><\/code><\/a> to create a new <code class=\"code-voice\"><span>Recipient<\/span><\/code> object. It then uses the <code class=\"code-voice\"><span>Recipient<\/span><\/code> object to populate the share extension’s interface in the <a class=\"symbol-name\" href=\"\/documentation\/social\/slcomposeserviceviewcontroller\/1623325-configurationitems_language-objc\"><code><span>configuration<wbr\/>Items<\/span><\/code><\/a> method.<\/p><figure id=\"3343363\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>import Intents\nimport Social\nimport UIKit\n\nclass ShareViewController: SLComposeServiceViewController {\n\n    var recipient: Recipient = Recipient(withName: &quot;Placeholder&quot;)\n    \n    override func viewDidLoad() {\n        super.viewDidLoad()\n        \n        \/\/ Populate the recipient property with the metadata in case the user tapped a suggestion from the share sheet.\n        let intent = self.extensionContext?.intent as? INSendMessageIntent\n        if intent != nil {\n            let conversationIdentifier = intent!.conversationIdentifier\n            self.recipient = recipient(identifier: conversationIdentifier!)\n        }\n    }\n\n    func recipient(identifier: String) -&gt; Recipient {\n        \/\/ Create a recipient object, for example by loading it from a data base.\n        return Recipient(withName: identifier)\n    }\n\n    override func isContentValid() -&gt; Bool {\n        \/\/ Do validation of contentText and\/or NSExtensionContext attachments here\n        return true\n    }\n\n    override func didSelectPost() {\n        \/\/ This is called after the user selects Post. Do the upload of contentText and\/or NSExtensionContext attachments.\n        \n        \/\/ Inform the host that we&#x27;re done, so it un-blocks its UI.\n        \/\/ Note: Alternatively you could call super&#x27;s -didSelectPost, which will similarly complete the extension context.\n        self.extensionContext!.completeRequest(returningItems: [], completionHandler: nil)\n    }\n\n    override func configurationItems() -&gt; [Any]! {\n        \/\/ To add configuration options via table cells at the bottom of the sheet, return an array of SLComposeSheetConfigurationItem here.\n        \n        \/\/ Use the Recipient object to populate the share sheet.\n        let item = SLComposeSheetConfigurationItem()\n        item?.title = NSLocalizedString(&quot;To:&quot;, comment: &quot;The To: label when sharing content.&quot;)\n        item?.value = self.recipient.name\n        item?.tapHandler = {\n            self.validateContent()\n            item!.value = self.recipient.name\n        }\n        \n        return [item!]\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div>","abstract":"<div><p>Make your messaging app available for share sheet suggestions and use SiriKit intents to populate your app’s share extension.<\/p><\/div>","containingGroup":[{"id":3362517,"role":"task","paths":[],"symbols":[{"id":3343361,"role":"article","paths":["documentation\/foundation\/app_extension_support\/supporting_suggestions_in_your_app_s_share_extension"],"abstract":"<div><p>Make your messaging app available for share sheet suggestions and use SiriKit intents to populate your app’s share extension.<\/p><\/div>","title":{"content":"Supporting Suggestions in Your App’s Share Extension"}}],"title":{"content":"Share Extensions"}}],"modules":[{"title":{"content":"UIKit"},"paths":["documentation\/uikit"],"importStatement":"<import xml:space=\"preserve\"><keyWord>@import<\/keyWord> UIKit<\/import>","availability":[{"platform":"iOS","introduced":"2.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"watchOS","introduced":"2.0"},{"platform":"Mac Catalyst","introduced":"13.0"}]}],"role":"article","language":"occ","roleHeading":"Article","languages":["occ","swift"],"variants":{"occ":{"paths":["documentation\/foundation\/app_extension_support\/supporting_suggestions_in_your_app_s_share_extension"]},"swift":{"paths":["documentation\/foundation\/app_extension_support\/supporting_suggestions_in_your_app_s_share_extension"]}},"pid":492525,"paths":["documentation\/foundation\/app_extension_support\/supporting_suggestions_in_your_app_s_share_extension"],"hierarchy":[[{"id":1613013,"role":"collection","title":{"content":"Foundation"},"paths":["documentation\/foundation"]},{"id":2877760,"role":"collectionGroup","title":{"content":"App Extension Support"},"paths":["documentation\/foundation\/app_extension_support"]}]],"legalNotices":{"copyright":"Copyright &copy; 2020 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script></body></html>