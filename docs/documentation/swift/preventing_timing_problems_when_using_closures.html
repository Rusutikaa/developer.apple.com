<!DOCTYPE html><html lang="en"><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Preventing Timing Problems When Using Closures | Apple Developer Documentation</title><!-- link href="https://www.apple.com/wss/fonts?families=SF+Pro,v1|SF+Mono,v1|SF+Pro+Icons,v1" media="all" rel="stylesheet" type="text/css"/ --><meta content="width=device-width, initial-scale=1 viewport-fit=cover" name="viewport"/><meta data-pid="183535"/><link href="../../documentation/assets/application-3df9866a.css" media="all" rel="stylesheet" type="text/css"/><link rel="mask-icon" href="../../documentation/assets/apple-logo.svg" color="#000"/><link rel="shortcut icon" href="../../documentation/assets/favicon.ico"/><script src="../../documentation/assets/shared-3368bd70.js"></script></head><body><div id="_omniture_top">
      <script type="text/javascript">
        var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
      </script><!-- script type="text/javascript" src="file://www.apple.com/metrics/scripts/s_code_h.js" -->
      </script>
      <script type="text/javascript">
        s.pageName=AC.Tracking.pageName();
        s.channel="www.us.developer"

        var s_code=s.t();if(s_code)document.write(s_code)
      </script>
    </div><div id="app"><div><a href="#main" id="skip-localnav" class="showonfocus hidden">Skip Navigation</a><input type="checkbox" id="ac-gn-menustate" class="ac-gn-menustate"/><nav id="ac-globalnav" class="no-js" role="navigation" aria-label="Global" data-hires="false" data-analytics-region="global nav" lang="en-US"><div class="ac-gn-content">
        <ul class="ac-gn-header">
          <li class="ac-gn-item ac-gn-menuicon">
            <label class="ac-gn-menuicon-label" for="ac-gn-menustate" aria-hidden="true">
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-top">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-top"></span>
              </span>
              <span class="ac-gn-menuicon-bread ac-gn-menuicon-bread-bottom">
                <span class="ac-gn-menuicon-bread-crust ac-gn-menuicon-bread-crust-bottom"></span>
              </span>
            </label>
            <a href="#ac-gn-menustate" class="ac-gn-menuanchor ac-gn-menuanchor-open" id="ac-gn-menuanchor-open"> <span class="ac-gn-menuanchor-label">Open Menu</span> </a>
            <a href="#" class="ac-gn-menuanchor ac-gn-menuanchor-close" id="ac-gn-menuanchor-close"> <span class="ac-gn-menuanchor-label">Close Menu</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple" href="/" id="ac-gn-firstfocus-small"> <span class="ac-gn-link-text">Apple Developer</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-bag ac-gn-bag-small" id="ac-gn-bag-small">
            <a class="ac-gn-link ac-gn-link-bag" href="/account/"> <span class="ac-gn-link-text">Account</span> <span class="ac-gn-bag-badge"></span> </a> <span class="ac-gn-bagview-caret ac-gn-bagview-caret-large"></span> </li>
        </ul>
        <ul class="ac-gn-list">
          <li class="ac-gn-item ac-gn-apple">
            <a class="ac-gn-link ac-gn-link-apple" href="/" id="ac-gn-firstfocus"> <span class="ac-gn-link-text">Apple Developer</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-discover">
            <a class="ac-gn-link" href="/discover/"> <span>Discover</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-design">
            <a class="ac-gn-link" href="/design/"> <span>Design</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-develop">
            <a class="ac-gn-link" href="/develop/"> <span>Develop</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-distribute">
            <a class="ac-gn-link" href="/distribute/"> <span>Distribute</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-support">
            <a class="ac-gn-link" href="/support/"> <span>Support</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-account">
            <a class="ac-gn-link" href="/account/"> <span>Account</span> </a>
          </li>
          <li class="ac-gn-item ac-gn-item-menu ac-gn-search" role="search">
            <a id="ac-gn-search-button" class="ac-gn-link ac-gn-link-search" href="/search/" aria-label="Search developer.apple.com"> <span class="ac-gn-search-placeholder" aria-hidden="true">Search</span> </a>
          </li>
        </ul>
        <aside id="ac-gn-searchview" class="ac-gn-searchview" role="search" data-analytics-region="search">
          <div class="ac-gn-searchview-content">
            <form id="ac-gn-searchform" class="ac-gn-searchform" action="/search/" method="get">
              <div class="ac-gn-searchform-wrapper">
                <input id="ac-gn-searchform-input" class="ac-gn-searchform-input" type="text" name="q" placeholder="Search" data-placeholder-long="Search for documentation, videos, and more" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" />
                <button id="ac-gn-searchform-submit" class="ac-gn-searchform-submit" type="submit" disabled aria-label="Submit"></button>
                <button id="ac-gn-searchform-reset" class="ac-gn-searchform-reset" type="reset" disabled aria-label="Clear Search"></button>
              </div>
            </form>
            <aside id="ac-gn-searchresults" class="ac-gn-searchresults" data-string-quicklinks="Quick Links" data-string-suggestions="Suggested Searches" data-string-noresults="Hit enter to search.">
            </aside>
          </div>
          <button id="ac-gn-searchview-close" class="ac-gn-searchview-close" aria-label="Close Search">
            <span class="ac-gn-searchview-close-wrapper">
                <span class="ac-gn-searchview-close-left"></span>
            <span class="ac-gn-searchview-close-right"></span>
            </span>
          </button>
        </aside>
      </div></nav><div id="ac-gn-curtain" class="ac-gn-curtain"></div><div id="ac-gn-placeholder" class="ac-nav-placeholder"></div><input type="checkbox" id="localnav-menustate" class="localnav-menustate" aria-hidden="true"/><nav id="localnav" class="localnav localnav-dark theme-dark localnav-scrim localnav-noborder" role="navigation" aria-label="API Reference" data-sticky="true"><div class="localnav-wrapper"><div class="referencenav"><div class="localnav-background"></div><div class="localnav-content"><a href="../../index.html" class="localnav-title">Documentation</a><div class="localnav-menu"><a href="#localnav-menustate" id="localnav-menustate-open" class="localnav-menucta-anchor localnav-menucta-anchor-open"><span class="localnav-menucta-anchor-label" aria-hidden="true">Open Menu</span></a><a href="#" id="localnav-menustate-close" class="localnav-menucta-anchor localnav-menucta-anchor-close"><span class="localnav-menucta-anchor-label" aria-hidden="true">Close Menu</span></a><div class="localnav-menu-tray"><ul aria-label="Breadcrumbs" class="localnav-menu-items localnav-menu-breadcrumbs"><li class="localnav-menu-item localnav-menu-breadcrumb-item"><a class="localnav-menu-link" href="../../documentation/swift.html">Swift</a></li><li class="localnav-menu-item localnav-menu-breadcrumb-item"><div class="localnav-menu-breadcrumb-current-container localnav-menu-link current"><span aria-current="page" class="localnav-menu-breadcrumb-current"><!--span class="enstr"-->Preventing Timing Problems When Using Closures<!--/span--><!--end_enstr-->
<br><span class="jpstr">
クロージャを使う場合のタイミング問題を防ぐ
</span><!--end_jpstr-->
</span></div></li></ul><ul class="localnav-menu-items localnav-menu-settings" data-breadcrumbs-count="2"><li class="localnav-menu-setting language-container"><span class="localnav-menu-setting-label">Language:</span><span class="localnav-menu-toggle-none current-language" aria-current="page">Swift</span></li><li class="localnav-menu-setting"><span class="localnav-menu-setting-label">API Changes:</span><span class="changes-toggle">None</span></li></ul></div><div class="localnav-actions"><div class="localnav-action localnav-action-menucta" aria-hidden="true"><label for="localnav-menustate" class="localnav-menucta"><span class="localnav-menucta-chevron"></span></label></div></div></div></div></div></div></nav><label for="localnav-menustate" id="localnav-curtain" aria-hidden="true"></label><main role="main" id="main" class="main" tabindex="0"><div class="topic-title"><span class="eyebrow">Article</span><h1 class="topic-heading"><span><!--span class="enstr"-->Preventing Timing Problems When Using Closures<!--/span--><!--end_enstr-->
<br><span class="jpstr">
クロージャを使う場合のタイミング問題を防ぐ
</span><!--end_jpstr-->
</span></h1></div><div class="topic-container section-content row"><div class="topic-description column large-9 medium-9 small-12"><div class="topic-abstract abstract formatted-content"><div><p><!--span class="enstr"-->Understand how different APIs calls to your closures can affect your app.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたのクロージャに対する異なるAPI呼び出しがどのようにあなたのアプリに影響を与えられるかを理解します。
</span><!--end_jpstr-->
</p></div></div></div><div class="topic-summary column large-3 medium-3 small-12"><div class="topic-summary-section frameworks" role="complementary" aria-label="Framework"><p class="topic-summary-section-label subsection-label"><!--span class="enstr"-->Framework<!--/span--><!--end_enstr-->
<br><span class="jpstr">
フレームワーク
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><span><!--span class="enstr"-->Swift Standard Library<!--/span--><!--end_enstr-->
<br><span class="jpstr">
Swift標準ライブラリ
</span><!--end_jpstr-->
</span></li></ul></div><div class="topic-summary-section onthispage"><nav class="onthispage-nav" aria-labelledby="onthispage-title"><p id="onthispage-title" class="topic-summary-section-label subsection-label"><!--span class="enstr"-->On This Page<!--/span--><!--end_enstr-->
<br><span class="jpstr">
この項には
</span><!--end_jpstr-->
</p><ul class="topic-summary-section-list"><li class="topic-summary-section-item"><a href="#overview" class="icon icon-after icon-chevrondowncircle"><!--span class="enstr"-->Overview<!--/span--><!--end_enstr-->
<br><span class="jpstr">
概要
</span><!--end_jpstr-->
</a></li><li class="topic-summary-section-item"><a href="#see-also" class="icon icon-after icon-chevrondowncircle"><!--span class="enstr"-->See Also<!--/span--><!--end_enstr-->
<br><span class="jpstr">
参照
</span><!--end_jpstr-->
</a></li></ul></nav></div></div><div class="topic-content column large-9 medium-9 small-12" id="topic-content"><section id="overview" class="section"><h2><!--span class="enstr"-->Overview<!--/span--><!--end_enstr-->
<br><span class="jpstr">
概要
</span><!--end_jpstr-->
</h2><div class="formatted-content"><div><p><!--span class="enstr"-->Many of the APIs you use in Swift take a closure—or a function passed as an instance—as a parameter.Because closures can contain code that interacts with multiple parts of an app, it's important to understand the different ways closures can be called by the APIs you pass them to.Closures you pass to APIs can be called synchronously (immediately) or asynchronously (sometime later).They may be called once, many times, or never.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたがSwiftで使うAPIの多くは、クロージャ — またはインスタンスとして渡される関数 — をパラメータとして取ります。クロージャはアプリの複数の部分と相互作用するコードを含むことが可能なため、クロージャが、あなたがそれを渡す相手であるAPIによって呼び出される様々に異なる方法を理解するのは重要です。あなたがAPIに渡すクロージャは、同期的に（直ちに）または非同期的に（いつか後で）呼び出されることができます。それらが呼び出されるのは、一度だけ、何度も、または決してないかもしれません。
</span><!--end_jpstr-->
 </p><aside class="aside aside-important" aria-label="important"><p class="aside-name"><!--span class="enstr"-->Important<!--/span--><!--end_enstr-->
<br><span class="jpstr">
重要
</span><!--end_jpstr-->
</p><p><!--span class="enstr"-->Making false assumptions about when a closure is called can lead to data inconsistency and app crashes.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
いつクロージャが呼び出されるかについてfalseを仮定することは、データの矛盾そしてアプリクラッシュに至る可能性があります。
</span><!--end_jpstr-->
</p></aside><p></p></div><h3 id="2994024"><!--span class="enstr"-->Understand the Results of Synchronous and Asynchronous Calls<!--/span--><!--end_enstr-->
<br><span class="jpstr">
同期および非同期呼び出しの結果を理解する
</span><!--end_jpstr-->
</h3><div><p><!--span class="enstr"-->When you pass a closure to an API, consider <em>when</em> that closure will be called relative to the other code in your app.In synchronous APIs, the result of calling the closure will be available immediately after you pass the closure.In asynchronous APIs, the result won't be available until sometime later; this difference affects how you write code both <em>in</em> your closure as well as the code <em>following</em> your closure.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたがクロージャをAPIに渡す場合、クロージャが呼び出されるのはあなたのアプリの他のコードと比較して<em>いつか</em>を考えてください。同期APIでは、クロージャ呼び出しの結果は、あなたがクロージャを渡した直後に利用可能になります。非同期APIでは、結果はいつか後まで利用可能でないでしょう；この違いは、あなたがコードを書く方法に、あなたのクロージャ<em>において</em>それだけでなくあなたのクロージャ<em>の後の</em>コードの両方で影響します。
</span><!--end_jpstr-->
</p><p><!--span class="enstr"-->The example below defines two functions, <code class="code-voice"><span>now(_:)</span></code> and <code class="code-voice"><span>later(_:)</span></code>.You can call both functions the same way: with a trailing closure and no other arguments.Both <code class="code-voice"><span>now(_:)</span></code> and <code class="code-voice"><span>later(_:)</span></code> accept a closure and call it, but <code class="code-voice"><span>later(_:)</span></code> waits a couple seconds before calling its closure.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
下の例は、２つの関数、<code class="code-voice"><span>now(_:)</span></code>と<code class="code-voice"><span>later(_:)</span></code>を定義します。あなたは、両方の関数を同じ方法で呼び出せます：後付クロージャとともにそして他の引数なしで。<code class="code-voice"><span>now(_:)</span></code>と<code class="code-voice"><span>later(_:)</span></code>の両方ともクロージャを受け取りそれを呼び出します、しかし<code class="code-voice"><span>later(_:)</span></code>はそれのクロージャを呼び出す前に２秒ほど待ちます。
</span><!--end_jpstr-->
</p><figure id="2994028"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>import Dispatch
let queue = DispatchQueue(label: "com.example.queue")

func now(_ closure: () -&gt; Void) {
    closure()
}

func later(_ closure: @escaping () -&gt; Void) {
    queue.asyncAfter(deadline: .now() + 2) {
        closure()
    }
}
</code></pre></div></div></figure><p><!--span class="enstr"-->The <code class="code-voice"><span>now(_:)</span></code> and <code class="code-voice"><span>later(_:)</span></code> functions represent the two most common categories of APIs you'll encounter in methods from app frameworks that take closures: synchronous APIs like <code class="code-voice"><span>now(_:)</span></code>, and asynchronous APIs like <code class="code-voice"><span>later(_:)</span></code>.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
<code class="code-voice"><span>now(_:)</span></code>と<code class="code-voice"><span>later(_:)</span></code>関数は、クロージャを取るアプリフレームワーク由来のメソッドにおいてあなたが出くわす、２つの最も一般的なAPIのカテゴリを表します：<code class="code-voice"><span>now(_:)</span></code>のような同期的API、そして<code class="code-voice"><span>later(_:)</span></code>のような非同期的API。
</span><!--end_jpstr-->
</p><p><!--span class="enstr"-->Because calling a closure can change the local and global state of your app, the code you write on the lines after passing a closure needs to be written with a careful consideration of <em>when</em> that closure is called.Even something as simple as printing a sequence of letters can be affected by the timing of a closure call:<!--/span--><!--end_enstr-->
<br><span class="jpstr">
クロージャ呼び出しはあなたのアプリのローカルおよびグローバルな状態を変える可能性があることから、クロージャを渡す後の行であなたが書くコードは、<em>いつ</em>そのクロージャが呼び出されるか注意深く考えて書かれる必要があります。一連の文字を印字するような単純なことでさえ、クロージャ呼び出しの時機によって影響される可能性があります：
</span><!--end_jpstr-->
</p><figure id="2994026"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>later {
    print("A") //<!--span class="enstr"--> Eventually prints "A"<!--/span--><!--end_enstr--><span class="jpstr">（ そのうち "A" を印字）</span><!--end_jpstr-->
}
print("B") //<!--span class="enstr"--> Immediately prints "B"<!--/span--><!--end_enstr--><span class="jpstr">（ すぐに "B" を印字）</span><!--end_jpstr-->

now {
    print("C") //<!--span class="enstr"--> Immediately prints "C"<!--/span--><!--end_enstr--><span class="jpstr">（ すぐに "C" を印字）</span><!--end_jpstr-->
}
print("D") //<!--span class="enstr"--> Immedately prints "D"<!--/span--><!--end_enstr--><span class="jpstr">（ すぐに "D" を印字）</span><!--end_jpstr-->

//<!--span class="enstr"--> Prevent the program from exiting immediately if you're running this code in Terminal.<!--/span--><!--end_enstr--><span class="jpstr">（ あなたがこのコードをTerminalで実行するならば、プログラムがすぐに終了するのを防ぎます。）</span><!--end_jpstr-->
let semaphore = DispatchSemaphore(value: 0).wait(timeout: .now() + 10)
</code></pre></div></div></figure><p><!--span class="enstr"-->Running the code in the example above usually prints the letters in the order <code class="code-voice"><span>B</span></code> → <code class="code-voice"><span>C</span></code> → <code class="code-voice"><span>D</span></code> → <code class="code-voice"><span>A</span></code>.Even though the line that prints <code class="code-voice"><span>A</span></code> is first in the code, it's ordered later in the output.The ordering difference happens due to the way the <code class="code-voice"><span>now(_:)</span></code> and <code class="code-voice"><span>later(_:)</span></code> functions are defined.You need to know how each function calls its closure if you write code that relies on a specific execution order.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
上の例のコードを実行することは、通常は文字をこの順番で出力します、<code class="code-voice"><span>B</span></code> → <code class="code-voice"><span>C</span></code> → <code class="code-voice"><span>D</span></code> → <code class="code-voice"><span>A</span></code>。たとえ<code class="code-voice"><span>A</span></code>を印字する行がコードにおいて最初であっても、それは出力においてもっと後の順番にされます。順番の違いは、<code class="code-voice"><span>now(_:)</span></code> and <code class="code-voice"><span>later(_:)</span></code>関数が定義される方法のために起こります。あなたは、各関数がそれのクロージャを呼び出す方法を知る必要があります、もしあなたがある明確な実行順序を当てにするコードを書くならば。
</span><!--end_jpstr-->
</p><aside class="aside aside-note" role="note"><p class="aside-name"><!--span class="enstr"-->Note<!--/span--><!--end_enstr-->
<br><span class="jpstr">
注意
</span><!--end_jpstr-->
</p><p><!--span class="enstr"-->The order in which <code class="code-voice"><span>A</span></code> is printed relative to the other letters isn't guaranteed.Under typical system conditions, it's usually printed last, but you shouldn't write code that relies on the order of an asychronous call relative to synchronous code without performing more careful synchronization between threads.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
<code class="code-voice"><span>A</span></code>が他の文字に関連して印字される順番は、保証されません。典型的なシステム条件の下、それはふつうは最後に印字されます、しかしあなたは、スレッド間でより注意深い同期を実行することなく、同期コードに関連して非同期呼び出しの順番を頼るコードを書くべきではありません。
</span><!--end_jpstr-->
</p></aside><p><!--span class="enstr"-->You'll need to consider this kind of time-based execution problem frequently when using APIs that take closures.In many cases, only one sequence of calls is correct for your app, so it's important to think through what the state of your app will be, given the APIs you're using.Use API names and parameter names along with documentation to determine whether an API is synchronous or asynchronous.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたは、クロージャを取るAPIを使う場合に、この種の時間基盤の実行問題をしばしば考える必要があるでしょう。多くの場合に、ただ１つの呼び出し順番だけがあなたのアプリにとって正しいです、それで重要なのは、あなたが使うAPIを与えられて、あなたのアプリの状態がどうなるのか考え抜くことです。API名とパラメータ名を、加えてAPIが同期的または非同期的かを明らかにする文書とともに使ってください。
</span><!--end_jpstr-->
 </p><p><!--span class="enstr"-->A common timing mistake is expecting the results of an asynchronous call to be available within the calling synchronous code.For example, the <code class="code-voice"><span>later(_:)</span></code> method above is comparable to the <a class="symbol-name" href="https://developer.apple.com/documentation/foundation/urlsession"><code><span>URLSession</span></code></a> class's <a class="symbol-name" href="https://developer.apple.com/documentation/foundation/urlsession/1410330-datatask"><code><span>data<wbr/>Task(with:<wbr/>completion<wbr/>Handler:)</span></code></a> method, which is also asynchronous.A timing scenario you should avoid is calling the <code class="code-voice"><span>data<wbr/>Task(with:<wbr/>completion<wbr/>Handler:)</span></code> method within your app's <a class="symbol-name" href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621495-viewdidload"><code><span>view<wbr/>Did<wbr/>Load()</span></code></a> method and attempting to use the results outside of the closure you pass as the completion handler.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
よくあるタイミング間違いは、非同期呼び出しの結果が、呼び出している同期的コード内部で利用可能であると予想することです。例えば、上の<code class="code-voice"><span>later(_:)</span></code>メソッドは、<a class="symbol-name" href="https://developer.apple.com/documentation/foundation/urlsession"><code><span>URLSession</span></code></a>クラスの<a class="symbol-name" href="https://developer.apple.com/documentation/foundation/urlsession/1410330-datatask"><code><span>data<wbr/>Task(with:<wbr/>completion<wbr/>Handler:)</span></code></a>メソッドと似ています。あなたが避けるべきタイミングシナリオは、<code class="code-voice"><span>data<wbr/>Task(with:<wbr/>completion<wbr/>Handler:)</span></code>メソッドをあなたのアプリの<a class="symbol-name" href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621495-viewdidload"><code><span>view<wbr/>Did<wbr/>Load()</span></code></a>メソッド内部で呼び出す、そして結果をあなたが完了ハンドラとして渡したクロージャの外部で使うのを試みることです。
</span><!--end_jpstr-->
 </p><p></p></div><h3 id="2994084"><!--span class="enstr"-->Don't Write Code That Makes a One-Time Change in a Closure That's Called Multiple Times<!--/span--><!--end_enstr-->
<br><span class="jpstr">
一回限りの変更をするコードを複数回呼び出されるクロージャの中に書かないでください
</span><!--end_jpstr-->
</h3><div><p><!--span class="enstr"-->If you're going to pass a closure to an API that might call it multiple times, omit code that's intended to make a one-time change to external state.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたがあるクロージャをそれを複数回呼び出すかもしれないAPIに渡そうとしているならば、一度限りの変更を外部状態に対してするように意図されるコードを省いてください。
</span><!--end_jpstr-->
 </p><p><!--span class="enstr"-->The example below creates a <a class="symbol-name" href="https://developer.apple.com/documentation/foundation/filehandle"><code><span>File<wbr/>Handle</span></code></a> and an array of data lines to write to the file that the handle refers to:<!--/span--><!--end_enstr-->
<br><span class="jpstr">
下の例は、<a class="symbol-name" href="https://developer.apple.com/documentation/foundation/filehandle"><code><span>File<wbr/>Handle</span></code></a>と、データ行からなる配列を作成して、そのハンドルが参照するファイルに書き出します：
</span><!--end_jpstr-->
</p><figure id="2994081"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>import Foundation

let file = FileHandle(forWritingAtPath: "/dev/null")!
let lines = ["x,y", "1,1", "2,4", "3,9", "4,16"]
</code></pre></div></div></figure><p><!--span class="enstr"-->To write each line to the file, pass a closure to the <a class="symbol-name" href="../../documentation/swift/array/1689783-foreach.html"><code><span>for<wbr/>Each(_:)</span></code></a> method:<!--/span--><!--end_enstr-->
<br><span class="jpstr">
各行をファイルに書き出すには、クロージャを<a class="symbol-name" href="../../documentation/swift/array/1689783-foreach.html"><code><span>for<wbr/>Each(_:)</span></code></a>メソッドに渡してください：
</span><!--end_jpstr-->
</p><figure id="2994080"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>lines.forEach { line in
    file.write("\(line)\n".data(using: .utf8)!)
}
</code></pre></div></div></figure><p><!--span class="enstr"-->When you're finished using a <code class="code-voice"><span>File<wbr/>Handle</span></code>, close it using <a class="symbol-name" href="https://developer.apple.com/documentation/foundation/filehandle/1413393-closefile"><code><span>close<wbr/>File()</span></code></a>.The correct placement of the call to <code class="code-voice"><span>close<wbr/>File()</span></code> is outside of the closure:<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたが<code class="code-voice"><span>File<wbr/>Handle</span></code>の使用を完了した場合、それを<a class="symbol-name" href="https://developer.apple.com/documentation/foundation/filehandle/1413393-closefile"><code><span>close<wbr/>File()</span></code></a>を使って閉じてください。<code class="code-voice"><span>close<wbr/>File()</span></code>への呼び出しの正しい配置は、クロージャの外側です：
</span><!--end_jpstr-->
</p><figure id="2994083"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>lines.forEach { line in
    file.write("\(line)\n".data(using: .utf8)!)
}

file.closeFile()
</code></pre></div></div></figure><p><!--span class="enstr"-->If you misunderstand the requirements of <a class="symbol-name" href="https://developer.apple.com/documentation/foundation/filehandle/1413393-closefile"><code><span>close<wbr/>File()</span></code></a>, you might place the call inside the closure.Doing so crashes your app:<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたが<a class="symbol-name" href="https://developer.apple.com/documentation/foundation/filehandle/1413393-closefile"><code><span>close<wbr/>File()</span></code></a>の必要条件を取り違えるならば、あなたは呼び出しをクロージャの内側に置くかもしれません。そうすることはあなたのアプリをクラッシュさせます：
</span><!--end_jpstr-->
</p><figure id="2994085"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>lines.forEach { line in
    file.write("\(line)\n".data(using: .utf8)!)
    file.closeFile() // Error
}
</code></pre></div></div></figure><p></p></div><h3 id="2994082"><!--span class="enstr"-->Don't Put Critical Code in a Closure That Might Not Be Called<!--/span--><!--end_enstr-->
<br><span class="jpstr">
呼び出されないかもしれないクロージャの中に重大なコードを置かないでください
</span><!--end_jpstr-->
</h3><div><p><!--span class="enstr"-->If there's a chance that a closure you pass to an API won't be called, don't put code that's critical to continuing your app in the closure.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたがAPIに渡すクロージャが呼び出されない可能性があるならば、あなたのアプリを継続するのに重要なコードをクロージャの中に置かないでください。
</span><!--end_jpstr-->
</p><p><!--span class="enstr"-->The example below defines a <code class="code-voice"><span>Lottery</span></code> enumeration that randomly picks a winning number and calls a completion handler if the right number is guessed:<!--/span--><!--end_enstr-->
<br><span class="jpstr">
下の例は、<code class="code-voice"><span>Lottery</span></code>列挙を定義します、それはランダムに当選番号を選んで、正しい数が推測されるならば完了ハンドラを呼び出します。
</span><!--end_jpstr-->
</p><figure id="2994097"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>enum Lottery {
    static var lotteryWinHandler: (() -&gt; Void)?
    
    @discardableResult static func pickWinner(guess: Int) {
        print("Running the lottery.")
        if guess == Int.random(in: 0 ..&lt; 100_000_000), let winHandler = lotteryWinHandler {
            winHandler()
            return true
        }
        
        return false
    }
}
</code></pre></div></div></figure><p><!--span class="enstr"-->Writing code that depends on the completion handler being called is dangerous.There's no guarantee that the random guess will be correct, so important actions like paying bills—scheduled for after you win the lottery—might never happen.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
呼び出される完了ハンドラに頼るコードを書くことは危険です。ランダムな推測が正しくなる保証はありません、それで請求書を払うような — あなたが宝くじに当たった後に予定される — 重要な行為は決して起こらないかもしれません。
</span><!--end_jpstr-->
</p><figure id="2994098"><div class="formatted-content"><div class="code-listing"><pre class="code-source" data-language="swift"><code>func payBills() {
    amountOwed = 0
}

var amountOwed = 25
let myLuckyNumber = 42

Lottery.lotteryWinHandler = {
    print("Congratulations!")
    payBills()
}

//<!--span class="enstr"--> You get 10 chances at winning.<!--/span--><!--end_enstr--><span class="jpstr">（ あなたは当選する10回の機会があります。）</span><!--end_jpstr-->
for _ in 1..10 {
    Lottery.pickWinner(guess: myLuckyNumber)
}

if amountOwed &gt; 0 {
    fatalError("You need to pay your bills before proceeding.")
}

//<!--span class="enstr"--> Code placed below this line runs only if the lottery was won.<!--/span--><!--end_enstr--><span class="jpstr">（ この行より下に置かれるコードは、宝くじが当たった後にのみ実行されます。）</span><!--end_jpstr-->
</code></pre></div></div></figure><p></p></div></div></section></div></div><section id="see-also" class="contenttable section alt-light-container row"><div class="alt-light"><div class="section-content"><h2 class="contenttable-title"><!--span class="enstr"-->See Also<!--/span--><!--end_enstr-->
<br><span class="jpstr">
参照
</span><!--end_jpstr-->
</h2><section id="2984802" class="contenttable-section"><div class="contenttable-container row"><div class="contenttable-section-title-container column large-3 medium-3 small-12"><h3 class="contenttable-section-title"><!--span class="enstr"-->Data Flow and Control Flow<!--/span--><!--end_enstr-->
<br><span class="jpstr">
データの流れと制御の流れ
</span><!--end_jpstr-->
</h3></div><div class="contenttable-section-content column large-9 medium-9 small-12"><div class="task-topics"><div class="task-topic"><div class="task-topic-info"><a class="has-adjacent-element symbol-name" href="../../documentation/swift/maintaining_state_in_your_apps.html"><svg xmlns="http://www.w3.org/2000/svg" height="15" viewBox="0 0 22 30" class="svg-icon symbol-name-icon" aria-hidden="true"><title>Article</title><g id="Article" class="svg-icon-small"><path d="M12.87,0H0V2H0V28H0v2H22V9.13ZM20,28H2V2h9V12h9Zm0-18H13V3l7,7Z"></path></g></svg><span><!--span class="enstr"-->Maintaining State in Your Apps<!--/span--><!--end_enstr-->
<br><span class="jpstr">
あなたのアプリの状態を管理する
</span><!--end_jpstr-->
</span></a><div class="task-topic-abstract task-topic-data abstract formatted-content"><div><p><!--span class="enstr"-->Use enumerations to capture and track the state of your app.<!--/span--><!--end_enstr-->
<br><span class="jpstr">
列挙を使ってあなたのアプリの状態をキャプチャおよび追跡します。
</span><!--end_jpstr-->
</p></div></div></div></div></div></div></div></section></div></div></section></main><section id="globalfooter-wrapper"><footer id="globalfooter" role="contentinfo">
        <nav class="footer-breadory">
          <a href="/" class="home breadcrumbs-home"><span aria-hidden="true"></span><span class="breadcrumbs-home-label">Developer</span></a>
          <section class="breadcrumbs">
            <ol class="breadcrumbs-list">
              <li><a href=/documentation>Documentation</a></li>
            </ol>
          </section>
          <div id="directorynav" class="directorynav">
            <div id="dn-cola" class="column">
              <h3><a href="/discover/">Discover</a></h3>
              <ul>
                <li><a href="/macos/">macOS</a></li>
                <li><a href="/ios/">iOS</a></li>
                <li><a href="/watchos/">watchOS</a></li>
                <li><a href="/tvos/">tvOS</a></li>
                <li><a href="/safari/">Safari and Web</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/enterprise/">Enterprise</a></li>
                <li><a href="/education/">Education</a></li>
                <li><a href="/wwdc/">WWDC</a></li>
              </ul>
            </div>
            <div id="dn-colb" class="column">
              <h3><a href="/design/">Design</a></h3>
              <ul>
                <li><a href="/design/human-interface-guidelines/">Human Interface Guidelines</a></li>
                <li><a href="/design/resources/"><!--span class="enstr"-->Resources<!--/span--><!--end_enstr-->
<br><span class="jpstr">
リソース
</span><!--end_jpstr-->
</a></li>
                <li><a href="/videos/design/">Videos</a></li>
                <li><a href="/design/awards/">Apple Design Awards</a></li>
                <li><a href="/accessibility/">Accessibility</a></li>
                <li><a href="/internationalization/"><!--span class="enstr"-->Internationalization<!--/span--><!--end_enstr-->
<br><span class="jpstr">
国際化
</span><!--end_jpstr-->
</a></li>
                <li><a href="/accessories/">Accessories</a></li>
              </ul>
            </div>
            <div id="dn-colc" class="column">
              <h3><a href="/develop/">Develop</a></h3>
              <ul>
                <li><a href="/xcode/">Xcode</a></li>
                <li><a href="/swift/">Swift</a></li>
                <li><a href="/swift-playgrounds/">Swift Playgrounds</a></li>
                <li><a href="/testflight/">TestFlight</a></li>
                <li><a href="https://developer.apple.com/documentation/">Documentation</a></li>
                <li><a href="/videos/">Videos</a></li>
                <li><a href="/download/">Downloads</a></li>
              </ul>
            </div>
            <div id="dn-cold" class="column">
              <h3><a href="/distribute/">Distribute</a></h3>
              <ul>
                <li><a href="/app-store/">App Store</a></li>
                <li><a href="/macos/distribution/">Mac Software</a></li>
                <li><a href="/app-store/review/">App Review</a></li>
                <li><a href="/programs/volume/">Volume Purchase Program</a></li>
                <li><a href="/programs/volume/b2b/">Custom B2B Apps</a></li>
                <li><a href="/enterprise/distribute/">Enterprise Apps</a></li>
                <li><a href="/safari/extensions/">Safari Extensions</a></li>
                <li><a href="/app-store/marketing/guidelines/">Marketing Resources</a></li>
                <li><a href="/softwarelicensing/">Trademark Licensing</a></li>
              </ul>
            </div>
            <div id="dn-cole" class="column">
              <h3><a href="/support/">Support</a></h3>
              <ul>
                <li><a href="https://forums.developer.apple.com">Developer Forums</a></li>
                <li><a href="/bug-reporting/">Bug Reporting</a></li>
                <li><a href="/terms/">License Agreements</a></li>
                <li><a href="/system-status/">System Status</a></li>
                <li><a href="/contact/">Contact Us</a></li>
                <br />
                <h3><a href="/account/">Account</a></h3>
                <ul>
                  <li><a href="/programs/">Developer Program</a></li>
                  <li><a href="/account/ios/certificate/">Certificates, IDs &amp; Profiles</a></li>
                  <li><a href="https://itunesconnect.apple.com/">iTunes Connect</a></li>
                </ul>
              </ul>
            </div>
          </div>
        </nav>
        <div class="ac-gf-footer-legal">
          <div class="ac-gf-footer-news"> To receive the latest developer news, visit and subscribe to our <a href="/news/">News and Updates</a>.
          </div>
          <div class="ac-gf-footer-legal-copyright">Copyright © 2018 Apple Inc. All rights reserved.</div>
          <div class="ac-gf-footer-legal-links">
            <a href="https://www.apple.com/legal/internet-services/terms/site.html" class="first">Terms of Use</a>
            <a href="https://www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
            <a href="/bug-reporting/">Report Bugs</a>
            <a href="/contact/submit/?subject=website-feedback">Feedback</a>
          </div>
          <div class="ac-gf-footer-language-links">
            <a href="/cn/" class="first">简体中文</a>
            <a href="/jp/">日本語</a>
            <a href="/kr/">한국어</a>
          </div>
        </div>
      </footer></section></div></div><script id="bootstrap-data" type="application/json">{"id":2994025,"title":{"content":"Preventing Timing Problems When Using Closures"},"abstract":"<div><p>Understand how different APIs calls to your closures can affect your app.<\/p><\/div>","discussion":"<div><p>Many of the APIs you use in Swift take a closure—or a function passed as an instance—as a parameter. Because closures can contain code that interacts with multiple parts of an app, it&#x27;s important to understand the different ways closures can be called by the APIs you pass them to. Closures you pass to APIs can be called synchronously (immediately) or asynchronously (sometime later). They may be called once, many times, or never. <\/p><aside class=\"aside aside-important\" aria-label=\"important\"><p class=\"aside-name\">Important<\/p><p>Making false assumptions about when a closure is called can lead to data inconsistency and app crashes.<\/p><\/aside><p><\/p><\/div><h3 id=\"2994024\">Understand the Results of Synchronous and Asynchronous Calls<\/h3><div><p>When you pass a closure to an API, consider <em>when<\/em> that closure will be called relative to the other code in your app. In synchronous APIs, the result of calling the closure will be available immediately after you pass the closure. In asynchronous APIs, the result won&#x27;t be available until sometime later; this difference affects how you write code both <em>in<\/em> your closure as well as the code <em>following<\/em> your closure.<\/p><p>The example below defines two functions, <code class=\"code-voice\"><span>now(_:)<\/span><\/code> and <code class=\"code-voice\"><span>later(_:)<\/span><\/code>. You can call both functions the same way: with a trailing closure and no other arguments. Both <code class=\"code-voice\"><span>now(_:)<\/span><\/code> and <code class=\"code-voice\"><span>later(_:)<\/span><\/code> accept a closure and call it, but <code class=\"code-voice\"><span>later(_:)<\/span><\/code> waits a couple seconds before calling its closure.<\/p><figure id=\"2994028\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>import Dispatch\nlet queue = DispatchQueue(label: &quot;com.example.queue&quot;)\n\nfunc now(_ closure: () -&gt; Void) {\n    closure()\n}\n\nfunc later(_ closure: @escaping () -&gt; Void) {\n    queue.asyncAfter(deadline: .now() + 2) {\n        closure()\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>The <code class=\"code-voice\"><span>now(_:)<\/span><\/code> and <code class=\"code-voice\"><span>later(_:)<\/span><\/code> functions represent the two most common categories of APIs you&#x27;ll encounter in methods from app frameworks that take closures: synchronous APIs like <code class=\"code-voice\"><span>now(_:)<\/span><\/code>, and asynchronous APIs like <code class=\"code-voice\"><span>later(_:)<\/span><\/code>.<\/p><p>Because calling a closure can change the local and global state of your app, the code you write on the lines after passing a closure needs to be written with a careful consideration of <em>when<\/em> that closure is called. Even something as simple as printing a sequence of letters can be affected by the timing of a closure call:<\/p><figure id=\"2994026\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>later {\n    print(&quot;A&quot;) \/\/ Eventually prints &quot;A&quot;\n}\nprint(&quot;B&quot;) \/\/ Immediately prints &quot;B&quot;\n\nnow {\n    print(&quot;C&quot;) \/\/ Immediately prints &quot;C&quot;\n}\nprint(&quot;D&quot;) \/\/ Immedately prints &quot;D&quot;\n\n\/\/ Prevent the program from exiting immediately if you&#x27;re running this code in Terminal.\nlet semaphore = DispatchSemaphore(value: 0).wait(timeout: .now() + 10)\n<\/code><\/pre><\/div><\/div><\/figure><p>Running the code in the example above usually prints the letters in the order <code class=\"code-voice\"><span>B<\/span><\/code> → <code class=\"code-voice\"><span>C<\/span><\/code> → <code class=\"code-voice\"><span>D<\/span><\/code> → <code class=\"code-voice\"><span>A<\/span><\/code>. Even though the line that prints <code class=\"code-voice\"><span>A<\/span><\/code> is first in the code, it&#x27;s ordered later in the output. The ordering difference happens due to the way the <code class=\"code-voice\"><span>now(_:)<\/span><\/code> and <code class=\"code-voice\"><span>later(_:)<\/span><\/code> functions are defined. You need to know how each function calls its closure if you write code that relies on a specific execution order.<\/p><aside class=\"aside aside-note\" role=\"note\"><p class=\"aside-name\">Note<\/p><p>The order in which <code class=\"code-voice\"><span>A<\/span><\/code> is printed relative to the other letters isn&#x27;t guaranteed. Under typical system conditions, it&#x27;s usually printed last, but you shouldn&#x27;t write code that relies on the order of an asychronous call relative to synchronous code without performing more careful synchronization between threads.<\/p><\/aside><p>You&#x27;ll need to consider this kind of time-based execution problem frequently when using APIs that take closures. In many cases, only one sequence of calls is correct for your app, so it&#x27;s important to think through what the state of your app will be, given the APIs you&#x27;re using. Use API names and parameter names along with documentation to determine whether an API is synchronous or asynchronous. <\/p><p>A common timing mistake is expecting the results of an asynchronous call to be available within the calling synchronous code. For example, the <code class=\"code-voice\"><span>later(_:)<\/span><\/code> method above is comparable to the <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\"><code><span>URLSession<\/span><\/code><\/a> class&#x27;s <a class=\"symbol-name\" href=\"\/documentation\/foundation\/urlsession\/1410330-datatask\"><code><span>data<wbr\/>Task(with:<wbr\/>completion<wbr\/>Handler:)<\/span><\/code><\/a> method, which is also asynchronous. A timing scenario you should avoid is calling the <code class=\"code-voice\"><span>data<wbr\/>Task(with:<wbr\/>completion<wbr\/>Handler:)<\/span><\/code> method within your app&#x27;s <a class=\"symbol-name\" href=\"\/documentation\/uikit\/uiviewcontroller\/1621495-viewdidload\"><code><span>view<wbr\/>Did<wbr\/>Load()<\/span><\/code><\/a> method and attempting to use the results outside of the closure you pass as the completion handler. <\/p><p><\/p><\/div><h3 id=\"2994084\">Don't Write Code That Makes a One-Time Change in a Closure That's Called Multiple Times<\/h3><div><p>If you&#x27;re going to pass a closure to an API that might call it multiple times, omit code that&#x27;s intended to make a one-time change to external state. <\/p><p>The example below creates a <a class=\"symbol-name\" href=\"\/documentation\/foundation\/filehandle\"><code><span>File<wbr\/>Handle<\/span><\/code><\/a> and an array of data lines to write to the file that the handle refers to:<\/p><figure id=\"2994081\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>import Foundation\n\nlet file = FileHandle(forWritingAtPath: &quot;\/dev\/null&quot;)!\nlet lines = [&quot;x,y&quot;, &quot;1,1&quot;, &quot;2,4&quot;, &quot;3,9&quot;, &quot;4,16&quot;]\n<\/code><\/pre><\/div><\/div><\/figure><p>To write each line to the file, pass a closure to the <a class=\"symbol-name\" href=\"\/documentation\/swift\/array\/1689783-foreach\"><code><span>for<wbr\/>Each(_:)<\/span><\/code><\/a> method:<\/p><figure id=\"2994080\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>lines.forEach { line in\n    file.write(&quot;\\(line)\\n&quot;.data(using: .utf8)!)\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>When you&#x27;re finished using a <code class=\"code-voice\"><span>File<wbr\/>Handle<\/span><\/code>, close it using <a class=\"symbol-name\" href=\"\/documentation\/foundation\/filehandle\/1413393-closefile\"><code><span>close<wbr\/>File()<\/span><\/code><\/a>. The correct placement of the call to <code class=\"code-voice\"><span>close<wbr\/>File()<\/span><\/code> is outside of the closure:<\/p><figure id=\"2994083\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>lines.forEach { line in\n    file.write(&quot;\\(line)\\n&quot;.data(using: .utf8)!)\n}\n\nfile.closeFile()\n<\/code><\/pre><\/div><\/div><\/figure><p>If you misunderstand the requirements of <a class=\"symbol-name\" href=\"\/documentation\/foundation\/filehandle\/1413393-closefile\"><code><span>close<wbr\/>File()<\/span><\/code><\/a>, you might place the call inside the closure. Doing so crashes your app:<\/p><figure id=\"2994085\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>lines.forEach { line in\n    file.write(&quot;\\(line)\\n&quot;.data(using: .utf8)!)\n    file.closeFile() \/\/ Error\n}\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div><h3 id=\"2994082\">Don't Put Critical Code in a Closure That Might Not Be Called<\/h3><div><p>If there&#x27;s a chance that a closure you pass to an API won&#x27;t be called, don&#x27;t put code that&#x27;s critical to continuing your app in the closure.<\/p><p>The example below defines a <code class=\"code-voice\"><span>Lottery<\/span><\/code> enumeration that randomly picks a winning number and calls a completion handler if the right number is guessed:<\/p><figure id=\"2994097\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>enum Lottery {\n    static var lotteryWinHandler: (() -&gt; Void)?\n    \n    @discardableResult static func pickWinner(guess: Int) {\n        print(&quot;Running the lottery.&quot;)\n        if guess == Int.random(in: 0 ..&lt; 100_000_000), let winHandler = lotteryWinHandler {\n            winHandler()\n            return true\n        }\n        \n        return false\n    }\n}\n<\/code><\/pre><\/div><\/div><\/figure><p>Writing code that depends on the completion handler being called is dangerous. There&#x27;s no guarantee that the random guess will be correct, so important actions like paying bills—scheduled for after you win the lottery—might never happen.<\/p><figure id=\"2994098\"><div class=\"formatted-content\"><div class=\"code-listing\"><pre class=\"code-source\" data-language=\"swift\"><code>func payBills() {\n    amountOwed = 0\n}\n\nvar amountOwed = 25\nlet myLuckyNumber = 42\n\nLottery.lotteryWinHandler = {\n    print(&quot;Congratulations!&quot;)\n    payBills()\n}\n\n\/\/ You get 10 chances at winning.\nfor _ in 1..10 {\n    Lottery.pickWinner(guess: myLuckyNumber)\n}\n\nif amountOwed &gt; 0 {\n    fatalError(&quot;You need to pay your bills before proceeding.&quot;)\n}\n\n\/\/ Code placed below this line runs only if the lottery was won.\n<\/code><\/pre><\/div><\/div><\/figure><p><\/p><\/div>","containingGroup":[{"id":2984802,"role":"task","paths":[],"symbols":[{"id":2993321,"role":"article","paths":["documentation\/swift\/maintaining_state_in_your_apps"],"abstract":"<div><p>Use enumerations to capture and track the state of your app.<\/p><\/div>","title":{"content":"Maintaining State in Your Apps"}},{"id":2994025,"role":"article","paths":["documentation\/swift\/preventing_timing_problems_when_using_closures"],"abstract":"<div><p>Understand how different APIs calls to your closures can affect your app.<\/p><\/div>","title":{"content":"Preventing Timing Problems When Using Closures"}}],"title":{"content":"Data Flow and Control Flow"}}],"modules":[{"title":{"content":"Swift Standard Library"},"paths":["documentation\/swift"],"importStatement":"<import xml:space=\"preserve\"><keyWord>import<\/keyWord> Swift<\/import>","availability":[{"platform":"macOS","introduced":"10.10"},{"platform":"watchOS","introduced":"2.0"},{"platform":"tvOS","introduced":"9.0"},{"platform":"iOS","introduced":"8.0"}]}],"languages":["swift"],"variants":{"swift":{"paths":["documentation\/swift\/preventing_timing_problems_when_using_closures"]}},"pid":183535,"role":"article","language":"swift","paths":["documentation\/swift\/preventing_timing_problems_when_using_closures"],"hierarchy":[[{"id":3000738,"role":"collection","title":{"content":"Swift"},"paths":["documentation\/swift"]}]],"legalNotices":{"copyright":"Copyright &copy; 2018 Apple Inc. All rights reserved.","termsOfUse":"https:\/\/www.apple.com\/legal\/internet-services\/terms\/site.html","privacyPolicy":"https:\/\/www.apple.com\/privacy\/privacy-policy"}}</script></body></html>